var Cardboard=(()=>{var J=Object.defineProperty;var jt=Object.getOwnPropertyDescriptor;var Ut=Object.getOwnPropertyNames;var Ft=Object.prototype.hasOwnProperty;var x=(r,t)=>{for(var e in t)J(r,e,{get:t[e],enumerable:!0})},Vt=(r,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ut(t))!Ft.call(r,n)&&n!==e&&J(r,n,{get:()=>t[n],enumerable:!(s=jt(t,n))||s.enumerable});return r};var zt=r=>Vt(J({},"__esModule",{value:!0}),r);var Jt={};x(Jt,{CEvent:()=>S,CMappedEvent:()=>N,CTag:()=>I,Cardboard:()=>Dt,DiffState:()=>qt,Link:()=>Mt,Observable:()=>P,Router:()=>B,allTags:()=>X,arraysEqual:()=>Rt,camelToDash:()=>C,clearMountPoints:()=>St,compute:()=>p,computeMultiple:()=>Et,context:()=>l,createGlobalObserver:()=>q,createObservable:()=>y,deepEquals:()=>E,diffList:()=>$t,each:()=>Xt,equalTo:()=>ot,genBlock:()=>Y,genBlockContent:()=>W,genCss:()=>z,getMountPoint:()=>Ct,getValue:()=>v,grab:()=>ht,greaterThan:()=>rt,greaterThanOr:()=>st,init:()=>It,isArray:()=>V,isEmpty:()=>at,isObject:()=>w,isObservable:()=>T,lessThan:()=>nt,lessThanOr:()=>it,listState:()=>At,makeRouter:()=>kt,mappedEvent:()=>wt,mountPoint:()=>Q,notEmpty:()=>lt,notEqualTo:()=>ut,onLifecycle:()=>$,removeFromList:()=>L,resetMountPoints:()=>Ot,restoreMountPoint:()=>pt,router:()=>H,singleEvent:()=>k,state:()=>yt,stateAdd:()=>vt,stateAddAt:()=>gt,stateRemove:()=>xt,stateRemoveWhere:()=>D,swapItems:()=>bt,tag:()=>O,text:()=>M,val:()=>_,withLifecycle:()=>Z,withMountPoint:()=>Pt});var mt={};x(mt,{CTag:()=>I,allTags:()=>X,clearMountPoints:()=>St,context:()=>l,getMountPoint:()=>Ct,init:()=>It,mountPoint:()=>Q,resetMountPoints:()=>Ot,restoreMountPoint:()=>pt,tag:()=>O,withMountPoint:()=>Pt});var tt={};x(tt,{genBlock:()=>Y,genBlockContent:()=>W,genCss:()=>z});var K={};x(K,{arraysEqual:()=>Rt,camelToDash:()=>C,deepEquals:()=>E,isArray:()=>V,isObject:()=>w,removeFromList:()=>L,swapItems:()=>bt,val:()=>_});var L=(r,t)=>{if(!t)return!1;let e=t.indexOf(r);return e!==-1?(t.splice(e,1),!0):!1},C=r=>r.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`),w=r=>typeof r=="object"&&!(r instanceof Array),V=r=>Object.prototype.toString.call(r)==="[object Array]",_=(r,...t)=>typeof r=="function"?r(...t):r,bt=(r,t,e)=>{let s=r[t];return r[t]=r[e],r[e]=s,r},Rt=(r,t)=>{if(r===t)return!0;if(r==null||t==null||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0},E=(r,t)=>{if(r===t)return!0;if(r&&t&&r.length!==t.length)return!1;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var e,s,n;if(Array.isArray(r)){if(e=r.length,e!=t.length)return!1;for(s=e;s--!==0;)if(!E(r[s],t[s]))return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===t.toString();if(n=Object.keys(r),e=n.length,e!==Object.keys(t).length)return!1;for(s=e;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[s]))return!1;for(s=e;s--!==0;){var o=n[s];if(!E(r[o],t[o]))return!1}return!0}return r!==r&&t!==t};var z=r=>{let t=r instanceof Array?r:[r],e="";for(let s of t)for(let n in s)e+=Y(n,s[n]);return e},Y=(r,t)=>W(r,t).join(""),W=(r,t)=>{let e="",s=[];for(let n in t)w(t[n])?s.push(...W(r+n,t[n])):t[n]&&(e+=`${C(n)}:${t[n]};`);return s.unshift(`${r}{${e}}`),s};var dt={};x(dt,{text:()=>M});var ct={};x(ct,{Observable:()=>P,compute:()=>p,computeMultiple:()=>Et,createObservable:()=>y,equalTo:()=>ot,getValue:()=>v,grab:()=>ht,greaterThan:()=>rt,greaterThanOr:()=>st,isEmpty:()=>at,isObservable:()=>T,lessThan:()=>nt,lessThanOr:()=>it,notEmpty:()=>lt,notEqualTo:()=>ut});var et={};x(et,{CEvent:()=>S,CMappedEvent:()=>N,mappedEvent:()=>wt,singleEvent:()=>k});var S=class{constructor(){this._listeners=[]}listen(t){this._listeners.push(t)}remove(t){L(t,this._listeners)}dispatch(t){this._listeners.forEach(e=>e(t))}destroy(){this._listeners=[]}},N=class{constructor(){this._listeners={}}listen(t,e){t in this._listeners?this._listeners[t]&&this._listeners[t].push(e):this._listeners[t]=[e]}remove(t,e){L(e,this._listeners[t])}dispatch(t,e){t in this._listeners&&this._listeners[t].forEach(s=>s(e))}destroy(){this._listeners={}}},k=()=>new S,wt=()=>new N;var P=class extends S{get value(){return this._value}set value(t){this.dispatch(t)}constructor(t,e){super(),this.computed=s=>p(this,s),this.greaterThan=(s=0)=>rt(this,s),this.greaterThanOr=(s=0)=>st(this,s),this.lessThan=(s=0)=>nt(this,s),this.lessThanOr=(s=0)=>it(this,s),this.equalTo=s=>ot(this,s),this.notEqualTo=s=>ut(this,s),this.isEmpty=()=>at(this),this.notEmpty=()=>lt(this),this.grab=(s,n)=>ht(this,s,n),t&&(w(t)||V(t))&&(t=new Proxy(t,{get(s,n,o){return s[n]},set:(s,n,o,u)=>(s[n]===o||(s[n]=o,super.dispatch(s)),!0),deleteProperty:(s,n)=>(delete s[n],super.dispatch(s),!0)})),this._value=t,this._destroyer=e}valueOf(){return this._value}toString(){return this._value.toString()}changed(t){return this.listen(t),this}remove(t){return super.remove(t),this}dispatch(t){return t===this._value?this:(this._value=t,super.dispatch(t),this)}destroy(){this._destroyer&&this._destroyer(),this._value=null,super.destroy()}},T=r=>r instanceof P,y=(r,t)=>new P(r,t),p=(r,t)=>{let e,s=n=>e?.dispatch(t(n));return e=y(t(r.value),()=>{r.remove(s),e=null,r=null}),r.changed(s),e},Et=(r,t)=>{let e=y(t(...r.map(s=>s.value)));for(let s of r)s.changed(()=>e.dispatch(t(...r.map(n=>n.value))));return e},v=r=>T(r)?r.value:r,rt=(r,t=0)=>p(r,e=>e>v(t)),st=(r,t=0)=>p(r,e=>e>=v(t)),nt=(r,t=0)=>p(r,e=>e<v(t)),it=(r,t=0)=>p(r,e=>e<=v(t)),ot=(r,t)=>p(r,e=>e===v(t)),ut=(r,t)=>p(r,e=>e!==v(t)),at=r=>p(r,t=>t.length<=0),lt=r=>p(r,t=>t.length>0),ht=(r,t,e)=>p(r,s=>s&&s[t]?s[t]:e);var M=(r,t)=>{let e=document.createTextNode(""),s=/\B\$([0-9]+|[a-z][a-z0-9_$]*)/gi;if(!t)return e.nodeValue=r,e;let n=o=>{e.nodeValue=o?r.replace(s,(u,i)=>{var a;return((a=o[i])!==null&&a!==void 0?a:u).toString()}):r};if(T(t))t.changed(o=>n(o)),n(t.value);else if(w(t)){for(let o of Object.getOwnPropertyNames(t))r.includes(`$${o}`)&&T(t[o])&&t[o].changed(()=>n(t));n(t)}return e};var ft={};x(ft,{createGlobalObserver:()=>q,onLifecycle:()=>$,withLifecycle:()=>Z});var q=()=>{let r=k(),t=k();return new window.MutationObserver((s,n)=>{for(let o of s){for(let u of Array.from(o.addedNodes))r.dispatch(u);for(let u of Array.from(o.removedNodes))t.dispatch(u)}}).observe(document.body,{childList:!0,subtree:!0}),{onAdded:r,onRemoved:t}};function $(r,t,e,s){if(s){let u=r.el.remove;r.el.remove=async()=>{let i=s(r);return(!i||i instanceof Promise&&await i)&&u.call(r.el),i.valueOf()}}if(t){let u=r.show;r.show=async()=>{let i=u.call(r);return i instanceof Promise?await i:i}}l.observer||(l.observer=q());let n,o;l.observer.onAdded.listen(n=async u=>{if(u===r.el&&t){let i=t(r);i instanceof Promise&&await i}}),l.observer.onRemoved.listen(o=u=>{u===r.el&&e&&e(r)}),r._destroyers.push(()=>{var u,i;(u=l.observer)===null||u===void 0||u.onRemoved.remove(o),(i=l.observer)===null||i===void 0||i.onAdded.remove(n),e=void 0,t=void 0})}var Z=(r,t)=>($(r,t.mounted,t.unmounted,t.beforeUnmounted),r);var l={mountPoint:void 0,mountPointHistory:[]},Ct=()=>l.mountPoint,I=class r{get parent(){return this._parent}set parent(t){this._parent=t}get children(){return this._getChildren(this.el)}get value(){return this.el.value}setValue(t){return this.el.value=t,this}get checked(){return this.el.checked}setChecked(t){return this.el.checked=t,this}get style(){return this.el.style}get className(){return this.el.className}get classList(){return this.el.classList}get consumeValue(){let t=this.value;return this.clear(),t}get id(){return this.el.id}setId(t){return this.el.id=t,this}constructor(t,e=[],s=!1){if(this._destroyers=[],this._children=[],this._cachedChildren=[],this._meta={isHidden:!1,nextSiblingID:null},typeof t=="string"&&t.match(/\(.+\)/)){let o=t.match(/\(([\.\#]?[a-zA-Z][a-zA-Z0-9_$]+)\)/),u=o?o[1]:null;if(!u)throw new Error(`'${t}' is not a valid selector`);let i=document.querySelector(u);if(!i)throw new Error("Can't find element for selector: "+t);this.el=i}else if(typeof t=="string")this.el=document.createElement(t),l.mountPoint&&s&&l.mountPoint.append(this);else if(t instanceof HTMLElement)this.el=t;else throw new Error("Invalid argument: "+t);e.length>0&&this.setChildren(e)}setChildren(t){return this.el.replaceChildren(...this._mapChildren(t)),this._children=t,this}append(...t){return this.el.append(...this._mapChildren(t)),this._children.push(...t),this}prepend(...t){return this.el.prepend(...this._mapChildren(t)),this._children.unshift(...t),this}async show(){if(this.parent&&!this.parent.children.includes(this.el)){let t=this.parent.el,e=this.parent._children.indexOf(this);if(e===0)t.prepend(this.el);else if(e===this.parent._children.length-1)t.append(this.el);else{let s=0;for(let o=e-1;o>=0;o--){let u=this.parent._children[o];u instanceof r&&u._meta.isHidden&&s++}let n=t.childNodes[e-s];t.insertBefore(this.el,n)}}return this._meta.isHidden=!1,!0}async hide(){this.parent&&this.parent.children.includes(this.el)&&(await this.remove(),this._meta.isHidden=!0)}consume(t,e){if(t.changed){let s=n=>e(this,n);t.changed(s),this._destroyers.push(()=>{t.remove(s),t=null})}else console.warn("An invalid Observable was supplied to `tag.consume`");return e(this,"value"in t?t.value:t),this}doIf(t,e,s,n=!1){if(n){let u=e;e=s,s=u}let o=(u,i)=>{i?e(i):s(i)};return this.consume(t,o)}doIfNot(t,e,s){return this.doIf(t,e,s,!0)}hideIf(t,e=!1){let s=(n,o)=>{let u=e?!o:!!o;this._meta.isHidden=u,this.parent&&(u?this.hide():this.show())};return this.consume(t,s)}hideIfNot(t){return this.hideIf(t,!0)}classIf(t,e,s=!1){return this.doIf(t,()=>this.addClass(..._(e,this)),()=>this.rmClass(..._(e,this)),s)}classIfNot(t,e){return this.classIf(t,e,!0)}textIf(t,e,s="",n=!1){return this.doIf(t,()=>this.text(_(e,this)),()=>this.text(_(s,this)),n)}textIfNot(t,e,s=""){return this.textIf(t,e,s,!0)}attrIf(t,e,s="",n=!1){return this.doIf(t,()=>this.addAttr(e,_(s,this)),()=>this.rmAttr(e),n)}attrIfNot(t,e,s=""){return this.attrIf(t,e,s,!0)}disableIf(t,e=!1){return this.attrIf(t,"disabled","",e)}disableIfNot(t){return this.disableIf(t,!0)}styleIf(t,e,s="",n=!1){return this.doIf(t,()=>this.addStyle(e,_(s,this)),()=>this.rmStyle(e),n)}styleIfNot(t,e,s=""){return this.styleIf(t,e,s,!0)}stylesIf(t,e,s=!1){return this.doIf(t,()=>this.setStyle(_(e,this)),()=>this.rmStyle(...Object.keys(e)),s)}stylesIfNot(t,e){return this.stylesIf(t,e,!0)}listen(t,e,s){return t.on(e,(n,o)=>{s(this,n,o)})}text(t,e){return t==null?this.el.textContent:e&&t?this.setChildren([M(t,e)]):(this.el.textContent=t,this)}config(t){if(t.attr&&this.setAttrs(t.attr),t.classList&&this.addClass(...t.classList),t.className&&this.setClassName(t.className),t.style&&this.setStyle(t.style),t.text&&this.text(t.text),t.value&&this.setValue(t.value),t.children&&this.append(...t.children),t.on)for(let e of Object.keys(t.on))this.on(e,t.on[e]);return this}addClass(...t){return this.classList.add(...t),this}setClassName(t){return this.el.className=t,this}rmClass(...t){for(let e of t)this.classList.remove(e);return this}hasClass(...t){for(let e of t)if(!this.classList.contains(e))return!1;return!0}replaceClass(t,e){return this.classList.replace(t,e),this}toggleClass(t){return this.hasClass(t)?this.rmClass(t):this.addClass(t)}addStyle(t,e){return this.el.style[t]=e,this}setStyle(t){var e;for(let s in t)this.addStyle(s,(e=t[s])!==null&&e!==void 0?e:"");return this}rmStyle(...t){for(let e of t)this.style.removeProperty(C(e));return this}hasStyle(...t){for(let e of t)if(!this.style.getPropertyValue(C(e)))return!1;return!0}setAttrs(t){for(let e in t)this.addAttr(e,t[e]);return this}addAttr(t,e=""){return this.el.attributes[t]=e,this.el.setAttribute(t,e),this}rmAttr(...t){for(let e of t)this.el.removeAttribute(e),delete this.el.attributes[e];return this}hasAttr(...t){for(let e of t)if(!(e in this.el.attributes))return!1;return!0}getAttr(t){return this.el.attributes[t]}when(t,e){let s=y({});return this.on(t,(n,o)=>{s.dispatch(e(n,o))}),s}on(t,e){if(e){let s=n=>e(this,n);this.el.addEventListener(t,s),this._destroyers.push(()=>{this.el.removeEventListener(t,s)})}return this}once(t,e){let s=n=>{e(this,n),this.el.removeEventListener(t,s)};return this.el.addEventListener(t,s),this}clicked(t){return this.on("click",t)}keyPressed(t,e){return e?this.on("keypress",(s,n)=>{(n.code===e||n.key===e)&&t(this,n)}):this.on("keypress",t)}changed(t){return this.on("change",t)}submited(t){return this.on("submit",t)}async remove(){let t=this.el.remove();return t instanceof Promise&&await t,await this.el.remove(),this}destroy(){this._children.forEach(t=>{t instanceof r&&t.destroy()}),this._destroyers.forEach(t=>t()),this._children=[],this._cachedChildren=[],this.remove()}clear(){return this.el.value="",this.el.dispatchEvent(new InputEvent("input")),this}disable(){return this.setDisabled(!0)}enable(){return this.setDisabled(!1)}setDisabled(t){return t?this.addAttr("disabled"):this.rmAttr("disabled")}q(t){let e=this.el.querySelector(t);if(e)return new r(e)}find(t){for(let e of this._children)if(t(e))return e}findTag(t){for(let e of this._children)if(e instanceof r&&t(e))return e}_childrenFilterPredicate(t){return!(t instanceof r&&t._meta.isHidden)}_getElementForChild(t){return typeof t=="string"?document.createTextNode(t):T(t)?M("$val",{val:t}):t instanceof r?t.el:t instanceof Node?t:null}_getChildren(t){return this._observer||(this._observer=new MutationObserver(()=>{this._cacheChildren(t)}),this._observer.observe(this.el,{childList:!0}),this._cacheChildren(t)),this._cachedChildren}_cacheChildren(t){let e=t.childNodes,s=[],n=e.length;for(;n--;)e[n].nodeType===1&&s.unshift(e[n]);this._cachedChildren=s}_mapChildren(t){let e=[];for(let s of t)if(s instanceof r&&(s.parent=this),this._childrenFilterPredicate(s)){let n=this._getElementForChild(s);n!=null&&e.push(n)}return e}},O=(r,t=[],e=!1)=>new I(r,t,e),Q=r=>(l.mountPoint&&l.mountPointHistory.push(l.mountPoint),l.mountPoint=r,r),pt=()=>{l.mountPoint=l.mountPointHistory.pop()},St=()=>{l.mountPoint=void 0,l.mountPointHistory=[]},Ot=()=>{let r=l.mountPointHistory.shift();l.mountPoint=r,l.mountPointHistory=[]},Pt=(r,t)=>{Q(r),t(r),pt()},It=(r={selector:"body"})=>{let t=new I(`(${r.selector})`);return l.observer=q(),Q(t)},G={ul:(r,t=!1)=>O("ul",r.map(e=>O("li",[e],t))),style:(r,t=!1)=>O("style",[z(r)],t)},X=new Proxy({},{get:(r,t,e)=>{let s=t.toString(),n=(...o)=>G[s]?G[s](o,!1):O(s,o);return Object.defineProperty(n,"mount",{get:()=>(...o)=>G[s]?G[s](o,!0):O(s,o,!0)}),n}});var _t={};x(_t,{listState:()=>At,state:()=>yt,stateAdd:()=>vt,stateAddAt:()=>gt,stateRemove:()=>xt,stateRemoveWhere:()=>D});var yt=r=>y(r),At=r=>{let t=yt(r.map(n=>y(n)));return{get list(){return t},get listValue(){return t.value},add:n=>{vt(t,y(n))},addAt:(n,o)=>{gt(t,y(n),o)},remove:xt.bind({},t),removeWhere:D.bind({},t),length:t.computed(n=>n.length)}},vt=(r,t)=>{r.value=[...r.value,t]},gt=(r,t,e)=>{let s=[...r.value];s.splice(e,0,t),r.value=s,s=[]},D=(r,t)=>{r.value=r.value.filter((e,s)=>!t(e,s))},xt=(r,t)=>{let e=r.value.findIndex(s=>v(s)===v(t));D(r,(s,n)=>e===n)};var Tt={};x(Tt,{Link:()=>Mt,Router:()=>B,makeRouter:()=>kt,router:()=>H});var Wt=/[-[\]{}()+?.,\\^$|#\s]/g,Lt=/([:*])(\w+)/g;function Zt(r,t){let e=r.toString(r).charAt(8);return e==="R"?r.test(t):e==="F"?r(t):r==t}var Nt=(r,t={})=>{let e={},s=[],n=r;return typeof n=="string"?(n=n.replace(Wt,"\\$&"),n=n.replace(Lt,function(o,u,i){return s.push(i),u===":"?"([^/]*)":"(.*)"}),n=new RegExp("^"+n+"$"),e.parse=function(o){let u=0,i,a,g={},j=o.match(n);if(!j)return null;for(;u<s.length;){if(i=s[u++],a=j[u],t&&i in t&&!Zt(t[i],a))return null;g[i]=a}return g},e.stringify=function(o){let u,i,a=r;for(u in o)i=new RegExp("[:*]"+u+"\\b"),a=a.replace(i,o[u]);return a.replace(Lt,"")}):(e.parse=function(o){let u=o.match(n);return u&&{captures:u.slice(1)}},e.stringify=function(){return""}),e};var{div:Gt,a:Qt}=X,B=class{constructor(t){this._routes={};this._routeMatchers=[];this.params={};this.query=new URLSearchParams;this._options=t,this._rootParent=t.rootParent,this._window=t.window??window,this._location=this._window.location,this._history=this._window.history,this._initRouteMatchers(),this._modifyPushState(),this._listenEvents(),this.navigate(this._options.initialRoute)}get currentRoute(){return this._currentRoute}navigate(t,e){let s=new URLSearchParams(e),n=s.toString(),o=this.query.toString();(t!==this._currentRoute||n!==o)&&(this.query=s,this._history.pushState("data","",t+(n?"?"+n:"")))}async _setRoute(){this._currentTag&&await this._currentTag.hide();let t=this._getRoute();t.parent?await t.show():(this._hookLifecycle(t),this._rootParent.append(t)),this._currentTag=t}_hookLifecycle(t){let e=this._options;!e.unmounted&&!e.mounted||(Z(t,{mounted:e.mounted,unmounted:e.unmounted,beforeUnmounted:e.beforeUnmounted}),$(t,e.mounted,e.unmounted,e.beforeUnmounted))}_getEffectiveRoute(){if(!this._currentRoute)return;let t=this._currentRoute,e=1e4,s;for(;typeof(s=this._options.routes[t])=="string"&&e--&&typeof s=="string";)t=s;return t}_getRoute(){let t=this._getEffectiveRoute(),e=this._options,s=t,n=!1;this.query=new URLSearchParams(this._location.search);for(let{matcher:u,key:i}of this._routeMatchers){let a=u.parse(s);if(a){this.params=a,s=i,n=!0;break}}if(n||(s=e.fallbackRoute),!(s in e.routes))return e.noRouteBuilder?e.noRouteBuilder(this):Gt("No route found for: "+t);if(this._routes[s])return this._routes[s].show(),this._routes[s];let o=e.routes[s];if(typeof o!="function")throw new Error("Can't find route builder for "+this._currentRoute);return this._routes[s]=o(this)}_setCurrentRoute(){this.currentRoute!==this._location.pathname&&(this._currentRoute=this._location.pathname,this._setRoute())}_listenEvents(){this._window.addEventListener("popstate",this._setCurrentRoute.bind(this)),this._window.addEventListener("pushstate",this._setCurrentRoute.bind(this))}_modifyPushState(){let t=this._history.pushState;this._history.pushState=(...e)=>{t.call(this._history,...e),this._window.dispatchEvent(new window.Event("pushstate"))}}_initRouteMatchers(){for(let t in this._options.routes)this._routeMatchers.push({key:t,matcher:Nt(t)})}},H,kt=r=>H=new B(r),Mt=(r,t,e)=>Qt(r).addAttr("href","javascript:;").setStyle({margin:"0 8px 0 0"}).clicked(()=>{if(!H)throw new Error("Link can	 navigate, there is no router available");H.navigate(t,e)});var qt=(n=>(n.unchanged="unchanged",n.added="added",n.removed="removed",n.swap="swap",n))(qt||{});function Xt(r,t,e){let s=document.createTextNode(""),n=[],o=[],u=0,i=[],U={added:h=>{if(h.index>=0){let d=t(h.entry),c=n[h.index];n.splice(h.index,0,d),s.parentElement?.insertBefore(d.el,c?c.el:s)}},removed:h=>{s.parentElement?.removeChild(i[h.index].el),i[h.index].destroy();let d=n.indexOf(i[h.index]);n.splice(d,1)},swap:h=>{let d=h.index,c=h.targetIndex??0;if(d>=0&&c>=0){let f=i[d],m=i[c],R=f.el.parentNode,A=f.el.nextSibling;R&&A===m.el?R.insertBefore(m.el,f.el):m.el.parentNode&&(m.el.parentNode.insertBefore(f.el,m.el),A&&R?R.insertBefore(m.el,A):R&&R.appendChild(m.el));let Bt=i[d];i[d]=i[c],i[c]=Bt;let Ht=n[d];n[d]=n[c],n[c]=Ht}}},F=100,b=(h,d=0)=>{if(!s.parentElement){d<F?setTimeout(()=>b(h,d+1),1):console.warn("[each]: parentElement not found after max retries");return}u||(u=Array.from(s.parentElement?.childNodes??[]).indexOf(s));let c=$t(h,o,e);if(!(c.length<=0)){for(let f=0;f<c.length;f++){let m=c[f],R=c[f+1]?c[f+1].index:null,A=c[f+1]?c[f+1].state:null;U[m.state](m),A==="swap"&&R===m.targetIndex&&f++}o=[...h].slice(0),i=n.slice(0)}};return b("value"in r?r.value:r),T(r)&&r.changed(b),s}function $t(r,t,e=s=>s){let s=[],n=r.length,o=t.length;if(n===o&&(r==t||E(t,r)))return s;if(n<=0){for(let i=0;i<o;i++)s[i]={entry:t[i],state:"removed",index:i};return s}if(!o){for(let i=0;i<n;i++)s[i]={entry:r[i],state:"added",index:i};return s}let u=0;for(let i=0;i<o;i++){let a=r[i-u],g=t[i];if(e(g)==e(a)||E(g,a))continue;let U=!!r.find(b=>e(g)==e(b)),F=!!t.find(b=>e(a)==e(b));if(!F&&U){s.push({entry:a,state:"added",index:i-u}),u--;continue}if(F&&!U||a==null){s.push({entry:g,state:"removed",index:i}),u++;continue}if(r.indexOf(g)>=0){s.push({entry:a,targetEntry:g,state:"swap",index:t.indexOf(r[i-u]),targetIndex:t.indexOf(t[i])});let b=t.indexOf(a),h=t[i];t[i]=r[i-u],t[b]=h;continue}}if(u!=o)for(let i=o-u;i<n;i++){let a=r[i];s.push({entry:a,state:"added",index:i})}return s}var Dt={...mt,..._t,...tt,...K,...dt,...et,...Tt,...ct,...ft};return zt(Jt);})();
