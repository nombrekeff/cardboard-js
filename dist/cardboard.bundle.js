var t={d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function s(t,e){const s=e.indexOf(t);return-1!==s&&e.splice(s,1),e}t.d(e,{wc:()=>m,Kh:()=>l,rU:()=>T,F0:()=>x,iF:()=>R,ub:()=>y,om:()=>f,nU:()=>a,Dk:()=>n,HO:()=>i,ZP:()=>E,og:()=>v,lW:()=>b,xZ:()=>h,S1:()=>w,Kn:()=>r,EP:()=>N,SB:()=>p,xj:()=>s,Nd:()=>k,C6:()=>I,_q:()=>_,fL:()=>c,Qs:()=>o,Uq:()=>g});const n=t=>t.replace(/([A-Z])/g,(t=>`-${t.toLowerCase()}`)),i=t=>t.replace(/(\-[a-z])/g,(t=>t.toUpperCase().replace("-","")));function r(t){return"object"==typeof t&&!(t instanceof Array)}const o=t=>JSON.parse(t),h=t=>JSON.stringify(t),a=(t,...e)=>"function"==typeof t?t(...e):t;class l{generateCss(t){let e=t instanceof Array?t:[t],s="";for(const t of e)for(const e in t)s+=this.generateBlock(e,t[e]);return s}generateBlock(t,e){return this.generateBlockContent(t,e).join("")}generateBlockContent(t,e){let s="",n=[];for(const i in e)r(e[i])?n.push(this.generateBlockContent(t+i,e[i])):e[i]&&(s+=this.generateStyle(i,e[i]));return n.unshift(`${t}{${s}}`),n}generateStyle(t,e){return`${n(t)}:${e};`}}function c(t,e){const s=document.createTextNode(""),n=/\B\$([0-9]+|[a-z][a-z0-9_$]*)/gi,i=()=>{s.nodeValue=e?t.replace(n,((t,s)=>null!=e[s]?e[s].toString():t)):t};if(e&&r(e))for(let s in e)t.includes(`$${s}`)&&e[s].changed((()=>{i()}));return i(),s}var u=function(t,e,s,n){return new(s||(s=Promise))((function(i,r){function o(t){try{a(n.next(t))}catch(t){r(t)}}function h(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,h)}a((n=n.apply(t,e||[])).next())}))};let d={attachedTag:null,attachedTagStack:[],css:new l};function f(){return d.attachedTag}class m{get parent(){return this._parent}set parent(t){this._parent=t}get children(){return this._getElementChildren(this.element),this._cachedChildren}get value(){return this.element.value}get style(){return this.element.style}setValue(t){return this.element.value=t,this}get consumeValue(){const t=this.value;return this.clear(),t}get id(){return this.element.id}setId(t){return this.element.id=t,this}constructor(t,e=[],s=!1){if(this._parent=null,this._children=[],this._cachedChildren=[],this._attachable=!1,this._meta={isHidden:!1,nextSiblingID:null},this._attachable=s,"string"==typeof t&&t.match(/\(.+\)/))this._attachable=!1,this.element=document.querySelector(t.match(/\((.+)\)/)[1]);else if("string"==typeof t)this.element=document.createElement(t);else{if(!(t instanceof HTMLElement))throw new Error("Invalid argument 0");this._attachable=!1,this.element=t}d.attachedTag&&this._attachable&&d.attachedTag.append(this),e.length>0&&this.setChildren(e)}setChildren(t){return this.element.replaceChildren(...t.map(this._setChildrenParent.bind(this)).filter(this._childrenFilterPredicate.bind(this)).map(this._getElementForChild)),this._children=t,this}append(...t){return this.element.append(...t.map(this._setChildrenParent.bind(this)).filter(this._childrenFilterPredicate.bind(this)).map(this._getElementForChild)),this._children.push(...t),this}prepend(...t){return this.element.prepend(...t.filter(this._childrenFilterPredicate.bind(this)).map(this._getElementForChild)),this._children.unshift(...t),this}consume(t,e){return t.changed((t=>e(this,t))),e(this,t),this}show(){return u(this,void 0,void 0,(function*(){if(!this.parent.children.includes(this.element)){const t=this.parent._children.indexOf(this);if(0==t)this.parent.element.prepend(this.element);else if(t==this.parent._children.length-1)this.parent.element.append(this.element);else{let e=0;for(let s=t-1;s>=0;s--){const t=this.parent._children[s];t instanceof m&&t._meta.isHidden&&e++}const s=this.parent.element.childNodes[t-e];this.parent.element.insertBefore(this.element,s)}}return this._meta.isHidden=!1,!0}))}hide(){return u(this,void 0,void 0,(function*(){this.parent.children.includes(this.element)&&(console.log(this.remove),yield this.remove(),this._meta.isHidden=!0)}))}doIf(t,e,s,n=!1){if(n){let t=e;e=s,s=t}const i=t=>{t?e(t):s(t)};return t.changed(i),i(t),this}doIfNot(t,e,s){return this.doIf(t,e,s,!0)}hideIf(t,e=!1){const s=t=>{const s=e?!t:!!t;this._meta.isHidden=s,this.parent&&(s?this.hide():this.show())};return t.changed(s),s(t),this}hideIfNot(t){return this.hideIf(t,!0)}classIf(t,e,s=!1){return this.doIf(t,(()=>this.addClass(...a(e,this))),(()=>this.rmClass(...a(e,this))),s)}classIfNot(t,e){return this.classIf(t,e,!0)}textIf(t,e,s="",n=!1){return this.doIf(t,(()=>this.text(a(e,this))),(()=>this.text(a(s,this))),n)}textIfNot(t,e,s=""){return this.textIf(t,e,s,!0)}attrIf(t,e,s="",n=!1){return this.doIf(t,(()=>this.addAttr(e,a(s,this))),(()=>this.rmAttr(e)),n)}attrIfNot(t,e,s=""){return this.attrIf(t,e,s,!0)}disableIf(t,e=!1){return this.attrIf(t,"disabled","",e)}disableIfNot(t){return this.disableIf(t,!0)}styleIf(t,e,s="",n=!1){return this.doIf(t,(()=>this.addStyle(e,a(s,this))),(()=>this.rmStyle(e)),n)}styleIfNot(t,e,s=""){return this.styleIf(t,e,s,!0)}stylesIf(t,e,s=!1){return this.doIf(t,(()=>this.setStyle(a(e,this))),(()=>this.rmStyle(...Object.keys(e))),s)}stylesIfNot(t,e){return this.stylesIf(t,e,!0)}listen(t,e,s){return t.on(e,((t,e)=>s(this,t,e))),this}text(t,e){return null==t?this.element.textContent:e&&t?this.setChildren([c(t,e)]):(this.element.textContent=t,this)}config(t){if(t.attr&&this.setAttrs(t.attr),t.classList&&this.addClass(...t.classList),t.className&&this.className(t.className),t.style&&this.setStyle(t.style),t.text&&this.text(t.text),t.value&&this.setValue(t.value),t.children&&this.append(...t.children),t.on)for(const e in t.on)this.on(e,t.on[e]);return this}addClass(...t){return this.element.classList.add(...t),this}className(t){return this.element.className=t,this}rmClass(...t){for(let e of t)this.element.classList.remove(e);return this}hasClass(...t){for(let e of t)if(!this.element.classList.contains(e))return!1;return!0}replaceClass(t,e){return this.element.classList.replace(t,e),this}toggleClass(t){return this.hasClass(t)?this.rmClass(t):this.addClass(t),this}addStyle(t,e){return this.element.style[t]=e,this}setStyle(t){for(let e in t)this.addStyle(e,t[e]);return this}rmStyle(...t){for(let e of t)this.element.style.removeProperty(e);return this}hasStyle(...t){for(let e of t)if(!this.element.style.getPropertyValue(n(e)))return!1;return!0}setAttrs(t){for(let e in t)this.addAttr(e,t[e]);return this}addAttr(t,e){return this.element.attributes[t]=e,this.element.setAttribute(t,e),this}rmAttr(...t){for(let e of t)this.element.removeAttribute(e),delete this.element.attributes[e];return this}hasAttr(...t){for(let e of t)if(!(e in this.element.attributes))return!1;return!0}getAttr(t){return this.element.attributes[t]}when(t,e){return{changed:s=>{this.on(t,(()=>{s(e(this))}))}}}on(t,e){return e&&this.element.addEventListener(t,(t=>e(this,t))),this}once(t,e){if(e){const s=n=>{e(this,n),this.element.removeEventListener(t,s)};this.element.addEventListener(t,s)}return this}clicked(t){return this.on("click",t)}keyPressed(t,e){return e?this.on("keypress",((s,n)=>{n.code!=e&&n.key!=e||t(this,n)})):this.on("keypress",t)}changed(t){return this.on("change",t)}submited(t){return this.on("submit",t)}remove(){return u(this,void 0,void 0,(function*(){return yield this.element.remove(),this}))}clear(){return this.element.value="",this.element.dispatchEvent(new InputEvent("input")),this}disable(){return this.setDisabled(!0),this.addAttr("disabled","disabled"),this}enable(){return this.setDisabled(!1),this}setDisabled(t){t?this.addAttr("disabled","disabled"):this.rmAttr("disabled")}q(t){const e=this.element.querySelector(t);if(e)return new m(e)}find(t){for(const e of this._children)if(t(e))return e}findTag(t){for(const e of this._children)if(e instanceof m&&t(e))return e}_setChildrenParent(t){return t instanceof m&&(t.parent=this),t}_childrenFilterPredicate(t){return!(t instanceof m&&t._meta.isHidden)}_getElementForChild(t){return"string"==typeof t?document.createTextNode(t):t instanceof m?t.element:t instanceof Node?t:null}_getElementChildren(t){this._mutationObserver||(this._mutationObserver=new MutationObserver(((e,s)=>{this._setCachedChildren(t)})),this._mutationObserver.observe(this.element,{childList:!0}),this._setCachedChildren(t))}_setCachedChildren(t){let e=t.childNodes,s=[],n=e.length;for(;n--;)1==e[n].nodeType&&s.unshift(e[n]);this._cachedChildren=s}}function _(t,e=[],s=!1){return new m(t,e,s)}function p(t,e,s,n){var i,r;let o=!1;if(n){const e=t.element.remove;t.element.remove=()=>u(this,void 0,void 0,(function*(){console.log("element.remove");const s=n(t);(!s||s instanceof Promise&&(yield s))&&e.call(t.element),console.log("element.remove end")}))}if(e){const e=t.show;t.show=()=>u(this,void 0,void 0,(function*(){console.log("element.show");const s=e.call(t);return s instanceof Promise?yield s:s}))}const h=new MutationObserver(((n,i)=>u(this,void 0,void 0,(function*(){let r=!1,h=!1;for(let i of n)e&&Array.from(i.addedNodes).includes(t.element)&&(r=!0),s&&Array.from(i.removedNodes).includes(t.element)&&(h=!0);if(r&&e){const s=e(t,i);s instanceof Promise&&(yield s),o||(i.disconnect(),i.observe(t.element.parentElement,{childList:!0}),o=!0)}h&&s&&s(t,i)}))));return h.observe(null!==(r=null===(i=t.parent)||void 0===i?void 0:i.element)&&void 0!==r?r:document.body,{childList:!0,subtree:!0}),h}const g=(t,e)=>(p(t,e.start,e.removed,e.beforeRemove),t);function y(t){return d.attachedTag&&d.attachedTagStack.push(d.attachedTag),d.attachedTag=t,t}function v(){d.attachedTagStack.length>0?d.attachedTag=d.attachedTagStack.pop():d.attachedTag=null}function b(){d.attachedTag=null,d.attachedTagStack=[]}function w(t={root:"body"}){const e=new m(`(${t.root})`);return y(e),e}const C={ul:(t,e=!1)=>_("ul",t.map((t=>_("li",[t],e)))),style:(t,e=!1)=>_("style",[d.css.generateCss(t)],e)},R=new Proxy({},{get:(t,e,s)=>{const n=e.toString(),i=(...t)=>C[n]?C[n](t,!1):_(n,t);return Object.defineProperty(i,"attach",{get:()=>(...t)=>C[n]?C[n](t,!0):_(n,t,!0)}),i}});function I(t,e){let s={},n=[];e&&n.push(e);const i=(t,e)=>{s[t]||(s[t]=[]),s[t].includes(e)||s[t].push(e)},o=(t,e)=>{if(s[e])for(const n of s[e])n(t[e]);for(const e of n)e(t)};for(let e of Object.getOwnPropertyNames(t))(r(t[e])||t[e]instanceof Array)&&(t[e]=I(t[e],(()=>o(t,e))));const h=new Proxy(t,{deleteProperty:function(t,e){return o(t,e),delete t[e],!0},get:(t,e)=>((t,e)=>{const s=t[e];try{r(t[e])?s.changed=t=>i(e,t):s.__proto__&&(s.__proto__.changed=t=>i(e,t))}catch(t){}return s})(t,e),set:(t,e,s)=>"changed"==e?(t[e]=s,!0):(t[e]=s,o(t,e),!0)});return h.changed=t=>{n.push(t)},h}const{div:S,a:P}=R;class x{get currentRoute(){return this._currentRoute}constructor(t){var e;this._routes={},this._options=t,this._rootParent=t.rootParent,this._window=null!==(e=t.window)&&void 0!==e?e:window,this._location=this._window.location,this._history=this._window.history,this._modifyPushState(),this._listenEvents(),this.navigate(this._options.initialRoute)}navigate(t){console.debug(`[Router] -> Navigate to ${t}`),t!=this._currentRoute&&this._history.pushState("data","",t)}_setRoute(){return t=this,e=void 0,n=function*(){console.debug(`[Router] -> _setRoute ${this._currentRoute}`),this._currentRouteTag&&(yield this._currentRouteTag.hide());const t=this._getRoute();this._rootParent.append(t),this._currentRouteTag=t},new((s=void 0)||(s=Promise))((function(i,r){function o(t){try{a(n.next(t))}catch(t){r(t)}}function h(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,h)}a((n=n.apply(t,e||[])).next())}));var t,e,s,n}_getRoute(){console.debug(`[Router] -> _getRoute ${this._currentRoute}`);let t=this._currentRoute,e=1e4;for(;"string"==typeof this._options.routes[t]&&e--;){let e=this._options.routes[t];if("string"!=typeof e)break;console.debug(`[Router] -> _getRoute ${t} is alias for ${e}`),t=e}if(t in this._options.routes||(console.debug(`[Router] -> _getRoute ${t} not found, fallback to ${this._options.fallbackRoute}`),t=this._options.fallbackRoute),!(t in this._options.routes))return console.debug(`[Router] -> _getRoute ${t} not found in the router, fallback to "noRoot" or default error`),this._options.noRoot?this._options.noRoot(this):S("No route found for: "+t);if(this._routes[t])return console.debug(`[Router] -> _getRoute ${t} is cached, using that`),this._routes[t].show(),this._routes[t];let s=this._options.routes[t];if("function"!=typeof s)throw new Error("Can find route builder for "+this._currentRoute);return console.debug(`[Router] -> _getRoute ${t} is not cached, creating new one`),this._routes[t]=s(this)}_setCurrentRoute(){this.currentRoute!=this._location.pathname&&(this._currentRoute=this._location.pathname,this._setRoute())}_listenEvents(){this._window.addEventListener("popstate",this._setCurrentRoute.bind(this)),this._window.addEventListener("pushstate",this._setCurrentRoute.bind(this))}_modifyPushState(){const t=this._history.pushState;this._history.pushState=(...e)=>{t.call(this._history,...e),this._window.dispatchEvent(new Event("pushstate"))}}}let k;function N(t){return k=new x(t),k}function T(t,e){return P(t).addAttr("href","javascript:;").setStyle({margin:"0 8px 0 0"}).clicked((()=>{if(!k)throw new Error("Link can\t navigate, there is no router available");k.navigate(e)}))}const E={};var L=e.wc,A=e.Kh,O=e.rU,$=e.F0,F=e.iF,j=e.ub,B=e.om,H=e.nU,q=e.Dk,D=e.HO,U=e.ZP,V=e.og,Z=e.lW,J=e.xZ,K=e.S1,z=e.Kn,M=e.EP,Q=e.SB,W=e.xj,G=e.Nd,X=e.C6,Y=e._q,tt=e.fL,et=e.Qs,st=e.Uq;export{L as CTag,A as CssGenerator,O as Link,$ as Router,F as allTags,j as attach,B as attached,H as callOrReturn,q as camelToDash,D as dashToCamel,U as default,V as detach,Z as detachAll,J as fromJson,K as init,z as isObject,M as makeRouter,Q as onLifecycle,W as removeFromList,G as router,X as state,Y as tag,tt as text,et as toJson,st as withLifecycle};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJQUFJTSxFQUFlelEsS0FBSytPLFNBQVNzQixPQUFPRixHQUN4QyxHQUE0QixtQkFBakJNLEVBQ1QsTUFBTSxJQUFJak4sTUFBTSw4QkFBZ0N4RCxLQUFLNk8sZUFLdkQsT0FIQTdKLFFBQVE2SyxNQUNOLHlCQUF5Qk0scUNBRW5CblEsS0FBSzhPLFFBQVFxQixHQUFrQk0sRUFBYXpRLEtBQ3RELENBRVEsZ0JBQUEwUSxHQUNGMVEsS0FBSzRPLGNBQWdCNU8sS0FBS29QLFVBQVV1QixXQUV4QzNRLEtBQUs2TyxjQUFnQjdPLEtBQUtvUCxVQUFVdUIsU0FDcEMzUSxLQUFLK1AsWUFDUCxDQUVRLGFBQUFOLEdBQ056UCxLQUFLa1AsUUFBUXpGLGlCQUFpQixXQUFZekosS0FBSzBRLGlCQUFpQjNNLEtBQUsvRCxPQUNyRUEsS0FBS2tQLFFBQVF6RixpQkFDWCxZQUNBekosS0FBSzBRLGlCQUFpQjNNLEtBQUsvRCxNQUUvQixDQUVRLGdCQUFBd1AsR0FDTixNQUFNTSxFQUFZOVAsS0FBS3NQLFNBQVNRLFVBQ2hDOVAsS0FBS3NQLFNBQVNRLFVBQVksSUFBSXJRLEtBQzVCcVEsRUFBVTdSLEtBQUsrQixLQUFLc1AsWUFBYTdQLEdBQ2pDTyxLQUFLa1AsUUFBUWpGLGNBQWMsSUFBSTJHLE1BQU0sYUFBYSxDQUV0RCxFQUdLLElBQUlDLEVBRUosU0FBU0MsRUFDZEMsR0FHQSxPQURBRixFQUFTLElBQUlsQyxFQUFVb0MsR0FDaEJGLENBQ1QsQ0FFTyxTQUFTRyxFQUFLck0sRUFBc0JpTCxHQUN6QyxPQUFPbEIsRUFBRS9KLEdBQ044QixRQUFRLE9BQVEsZ0JBQ2hCVyxTQUFTLENBQUU2SixPQUFRLGNBQ25CckgsU0FBUSxLQUNQLElBQUtpSCxFQUNILE1BQU0sSUFBSXJOLE1BQU0scURBR2xCcU4sRUFBT25CLFNBQVNFLEVBQUssR0FFM0IsQ0M3SkEsU0FBaUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcmRib2FyZC1qcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jYXJkYm9hcmQtanMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy91dGlsLnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy9jc3MtZ2VuZXJhdG9yLnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy90ZXh0LnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy90YWcudHMiLCJ3ZWJwYWNrOi8vY2FyZGJvYXJkLWpzLy4vc3JjL3N0YXRlLnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy9yb3V0aW5nLnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy9jYXJkYm9hcmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvKiogUmVtb3ZlcyBhbiBpdGVtIGZyb20gYW4gYXJyYXkgaWYgaXQgZXhpc3RzLiBJdCByZXR1cm5zIHRoZSBzYW1lIGFycmF5IHdpdGhvdXQgdGhlIGl0ZW0gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGcm9tTGlzdDxUPihpdGVtOiBULCBsaXN0OiBUW10pIHtcbiAgY29uc3QgaW5kZXggPSBsaXN0LmluZGV4T2YoaXRlbSk7XG5cbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIGxpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIHJldHVybiBsaXN0O1xufVxuXG5leHBvcnQgY29uc3QgY2FtZWxUb0Rhc2ggPSAoc3RyKSA9PlxuICBzdHIucmVwbGFjZSgvKFtBLVpdKS9nLCAodmFsKSA9PiBgLSR7dmFsLnRvTG93ZXJDYXNlKCl9YCk7XG5leHBvcnQgY29uc3QgZGFzaFRvQ2FtZWwgPSAoc3RyKSA9PlxuICBzdHIucmVwbGFjZSgvKFxcLVthLXpdKS9nLCAodmFsKSA9PiB2YWwudG9VcHBlckNhc2UoKS5yZXBsYWNlKCctJywgJycpKTtcbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChvYmo6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgIShvYmogaW5zdGFuY2VvZiBBcnJheSk7XG59XG5leHBvcnQgY29uc3QgdG9Kc29uID0gKHBvc3NpYmx5SnNvblN0cmluZykgPT4gSlNPTi5wYXJzZShwb3NzaWJseUpzb25TdHJpbmcpO1xuZXhwb3J0IGNvbnN0IGZyb21Kc29uID0gKHBvc3NpYmx5SnNvbikgPT4gSlNPTi5zdHJpbmdpZnkocG9zc2libHlKc29uKTtcbmV4cG9ydCBjb25zdCBjYWxsT3JSZXR1cm4gPSA8VD4odmFsOiBUIHwgKCguLi5hcmdzOiBhbnkpID0+IFQpLCAuLi5hcmdzKTogVCA9PiB7XG4gIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuICh2YWwgYXMgYW55KSguLi5hcmdzKTtcbiAgfVxuICByZXR1cm4gdmFsO1xufTtcbiIsImltcG9ydCB0eXBlIHsgTmVzdGVkU3R5bGVNYXAgfSBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCB7IGNhbWVsVG9EYXNoLCBpc09iamVjdCB9IGZyb20gJy4vdXRpbC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDc3NHZW5lcmF0b3Ige1xuICBnZW5lcmF0ZUNzcyhzdHlsZVNoZWV0OiB7IFtrZXk6IHN0cmluZ106IE5lc3RlZFN0eWxlTWFwIH0gfCB7IFtrZXk6IHN0cmluZ106IE5lc3RlZFN0eWxlTWFwIH1bXSkge1xuICAgIGxldCBzdHlsZXNoZWV0cyA9IHN0eWxlU2hlZXQgaW5zdGFuY2VvZiBBcnJheSA/IHN0eWxlU2hlZXQgOiBbc3R5bGVTaGVldF07XG4gICAgbGV0IGdlbmVyYXRlZENzcyA9ICcnO1xuXG4gICAgZm9yIChjb25zdCBzaGVldCBvZiBzdHlsZXNoZWV0cykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2hlZXQpIHtcbiAgICAgICAgZ2VuZXJhdGVkQ3NzICs9IHRoaXMuZ2VuZXJhdGVCbG9jayhrZXksIHNoZWV0W2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZ2VuZXJhdGVkQ3NzO1xuICB9XG5cbiAgZ2VuZXJhdGVCbG9jayhzZWxlY3Rvcjogc3RyaW5nLCBzdHlsZTogTmVzdGVkU3R5bGVNYXApIHtcbiAgICBsZXQgYmxvY2tzID0gdGhpcy5nZW5lcmF0ZUJsb2NrQ29udGVudChzZWxlY3Rvciwgc3R5bGUpO1xuICAgIHJldHVybiBibG9ja3Muam9pbignJyk7XG4gIH1cblxuICBnZW5lcmF0ZUJsb2NrQ29udGVudChzZWxlY3Rvcjogc3RyaW5nLCBzdHlsZTogTmVzdGVkU3R5bGVNYXApOiBzdHJpbmdbXSB7XG4gICAgbGV0IGluc2lkZSA9ICcnO1xuICAgIGxldCBibG9ja3MgPSBbXTtcblxuICAgIGZvciAoY29uc3Qga2V5IGluIHN0eWxlKSB7XG4gICAgICBpZiAoaXNPYmplY3Qoc3R5bGVba2V5XSkpIHtcbiAgICAgICAgYmxvY2tzLnB1c2godGhpcy5nZW5lcmF0ZUJsb2NrQ29udGVudChzZWxlY3RvciArIGtleSwgc3R5bGVba2V5XSkpO1xuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHN0eWxlW2tleV0pIHtcbiAgICAgICAgaW5zaWRlICs9IHRoaXMuZ2VuZXJhdGVTdHlsZShrZXksIHN0eWxlW2tleV0gYXMgc3RyaW5nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBibG9ja3MudW5zaGlmdChgJHtzZWxlY3Rvcn17JHtpbnNpZGV9fWApO1xuXG4gICAgcmV0dXJuIGJsb2NrcztcbiAgfVxuXG4gIGdlbmVyYXRlU3R5bGUobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGAke2NhbWVsVG9EYXNoKG5hbWUpfToke3ZhbHVlfTtgO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IFN0YXRlIH0gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4vdXRpbC5qcyc7XG5cbi8qKlxuICogQ3JlYXRlIGEgKipUZXh0Tm9kZSoqIGZyb20gdGV4dCwgYW5kIG9wdGlvbmFsbHkgcmVhY3RzIHRvIGEge0BsaW5rIFN0YXRlfSwgaW50ZXJwb2xhdGluZyB0aGUgZGVmaW5lZCB2YXJpYWJsZXMgaW4gdGhlIHRleHQgZWFjaCB0aW1lIHRoZSBzdGF0ZSBjaGFuZ2VzLlxuICpcbiAqIElmIHlvdSBwcm92aWRlIGEge0BsaW5rIFN0YXRlfSBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LCB0aGUgdGV4dCB3aWxsIGFjdCBhcyBhIHRlbXBsYXRlXG4gKiBhbmQgY2FuIHJlZmVyZW5jZSBwcm9wZXJ0aWVzIGluIHRoZSBzdGF0ZTogYCRjb3VudGAsIGAkc29tZVZhbHVlYC5cbiAqXG4gKiBXaGVuIHRoZSBzdGF0ZSBwcm9wZXJ0aWVzIGNoYW5nZXMsIHRoZSB0ZXh0IG5vZGUgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHVwZGF0ZWQgd2l0aCB0aGUgbmV3IHRleHQuXG4gKiBPbmx5IHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIHJlZmVyZW5jZWQgaW4gdGhlIHRlbXBsYXRlIHdpbGwgYmUgbGlzdGVuZWQgdG8uXG4gKlxuICogKipOT1RFKiogSWYgeW91J3JlIG5vdCBpbnRlcnBvbGF0aW5nLCBhbmQgZG9udCBuZWVkIHRvIGNoYW5nZSB0aGUgdGV4dCwgeW91IGNhbiBkaXJlY3RseSBwYXNzIGluIGEgc3RyaW5nICgnc3RyaW5nJykgaW5zdGVhZCBvZiAoYHRleHQoJ3N0cmluZycpYCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBzdCA9IHN0YXRlKHsgY291bnQ6IDAgfSk7XG4gKlxuICogcCh0ZXh0KCdSYXcgdGV4dCEnKSk7XG4gKiBwKHRleHQoYENvdW50OiAkY291bnRgLCBzdCkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZXh0PFQ+KHRleHRUZW1wbGF0ZTogc3RyaW5nLCB2YWx1ZXM/OiBTdGF0ZTxUPik6IE5vZGUge1xuICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBjb25zdCBpbnRlcnBvbGF0ZVBhdHRlcm4gPSAvXFxCXFwkKFswLTldK3xbYS16XVthLXowLTlfJF0qKS9naTtcblxuICBjb25zdCB1cGRhdGVOb2RlID0gKCkgPT4ge1xuICAgIGlmICghdmFsdWVzKSB7XG4gICAgICBub2RlLm5vZGVWYWx1ZSA9IHRleHRUZW1wbGF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5ub2RlVmFsdWUgPSB0ZXh0VGVtcGxhdGUucmVwbGFjZShpbnRlcnBvbGF0ZVBhdHRlcm4sIChtYXRjaCwgZzEpID0+IHtcbiAgICAgICAgcmV0dXJuIHZhbHVlc1tnMV0gIT0gbnVsbCA/IHZhbHVlc1tnMV0udG9TdHJpbmcoKSA6IG1hdGNoO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGlmICh2YWx1ZXMgJiYgaXNPYmplY3QodmFsdWVzKSkge1xuICAgIGZvciAobGV0IGtleSBpbiB2YWx1ZXMpIHtcbiAgICAgIC8vIFdlJ3JlIGp1c3QgaW50ZXJlc3RlZCBpbiBsaXN0ZW5pbmcgdG8gdGhlIHZhbHVlcyB0aGF0IGFyZSByZWZlcmVuY2VzIGluIHRoZSB0ZXh0LlxuICAgICAgaWYgKHRleHRUZW1wbGF0ZS5pbmNsdWRlcyhgJCR7a2V5fWApKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB2YWx1ZXNba2V5XTtcbiAgICAgICAgaXRlbS5jaGFuZ2VkKCgpID0+IHtcbiAgICAgICAgICB1cGRhdGVOb2RlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU5vZGUoKTtcbiAgcmV0dXJuIG5vZGU7XG59XG4iLCJpbXBvcnQgeyBDc3NHZW5lcmF0b3IgfSBmcm9tICcuL2Nzcy1nZW5lcmF0b3IuanMnO1xuaW1wb3J0IHsgQ3NzUHJvcGVydHkgfSBmcm9tICcuL2Nzcy1wcm9wZXJ0aWVzLmpzJztcbmltcG9ydCB7IFBpY2tQcm9wZXJ0eVZhbHVlcyB9IGZyb20gJy4vY3NzLXByb3BlcnR5LXZhbHVlcy5qcyc7XG5pbXBvcnQgeyBUYWdOYW1lIH0gZnJvbSAnLi90YWctbmFtZXMuanMnO1xuaW1wb3J0IHsgY2FsbE9yUmV0dXJuLCBjYW1lbFRvRGFzaCB9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgeyB0ZXh0IH0gZnJvbSAnLi90ZXh0LmpzJztcbmltcG9ydCB0eXBlIHtcbiAgQWxsVGFncyxcbiAgQ29uc3VtYWJsZSxcbiAgU3RhdGUsXG4gIFN0eWxlTWFwLFxuICBTdHlsZVNldCxcbiAgVGFnQnVpbGRlcixcbiAgVGFnQ2hpbGQsXG4gIFRhZ0NoaWxkcmVuLFxuICBUYWdDb25maWcsXG59IGZyb20gJy4vdHlwZXMuanMnO1xuXG5sZXQgY29udGV4dDoge1xuICBhdHRhY2hlZFRhZzogQ1RhZztcbiAgYXR0YWNoZWRUYWdTdGFjazogQ1RhZ1tdO1xuICBjc3M6IENzc0dlbmVyYXRvcjtcbn0gPSB7XG4gIGF0dGFjaGVkVGFnOiBudWxsLFxuICBhdHRhY2hlZFRhZ1N0YWNrOiBbXSxcbiAgY3NzOiBuZXcgQ3NzR2VuZXJhdG9yKCksXG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhdHRhY2hlZCB7QGxpbmsgQ1RhZ30uIFNlZSB7QGxpbmsgYXR0YWNofSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaGVkKCkge1xuICByZXR1cm4gY29udGV4dC5hdHRhY2hlZFRhZztcbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBtYWluIGNsYXNzIGluIENhcmRib2FyZC4gRXZlbiB0aG91Z2ggQ2FyZGJvYXJkIGlzIGRlc2lnbmVkIHRvIG5vdCBuZWVkIHRvIHVzZSB0aGlzIGNsYXNzIGRpcmVjdGx5LCB5b3UgY2FuIGlmIHlvdSB3YW50LlxuICpcbiAqIENUYWcgY29udGFpbnMgYSByZWZlcmVuY2UgdG8gYW4gSFRNTEVsZW1lbnQsIGl0cyBwYXJlbnQsIGFuZCBwcm92aWRlcyBhIHNldCBvZiBtZXRob2RzIHRvIGludGVyYWN0IHdpdGggaXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBDVGFnIHtcbiAgLyoqIFJlZmVyZW5jZSB0byB0aGUgSFRNTEVsZW1lbnQgdGhhdCB0aGlzIEB0eXBlIHtDVGFnfSByZXByZXNlbnRzICovXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gIC8qKiBAcGFyYW0gcGFyZW50IFJlZmVyZW5jZSB0byB0aGUgcGFyZW50IEB0eXBlIHtDVGFnfSBvZiB0aGlzIGVsZW1lbnQgKi9cbiAgcHJpdmF0ZSBfcGFyZW50OiBDVGFnID0gbnVsbDtcbiAgZ2V0IHBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xuICB9XG4gIHNldCBwYXJlbnQobmV3UGFyZW50OiBDVGFnKSB7XG4gICAgdGhpcy5fcGFyZW50ID0gbmV3UGFyZW50O1xuICB9XG5cbiAgLyoqIEhvbGRzIHRoZSBsaXN0IG9mIGFsbCBjaGlsZHJlbiwgdGhlIG9uZXMgdGhhdCBhcmUgY3VycmVudGx5IGluIHRoZSBET00gYW5kIHRob3NlIHRoYXQgYXJlIG5vdCAqL1xuICBwcml2YXRlIF9jaGlsZHJlbjogVGFnQ2hpbGRbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2NhY2hlZENoaWxkcmVuOiBOb2RlW10gPSBbXTtcbiAgZ2V0IGNoaWxkcmVuKCkge1xuICAgIHRoaXMuX2dldEVsZW1lbnRDaGlsZHJlbih0aGlzLmVsZW1lbnQpO1xuICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGlsZHJlbjtcbiAgfVxuXG4gIC8qKiBJZiBzZXQgdG8gdHJ1ZSwgaXQgYmUgYXBwZW5kZWQgdG8gdGhlIGF0dGFjaGVkIHRhZyAqL1xuICBwcml2YXRlIF9hdHRhY2hhYmxlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX21ldGEgPSB7XG4gICAgaXNIaWRkZW46IGZhbHNlLFxuICAgIG5leHRTaWJsaW5nSUQ6IG51bGwsXG4gIH07XG5cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiAodGhpcy5lbGVtZW50IGFzIGFueSkudmFsdWU7XG4gIH1cblxuICBnZXQgc3R5bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zdHlsZTtcbiAgfVxuXG4gIHNldFZhbHVlKG5ld1ZhbHVlOiBzdHJpbmcpIHtcbiAgICAodGhpcy5lbGVtZW50IGFzIGFueSkudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBHZXRzIHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgY2xlYXJzIHRoZSB2YWx1ZSAqL1xuICBnZXQgY29uc3VtZVZhbHVlKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgZ2V0IGlkKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaWQ7XG4gIH1cblxuICBzZXRJZChpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5lbGVtZW50LmlkID0gaWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcmcwOiBUYWdOYW1lIHwgSFRNTEVsZW1lbnQsXG4gICAgY2hpbGRyZW46IFRhZ0NoaWxkcmVuID0gW10sXG4gICAgYXR0YWNoYWJsZTogYm9vbGVhbiA9IGZhbHNlLFxuICApIHtcbiAgICB0aGlzLl9hdHRhY2hhYmxlID0gYXR0YWNoYWJsZTtcbiAgICBjb25zdCBpc1NlbGVjdG9yID0gdHlwZW9mIGFyZzAgPT0gJ3N0cmluZycgJiYgYXJnMC5tYXRjaCgvXFwoLitcXCkvKTtcblxuICAgIGlmIChpc1NlbGVjdG9yKSB7XG4gICAgICB0aGlzLl9hdHRhY2hhYmxlID0gZmFsc2U7XG4gICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFyZzAubWF0Y2goL1xcKCguKylcXCkvKVsxXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnMCA9PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhcmcwKTtcbiAgICB9IGVsc2UgaWYgKGFyZzAgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgdGhpcy5fYXR0YWNoYWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5lbGVtZW50ID0gYXJnMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IDAnKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGV4dC5hdHRhY2hlZFRhZyAmJiB0aGlzLl9hdHRhY2hhYmxlKSB7XG4gICAgICBjb250ZXh0LmF0dGFjaGVkVGFnLmFwcGVuZCh0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkgdGhpcy5zZXRDaGlsZHJlbihjaGlsZHJlbik7XG4gIH1cblxuICAvKiogU2V0cyB0aGUgY2hpbGRyZW4sIHJlbW92ZXMgcHJldmlvdXMgY2hpbGRyZW4gICovXG4gIHNldENoaWxkcmVuKGNoaWxkcmVuOiBUYWdDaGlsZHJlbikge1xuICAgIHRoaXMuZWxlbWVudC5yZXBsYWNlQ2hpbGRyZW4oXG4gICAgICAuLi5jaGlsZHJlblxuICAgICAgICAubWFwKHRoaXMuX3NldENoaWxkcmVuUGFyZW50LmJpbmQodGhpcykpXG4gICAgICAgIC5maWx0ZXIodGhpcy5fY2hpbGRyZW5GaWx0ZXJQcmVkaWNhdGUuYmluZCh0aGlzKSlcbiAgICAgICAgLm1hcCh0aGlzLl9nZXRFbGVtZW50Rm9yQ2hpbGQpLCAvL1xuICAgICk7XG4gICAgdGhpcy5fY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFwcGVuZCguLi5jaGlsZHJlbjogVGFnQ2hpbGRyZW4pIHtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kKFxuICAgICAgLi4uY2hpbGRyZW5cbiAgICAgICAgLm1hcCh0aGlzLl9zZXRDaGlsZHJlblBhcmVudC5iaW5kKHRoaXMpKVxuICAgICAgICAuZmlsdGVyKHRoaXMuX2NoaWxkcmVuRmlsdGVyUHJlZGljYXRlLmJpbmQodGhpcykpXG4gICAgICAgIC5tYXAodGhpcy5fZ2V0RWxlbWVudEZvckNoaWxkKSwgLy9cbiAgICApO1xuICAgIHRoaXMuX2NoaWxkcmVuLnB1c2goLi4uY2hpbGRyZW4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHJlcGVuZCguLi5jaGlsZHJlbjogVGFnQ2hpbGRyZW4pIHtcbiAgICB0aGlzLmVsZW1lbnQucHJlcGVuZChcbiAgICAgIC4uLmNoaWxkcmVuXG4gICAgICAgIC5maWx0ZXIodGhpcy5fY2hpbGRyZW5GaWx0ZXJQcmVkaWNhdGUuYmluZCh0aGlzKSlcbiAgICAgICAgLm1hcCh0aGlzLl9nZXRFbGVtZW50Rm9yQ2hpbGQpLCAvL1xuICAgICk7XG4gICAgdGhpcy5fY2hpbGRyZW4udW5zaGlmdCguLi5jaGlsZHJlbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogV2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcywgaXQgd2lsbCBjYWxsIHRoZSBjb25zdW1lciAqL1xuICBjb25zdW1lPFQ+KFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8VD4sXG4gICAgY29uc3VtZXI6IChzZWxmOiBDVGFnLCBuZXdWYWx1ZTogVCkgPT4gdm9pZCxcbiAgKSB7XG4gICAgY29uc3VtYWJsZS5jaGFuZ2VkKChuZXdWYWx1ZSkgPT4gY29uc3VtZXIodGhpcywgbmV3VmFsdWUpKTtcbiAgICBjb25zdW1lcih0aGlzLCBjb25zdW1hYmxlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGUgZWxlbWVudCBpcyBjdXJyZW50bHkgaGlkZGVuIGl0IHdpbGwgYWRkIHRoaXMgZWxlbWVudCB0byB0aGUgcGFnZSB3aGVyZXZlciBpdCdzIHN1cHBvc2VkIHRvIGJlLlxuICAgKiBJIHdpbGwgYmUgcGxhY2VkIGV4YWN0bHkgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24sIGV2ZW4gaWYgdGhlcmUgYXJlIG90aGVyIGVsZW1lbnRzIGhpZGRlbi5cbiAgICovXG4gIGFzeW5jIHNob3coKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmNsdWRlcyh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICAvLyBHZXQncyB0aGUgcG9zaXRpb24gb2YgdGhlIGVsZW1lbnQgaWYgYWxsIHRoZSBjaGlsZHJlbiBhcmUgdmlzaWJsZVxuICAgICAgY29uc3QgZXhwZWN0ZWRJbmRleCA9IHRoaXMucGFyZW50Ll9jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuXG4gICAgICAvLyBJZiB0aGUgZWxlbWVudCBzaG91bGQgYmUgdGhlIGZpcnN0IGNoaWxkIGluIHRoZSBwYXJlbnRcbiAgICAgIGlmIChleHBlY3RlZEluZGV4ID09IDApIHtcbiAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5wcmVwZW5kKHRoaXMuZWxlbWVudCk7XG4gICAgICB9XG4gICAgICAvLyBJZiB0aGUgZWxlbWVudCBzaG91bGQgYmUgdGhlIGxhc3QgY2hpbGQgaW4gdGhlIHBhcmVudFxuICAgICAgZWxzZSBpZiAoZXhwZWN0ZWRJbmRleCA9PSB0aGlzLnBhcmVudC5fY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIHRoZSBudGggY2hpbGQgaW4gdGhlIHBhcmVudFxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBob3cgbWFueSBoaWRkZW4gY2hpbGRyZW4gYXJlIGJlZm9yZSB0aGlzIGVsZW1lbnRcbiAgICAgICAgbGV0IGhpZGRlbkJlZm9yZSA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSBleHBlY3RlZEluZGV4IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMucGFyZW50Ll9jaGlsZHJlbltpXTtcbiAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBDVGFnKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX21ldGEuaXNIaWRkZW4pIHtcbiAgICAgICAgICAgICAgaGlkZGVuQmVmb3JlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IHRoZSBcInJlYWxcIiBjaGlsZHJlbiBpbiB0aGUgZG9tLlxuICAgICAgICAvLyBUaGUgaW5kZXggdGFrZXMgaW50byBhY2NvdW50IHRoZSBpdGVtcyB0aGF0IGFyZSBoaWRkZW5cbiAgICAgICAgY29uc3QgbmV4dEVsID1cbiAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmNoaWxkTm9kZXNbZXhwZWN0ZWRJbmRleCAtIGhpZGRlbkJlZm9yZV07XG5cbiAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCBuZXh0RWwpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9tZXRhLmlzSGlkZGVuID0gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogSGlkZSB0aGlzIGVsZW1lbnQgKHJlbW92ZWQgZnJvbSBET00pICovXG4gIGFzeW5jIGhpZGUoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50LmNoaWxkcmVuLmluY2x1ZGVzKHRoaXMuZWxlbWVudCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVtb3ZlKTtcbiAgICAgIGF3YWl0IHRoaXMucmVtb3ZlKCk7XG4gICAgICB0aGlzLl9tZXRhLmlzSGlkZGVuID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hlbiB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLCBpdCB3aWxsIGNhbGwge2lmVHJ1ZX0gd2hlbiB0aGUgY29uc3VtYWJsZSBpcyB0cnVlLiBPciB7aWZGYWxzZX0gd2hlbiB0aGUgY29uc3VtYWJsZSBpcyBmYWxzZS5cbiAgICogSWYge2ludmVydH0gaXMgc2V0IHRvIHRydWUsIHRoZSBjb25kaXRpb24gd2lsbCBiZSBpbnZlcnNlZCwgYnV0IHlvdSBjYW4gYWxzbyB1c2Uge0BsaW5rIGRvSWZOb3R9XG4gICAqL1xuICBkb0lmKFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBpZlRydWU6ICh2YWx1ZTogYW55KSA9PiB2b2lkLFxuICAgIGlmRmFsc2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkLFxuICAgIGludmVydCA9IGZhbHNlLFxuICApIHtcbiAgICBpZiAoaW52ZXJ0KSB7XG4gICAgICBsZXQgdGVtcCA9IGlmVHJ1ZTtcbiAgICAgIGlmVHJ1ZSA9IGlmRmFsc2U7XG4gICAgICBpZkZhbHNlID0gdGVtcDtcbiAgICB9XG5cbiAgICBjb25zdCBjYWxsYmFjayA9ICh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlKSBpZlRydWUodmFsdWUpO1xuICAgICAgZWxzZSBpZkZhbHNlKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgY29uc3VtYWJsZS5jaGFuZ2VkKGNhbGxiYWNrKTtcbiAgICBjYWxsYmFjayhjb25zdW1hYmxlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgb3Bvc2l0ZSBvZiB7dGhpcy5kb0lmfVxuICAgKiBXaGVuIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMsIGl0IHdpbGwgY2FsbCB7aWZUcnVlfSBpZiB0aGUgY29uc3VtYWJsZSBpcyBmYWxzZS4gT3Ige2lmRmFsc2V9IGlmIHRoZSBjb25zdW1hYmxlIGlzIHRydWUuXG4gICAqL1xuICBkb0lmTm90KFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBpZlRydWU6ICh2YWx1ZTogYW55KSA9PiB2b2lkLFxuICAgIGlmRmFsc2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5kb0lmKGNvbnN1bWFibGUsIGlmVHJ1ZSwgaWZGYWxzZSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogSGlkZSB0aGlzIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgdHJ1dGh5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIElmIHtpbnZlcnR9IGlzIHNldCB0byB0cnVlLCB0aGUgY29uZGl0aW9uIHdpbGwgYmUgaW52ZXJzZWQsIGJ1dCB5b3UgY2FuIGFsc28gdXNlIHtAbGluayBoaWRlSWZOb3R9XG4gICAqL1xuICBoaWRlSWYoY29uc3VtYWJsZTogQ29uc3VtYWJsZTxib29sZWFuIHwgbnVtYmVyPiwgaW52ZXJ0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBoYW5kbGVIaWRlID0gKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGNvcnJlY3RlZFZhbHVlID0gaW52ZXJ0ID8gIXZhbHVlIDogISF2YWx1ZTtcbiAgICAgIHRoaXMuX21ldGEuaXNIaWRkZW4gPSBjb3JyZWN0ZWRWYWx1ZTtcblxuICAgICAgaWYgKCF0aGlzLnBhcmVudCkgcmV0dXJuO1xuICAgICAgaWYgKCFjb3JyZWN0ZWRWYWx1ZSkgdGhpcy5zaG93KCk7XG4gICAgICBlbHNlIHRoaXMuaGlkZSgpO1xuICAgIH07XG5cbiAgICBjb25zdW1hYmxlLmNoYW5nZWQoaGFuZGxlSGlkZSk7XG4gICAgaGFuZGxlSGlkZShjb25zdW1hYmxlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBIaWRlIHRoaXMgZWxlbWVudCB3aGVuIHRoZSBjb25zdW1lciBpcyBmYWxzeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLiAqL1xuICBoaWRlSWZOb3QoY29uc3VtYWJsZTogQ29uc3VtYWJsZTxib29sZWFuIHwgbnVtYmVyPikge1xuICAgIHJldHVybiB0aGlzLmhpZGVJZihjb25zdW1hYmxlLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNsYXNzZXMgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgdHJ1dGh5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIFlvdSBjYW4gcGFzcyBpbiBhbiBhcnJheSBvZiBjbGFzc2VzLCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGxpc3Qgb2YgY2xhc3Nlcy5cbiAgICogSWYge2ludmVydH0gaXMgc2V0IHRvIHRydWUsIHRoZSBjb25kaXRpb24gd2lsbCBiZSBpbnZlcnNlZCwgYnV0IHlvdSBjYW4gYWxzbyB1c2Uge0BsaW5rIGNsYXNzSWZOb3R9XG4gICAqL1xuICBjbGFzc0lmKFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBjbGFzc2VzOiBzdHJpbmdbXSB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nW10pLFxuICAgIGludmVydCA9IGZhbHNlLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5kb0lmKFxuICAgICAgY29uc3VtYWJsZSxcbiAgICAgICgpID0+IHRoaXMuYWRkQ2xhc3MoLi4uY2FsbE9yUmV0dXJuKGNsYXNzZXMsIHRoaXMpKSxcbiAgICAgICgpID0+IHRoaXMucm1DbGFzcyguLi5jYWxsT3JSZXR1cm4oY2xhc3NlcywgdGhpcykpLFxuICAgICAgaW52ZXJ0LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjbGFzc2VzIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIGZhbHN5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIFlvdSBjYW4gcGFzcyBpbiBhbiBhcnJheSBvZiBjbGFzc2VzLCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGxpc3Qgb2YgY2xhc3Nlcy5cbiAgICogRm9yIHRoZSBvcG9zaXRlIHlvdSBjYW4gYWxzbyB1c2Uge0BsaW5rIGNsYXNzSWZ9XG4gICAqL1xuICBjbGFzc0lmTm90KFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBjbGFzc2VzOiBzdHJpbmdbXSB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nW10pLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5jbGFzc0lmKGNvbnN1bWFibGUsIGNsYXNzZXMsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMge3RleHR9IHdoZW4gdGhlIGNvbnN1bWVyIGlzIHRydWUsIGFuZCBzZXRzIHtlbHNlVGV4dCAoZGVmYXVsdD0nJyl9IHdoZW4gdGhlIGNvbnN1bWVyIGlzIGZhbHNlLlxuICAgKiBCb3RoIHt0ZXh0fSBhbmQge2Vsc2VUZXh0fSBjYW4gYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcuXG4gICAqIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy5cbiAgICogSWYge2ludmVydH0gaXMgc2V0IHRvIHRydWUsIHRoZSBjb25kaXRpb24gd2lsbCBiZSBpbnZlcnNlZCwgYnV0IHlvdSBjYW4gYWxzbyB1c2Uge0BsaW5rIHRleHRJZk5vdH1cbiAgICovXG4gIHRleHRJZihcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgdGV4dDogc3RyaW5nIHwgKChzZWxmOiBDVGFnKSA9PiBzdHJpbmcpLFxuICAgIGVsc2VUZXh0OiBzdHJpbmcgfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZykgPSAnJyxcbiAgICBpbnZlcnQgPSBmYWxzZSxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9JZihcbiAgICAgIGNvbnN1bWFibGUsXG4gICAgICAoKSA9PiB0aGlzLnRleHQoY2FsbE9yUmV0dXJuKHRleHQsIHRoaXMpKSxcbiAgICAgICgpID0+IHRoaXMudGV4dChjYWxsT3JSZXR1cm4oZWxzZVRleHQsIHRoaXMpKSxcbiAgICAgIGludmVydCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMge3RleHR9IHdoZW4gdGhlIGNvbnN1bWVyIGlzIGZhbHN5LCBhbmQgc2V0cyB7ZWxzZVRleHQgKGRlZmF1bHQ9JycpfSB3aGVuIHRoZSBjb25zdW1lciBpcyB0cnV0aHkuXG4gICAqIEJvdGgge3RleHR9IGFuZCB7ZWxzZVRleHR9IGNhbiBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZy5cbiAgICogVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKi9cbiAgdGV4dElmTm90KFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICB0ZXh0OiBzdHJpbmcgfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZyksXG4gICAgZWxzZVRleHQ6IHN0cmluZyB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nKSA9ICcnLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0SWYoY29uc3VtYWJsZSwgdGV4dCwgZWxzZVRleHQsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhdHRyaWJ1dGUgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgdHJ1dGh5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIHt2YWx1ZX0gY2FuIGJlIGEgc3RyaW5nIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nLlxuICAgKiBJZiB7aW52ZXJ0fSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNvbmRpdGlvbiB3aWxsIGJlIGludmVyc2VkLCBidXQgeW91IGNhbiBhbHNvIHVzZSB7QGxpbmsgYXR0cklmTm90fVxuICAgKi9cbiAgYXR0cklmKFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBhdHRyOiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nKSA9ICcnLFxuICAgIGludmVydCA9IGZhbHNlLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5kb0lmKFxuICAgICAgY29uc3VtYWJsZSxcbiAgICAgICgpID0+IHRoaXMuYWRkQXR0cihhdHRyLCBjYWxsT3JSZXR1cm4odmFsdWUsIHRoaXMpKSxcbiAgICAgICgpID0+IHRoaXMucm1BdHRyKGF0dHIpLFxuICAgICAgaW52ZXJ0LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGF0dHJpYnV0ZSB0byB0aGUgZWxlbWVudCB3aGVuIHRoZSBjb25zdW1lciBpcyBmYWxzeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiB7dmFsdWV9IGNhbiBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZy5cbiAgICogSWYge2ludmVydH0gaXMgc2V0IHRvIHRydWUsIHRoZSBjb25kaXRpb24gd2lsbCBiZSBpbnZlcnNlZFxuICAgKi9cbiAgYXR0cklmTm90KFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBhdHRyOiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nKSA9ICcnLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5hdHRySWYoY29uc3VtYWJsZSwgYXR0ciwgdmFsdWUsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGUgdGhpcyBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIHRydXRoeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiBJZiB7aW52ZXJ0fSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNvbmRpdGlvbiB3aWxsIGJlIGludmVyc2VkLCBidXQgeW91IGNhbiBhbHNvIHVzZSB7QGxpbmsgZGlzYWJsZUlmTm90fVxuICAgKi9cbiAgZGlzYWJsZUlmKGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PiwgaW52ZXJ0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRySWYoY29uc3VtYWJsZSwgJ2Rpc2FibGVkJywgJycsIGludmVydCk7XG4gIH1cblxuICAvKiogRGlzYWJsZSB0aGlzIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgZmFsc3kuIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy4gKi9cbiAgZGlzYWJsZUlmTm90KGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55Pikge1xuICAgIHJldHVybiB0aGlzLmRpc2FibGVJZihjb25zdW1hYmxlLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgc3R5bGUgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgdHJ1dGh5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIElmIHtpbnZlcnR9IGlzIHNldCB0byB0cnVlLCB0aGUgY29uZGl0aW9uIHdpbGwgYmUgaW52ZXJzZWQsIGJ1dCB5b3UgY2FuIGFsc28gdXNlIHtAbGluayBzdHlsZUlmTm90fVxuICAgKiB7dmFsdWV9IGNhbiBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZy5cbiAgICovXG4gIHN0eWxlSWYoXG4gICAgY29uc3VtYWJsZTogQ29uc3VtYWJsZTxhbnk+LFxuICAgIHN0eWxlOiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nKSA9ICcnLFxuICAgIGludmVydCA9IGZhbHNlLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5kb0lmKFxuICAgICAgY29uc3VtYWJsZSxcbiAgICAgICgpID0+IHRoaXMuYWRkU3R5bGUoc3R5bGUsIGNhbGxPclJldHVybih2YWx1ZSwgdGhpcykpLFxuICAgICAgKCkgPT4gdGhpcy5ybVN0eWxlKHN0eWxlKSxcbiAgICAgIGludmVydCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBzdHlsZSB0byB0aGUgZWxlbWVudCB3aGVuIHRoZSBjb25zdW1lciBpcyBmYWxzeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiB7dmFsdWV9IGNhbiBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZy5cbiAgICovXG4gIHN0eWxlSWZOb3QoXG4gICAgY29uc3VtYWJsZTogQ29uc3VtYWJsZTxhbnk+LFxuICAgIHN0eWxlOiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nKSA9ICcnLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZUlmKGNvbnN1bWFibGUsIHN0eWxlLCB2YWx1ZSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG11bHRpcGxlIHN0eWxlcyB0byB0aGUgZWxlbWVudCB3aGVuIHRoZSBjb25zdW1lciBpcyB0cnV0aHkuIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy5cbiAgICoge3N0eWxlc30gY2FuIGJlIGEge0BsaW5rIFN0eWxlTWFwfSBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHtAbGluayBTdHlsZU1hcH0uXG4gICAqIElmIHtpbnZlcnR9IGlzIHNldCB0byB0cnVlLCB0aGUgY29uZGl0aW9uIHdpbGwgYmUgaW52ZXJzZWQsIGJ1dCB5b3UgY2FuIGFsc28gdXNlIHtAbGluayBzdHlsZXNJZk5vdH1cbiAgICovXG4gIHN0eWxlc0lmKFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBzdHlsZXM6IFN0eWxlTWFwIHwgKChzZWxmOiBDVGFnKSA9PiBTdHlsZU1hcCksXG4gICAgaW52ZXJ0ID0gZmFsc2UsXG4gICkge1xuICAgIHJldHVybiB0aGlzLmRvSWYoXG4gICAgICBjb25zdW1hYmxlLFxuICAgICAgKCkgPT4gdGhpcy5zZXRTdHlsZShjYWxsT3JSZXR1cm4oc3R5bGVzLCB0aGlzKSksXG4gICAgICAoKSA9PiB0aGlzLnJtU3R5bGUoLi4uT2JqZWN0LmtleXMoc3R5bGVzKSksXG4gICAgICBpbnZlcnQsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbXVsdGlwbGUgc3R5bGVzIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIGZhbHN5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIHtzdHlsZXN9IGNhbiBiZSBhIHtAbGluayBTdHlsZU1hcH0gb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB7QGxpbmsgU3R5bGVNYXB9LlxuICAgKiBGb3IgdGhlIG9wb3NpdGUgdXNlICB7QGxpbmsgc3R5bGVzSWZ9XG4gICAqL1xuICBzdHlsZXNJZk5vdChcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgc3R5bGVzOiBTdHlsZU1hcCB8ICgoc2VsZjogQ1RhZykgPT4gU3R5bGVNYXApLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZXNJZihjb25zdW1hYmxlLCBzdHlsZXMsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbiB0byBhbiBldmVudCBvbiB0aGUgZWxlbWVudC4gTGlrZSBhZGRFdmVudExpc3RlbmVyLlxuICAgKi9cbiAgbGlzdGVuPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwPihcbiAgICB0YWc6IENUYWcsXG4gICAgZXZ0OiBLLFxuICAgIGNvbnN1bWVyOiAoc2VsZjogQ1RhZywgb3RoZXI6IENUYWcsIGV2dDogSFRNTEVsZW1lbnRFdmVudE1hcFtLXSkgPT4gdm9pZCxcbiAgKSB7XG4gICAgdGFnLm9uKGV2dCwgKG90aGVyLCBldnQpID0+IGNvbnN1bWVyKHRoaXMsIG90aGVyLCBldnQpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB7bmV3VGV4dH0gaXMgcHJvdmlkZWQsIGl0IHNldHMgdGhlIGB0ZXh0Q29udGVudGAgb2YgdGhlIGVsZW1lbnQuXG4gICAqIElmIHtuZXdUZXh0fSBpcyBwcm92aWRlZCwgYW5kIGEgc3RhdGUgaXMgcHJvdmlkZWQuIEl0IHdpbGwgdXNlIHRoZSB7bmV3VGV4dH0gYXMgYSB0ZW1wbGF0ZSxcbiAgICogdGhhdCB3aWxsIGJlIGludGVycG9sYXRlZCB3aXRoIHRoZSB2YWx1ZXMgaW4gdGhlIHN0YXRlLCBlYWNoIHRpbWUgdGhlIHN0YXRlIGNoYW5nZXMuIEl0IGFjdHMgbGlrZSB7QGxpbmsgdGV4dH1cbiAgICpcbiAgICogSWYgbm8gYXJndW1lbnQgaXMgcHJvdmlkZWQsIGl0IHJldHVybnMgdGhlIGB0ZXh0Q29udGVudGAgb2YgdGhlIGVsZW1lbnRcbiAgICovXG4gIHRleHQ8VCA9IHN0cmluZyB8IG51bGw+KFxuICAgIG5ld1RleHQ/OiBULFxuICAgIHN0PzogU3RhdGU8YW55PixcbiAgKTogVCBleHRlbmRzIHN0cmluZyA/IENUYWcgOiBzdHJpbmcge1xuICAgIGlmIChuZXdUZXh0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQgYXMgYW55O1xuICAgIH1cblxuICAgIGlmIChzdCAmJiBuZXdUZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRDaGlsZHJlbihbdGV4dChuZXdUZXh0IGFzIHN0cmluZywgc3QpXSkgYXMgYW55O1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9IG5ld1RleHQgYXMgc3RyaW5nO1xuXG4gICAgcmV0dXJuIHRoaXMgYXMgYW55O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyZSB0aGUgZWxlbWVudCBpbiBhIHNpbmdsZSBjYWxsIGJ5IHBhc3NpbmcgQHBhcmFtIHtUYWdDb25maWd9IGNvbmZpZ1xuICAgKiBpbnN0ZWFkIG9mIGhhdmluZyB0byBjYWxsIGEgbWV0aG9kIGZvciBlYWNoIHByb3BlcnR5IHlvdSB3YW50IHRvIGNoYW5nZXNcbiAgICovXG4gIGNvbmZpZyhjb25maWc6IFRhZ0NvbmZpZykge1xuICAgIGlmIChjb25maWcuYXR0cikge1xuICAgICAgdGhpcy5zZXRBdHRycyhjb25maWcuYXR0cik7XG4gICAgfVxuICAgIGlmIChjb25maWcuY2xhc3NMaXN0KSB7XG4gICAgICB0aGlzLmFkZENsYXNzKC4uLmNvbmZpZy5jbGFzc0xpc3QpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmNsYXNzTmFtZSkge1xuICAgICAgdGhpcy5jbGFzc05hbWUoY29uZmlnLmNsYXNzTmFtZSk7XG4gICAgfVxuICAgIGlmIChjb25maWcuc3R5bGUpIHtcbiAgICAgIHRoaXMuc2V0U3R5bGUoY29uZmlnLnN0eWxlKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50ZXh0KSB7XG4gICAgICB0aGlzLnRleHQoY29uZmlnLnRleHQpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnZhbHVlKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKGNvbmZpZy52YWx1ZSk7XG4gICAgfVxuICAgIGlmIChjb25maWcuY2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuYXBwZW5kKC4uLmNvbmZpZy5jaGlsZHJlbik7XG4gICAgfVxuICAgIGlmIChjb25maWcub24pIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbmZpZy5vbikge1xuICAgICAgICB0aGlzLm9uKGtleSwgY29uZmlnLm9uW2tleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEFkZCBjbGFzc2VzIHRvIHRoZSBlbGVtZW50cyBjbGFzcyBsaXN0ICovXG4gIGFkZENsYXNzKC4uLmNsYXNzTmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogU2V0IHRoZSBlbGVtZW50cyBjbGFzcyBuYW1lICovXG4gIGNsYXNzTmFtZShjbGFzc05hbWU6IHN0cmluZykge1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogUmVtb3ZlIGNsYXNzZXMgZnJvbSBjbGFzcyBsaXN0ICovXG4gIHJtQ2xhc3MoLi4uY2xhc3NOYW1lczogc3RyaW5nW10pIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgY2xhc3NOYW1lcykge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQ2hlY2sgaWYgY2xhc3NlcyBhcmUgcHJlc2VudCBpbiB0aGlzIGVsZW1lbnQgKi9cbiAgaGFzQ2xhc3MoLi4uY2xhc3NOYW1lczogc3RyaW5nW10pIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgY2xhc3NOYW1lcykge1xuICAgICAgaWYgKCF0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGtleSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBSZXBsYWNlIGEgY2xhc3Mgd2l0aCBhbm90aGVyICovXG4gIHJlcGxhY2VDbGFzcyh0YXJnZXRDbGFzczogc3RyaW5nLCByZXBsYWNlQ2xhc3M6IHN0cmluZykge1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVwbGFjZSh0YXJnZXRDbGFzcywgcmVwbGFjZUNsYXNzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBUb2dnbGUgYSBjbGFzcy4gSWYgaXQncyBwcmVzZW50IGl0J3MgcmVtb3ZlZCwgaWYgaXQncyBub3QgcHJlc2VudCBpdHMgYWRkZWQuICovXG4gIHRvZ2dsZUNsYXNzKHRhcmdldENsYXNzOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5oYXNDbGFzcyh0YXJnZXRDbGFzcykpIHtcbiAgICAgIHRoaXMucm1DbGFzcyh0YXJnZXRDbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBBZGQgYSBzaW5nbGUgc3R5bGUgKi9cbiAgYWRkU3R5bGU8SyBleHRlbmRzIENzc1Byb3BlcnR5Pihwcm9wZXJ0eTogSywgdmFsdWU6IFBpY2tQcm9wZXJ0eVZhbHVlczxLPikge1xuICAgIHRoaXMuZWxlbWVudC5zdHlsZVtwcm9wZXJ0eSBhcyBzdHJpbmddID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogU2V0IG11bHRpcGxlIHN0eWxlcyBhdCBvbmNlICovXG4gIHNldFN0eWxlKHN0eWxlczogU3R5bGVNYXApIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgICB0aGlzLmFkZFN0eWxlKGtleSwgc3R5bGVzW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBSZW1vdmUgc3R5bGVzICovXG4gIHJtU3R5bGUoLi4uc3R5bGVOYW1lczogc3RyaW5nW10pIHtcbiAgICBmb3IgKGxldCBrZXkgb2Ygc3R5bGVOYW1lcykge1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KGtleSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIENoZWNrIGlmIHRoaXMgZWxlbWVudCBoYXMgc3R5bGVzICovXG4gIGhhc1N0eWxlPEsgZXh0ZW5kcyBDc3NQcm9wZXJ0eT4oLi4uc3R5bGVzOiBLW10pIHtcbiAgICBmb3IgKGxldCBrZXkgb2Ygc3R5bGVzKSB7XG4gICAgICBpZiAoIXRoaXMuZWxlbWVudC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGNhbWVsVG9EYXNoKGtleSkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQWRkcyBhIHNldCBvZiBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50ICovXG4gIHNldEF0dHJzKGF0dHJzOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfSkge1xuICAgIGZvciAobGV0IGtleSBpbiBhdHRycykge1xuICAgICAgdGhpcy5hZGRBdHRyKGtleSwgYXR0cnNba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEFkZHMgYSBzaW5nbGUgYXR0cmlidXRlIHRvIHRoZSBlbGVtZW50ICovXG4gIGFkZEF0dHIoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmVsZW1lbnQuYXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBSZW1vdmUgYXR0cmlidXRlcyBmcm9tIHRoZSBlbGVtZW50ICovXG4gIHJtQXR0ciguLi5hdHRyczogc3RyaW5nW10pIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgYXR0cnMpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgIGRlbGV0ZSB0aGlzLmVsZW1lbnQuYXR0cmlidXRlc1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBDaGVjayBpZiB0aGlzIGVsZW1lbnQgaGFzIGF0dHJpYnV0ZXMgKi9cbiAgaGFzQXR0ciguLi5hdHRyOiBzdHJpbmdbXSkge1xuICAgIGZvciAobGV0IGtleSBvZiBhdHRyKSB7XG4gICAgICBpZiAoIShrZXkgaW4gdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogR2V0IGFuIGF0dHJpYnV0ZXMgdmFsdWUgKi9cbiAgZ2V0QXR0cihhdHRyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNbYXR0cl07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHtAbGluayBDb25zdW1hYmxlfSB0aGF0IGZpcmVzIHdoZW4gdGhlIEV2ZW50IHtAcGFyYW0gZXZ0TmFtZX0gaXMgZmlyZWQgaW4gdGhpcyBlbGVtZW50XG4gICAqXG4gICAqIFRoZSByZXR1cm4gdmFsdWUgb2Yge0BsaW5rIGZufSB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbGlzdGVuZXJzIG9mIHRoZSB7QGxpbmsgQ29uc3VtYWJsZX1cbiAgICovXG4gIHdoZW48SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXA+KFxuICAgIGV2dE5hbWU6IEsgfCBzdHJpbmcsXG4gICAgZm46IChzZWxmOiBDVGFnKSA9PiBhbnksXG4gICk6IENvbnN1bWFibGUge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFuZ2VkOiAobGlzdGVuZXIpID0+IHtcbiAgICAgICAgdGhpcy5vbihldnROYW1lLCAoKSA9PiB7XG4gICAgICAgICAgbGlzdGVuZXIoZm4odGhpcykpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGEgcGFydGljdWxhciBldmVudCAqL1xuICBvbjxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcD4oXG4gICAgZXZ0TmFtZTogSyB8IHN0cmluZyxcbiAgICBmbjogKHRhZzogQ1RhZywgZXZ0OiBIVE1MRWxlbWVudEV2ZW50TWFwW0tdKSA9PiB2b2lkLFxuICApIHtcbiAgICBpZiAoZm4pIHtcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2dE5hbWUsIChldnQ6IEhUTUxFbGVtZW50RXZlbnRNYXBbS10pID0+IHtcbiAgICAgICAgcmV0dXJuIGZuKHRoaXMsIGV2dCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBhIHBhcnRpY3VsYXIgZXZlbnQgdGhhdCB3aWxsIG9ubHkgZmlyZSBvbmNlICovXG4gIG9uY2U8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXA+KFxuICAgIGV2dE5hbWU6IEsgfCBzdHJpbmcsXG4gICAgZm46ICh0YWc6IENUYWcsIGV2dDogSFRNTEVsZW1lbnRFdmVudE1hcFtLXSkgPT4gdm9pZCxcbiAgKSB7XG4gICAgaWYgKGZuKSB7XG4gICAgICBjb25zdCBsaXN0ZW5lciA9IChldnQ6IEhUTUxFbGVtZW50RXZlbnRNYXBbS10pID0+IHtcbiAgICAgICAgZm4odGhpcywgZXZ0KTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZ0TmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBBZGQgYSAqKmNsaWNrKiogZXZlbnQgbGlzdGVuZXIgKi9cbiAgY2xpY2tlZChmbjogKHRhZzogQ1RhZywgZXZ0OiBNb3VzZUV2ZW50KSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIHRoaXMub24oJ2NsaWNrJywgZm4pO1xuICB9XG5cbiAgLyoqIEFkZCBhICoqa2V5cHJlc3MqKiBldmVudCBsaXN0ZW5lciAqL1xuICBrZXlQcmVzc2VkKGZuOiAodGFnOiBDVGFnLCBldnQ6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQsIGtleT86IHN0cmluZykge1xuICAgIGlmIChrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLm9uKCdrZXlwcmVzcycsIChfLCBldnQpID0+IHtcbiAgICAgICAgaWYgKGV2dC5jb2RlID09IGtleSB8fCBldnQua2V5ID09IGtleSkge1xuICAgICAgICAgIGZuKHRoaXMsIGV2dCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm9uKCdrZXlwcmVzcycsIGZuKTtcbiAgfVxuXG4gIC8qKiBBZGQgYSAqKmNoYW5nZSoqIGV2ZW50IGxpc3RlbmVyICovXG4gIGNoYW5nZWQoZm46ICh0YWc6IENUYWcsIGV2dDogRXZlbnQpID0+IHZvaWQpIHtcbiAgICByZXR1cm4gdGhpcy5vbignY2hhbmdlJywgZm4pO1xuICB9XG5cbiAgLyoqIEFkZCBhICoqc3VibWl0KiogZXZlbnQgbGlzdGVuZXIgKi9cbiAgc3VibWl0ZWQoZm46ICh0YWc6IENUYWcsIGV2dDogU3VibWl0RXZlbnQpID0+IHZvaWQpIHtcbiAgICByZXR1cm4gdGhpcy5vbignc3VibWl0JywgZm4pO1xuICB9XG5cbiAgLyoqIFJlbW92ZSBlbGVtZW50IGZyb20gdGhlIERPTSAqL1xuICBhc3luYyByZW1vdmUoKSB7XG4gICAgYXdhaXQgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgYHZhbHVlYCBvZiB0aGUgZWxlbWVudC4gSWYgeW91IGFyZSBnZXR0aW5nIHRoZSB2YWx1ZSBhbmQgdGhlbiBjbGVhcmluZywgY29uc2lkZXIgdXNpbmcge0BsaW5rIGNvbnN1bWVWYWx1ZX1cbiAgICovXG4gIGNsZWFyKCkge1xuICAgICh0aGlzLmVsZW1lbnQgYXMgYW55KS52YWx1ZSA9ICcnO1xuICAgIC8vIFRyaWdnZXIgaW5wdXQgZXZlbnQsIHNvIGNsZWFyaW5nIGlzIHRyZWF0ZWQgYXMgaW5wdXQhXG4gICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IElucHV0RXZlbnQoJ2lucHV0JykpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIERpc2FibGUgdGhlIGVsZW1lbnQgKi9cbiAgZGlzYWJsZSgpIHtcbiAgICB0aGlzLnNldERpc2FibGVkKHRydWUpO1xuICAgIHRoaXMuYWRkQXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBFbmFibGUgdGhlIGVsZW1lbnQgKi9cbiAgZW5hYmxlKCkge1xuICAgIHRoaXMuc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIFNldCB3aGV0aGVyIHRoZSBlbGVtZW50IHNob3VsZCBiZSBkaXNhYmxlZCBvciBub3QgKi9cbiAgc2V0RGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuYWRkQXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ybUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqIFF1ZXJ5IGEgY2hpbGQgaW4gdGhpcyBlbGVtZW50IChpbiB0aGUgRE9NKSAqL1xuICBxKHNlbGVjdG9yKTogQ1RhZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIG5ldyBDVGFnKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBGaW5kIGEgY2hpbGQgaW4gdGhpcyBlbGVtZW50IChpbiB0aGUgRE9NIG9yIE5PVCkgKi9cbiAgZmluZChwcmVkaWNhdGU6IChlbDogVGFnQ2hpbGQpID0+IGJvb2xlYW4pIHtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuX2NoaWxkcmVuKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGNoaWxkKSkge1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZmluZFRhZyhwcmVkaWNhdGU6IChlbDogQ1RhZykgPT4gYm9vbGVhbikge1xuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5fY2hpbGRyZW4pIHtcbiAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIENUYWcgJiYgcHJlZGljYXRlKGNoaWxkKSkge1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc2V0Q2hpbGRyZW5QYXJlbnQoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ1RhZykgaXRlbS5wYXJlbnQgPSB0aGlzO1xuICAgIHJldHVybiBpdGVtO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2hpbGRyZW5GaWx0ZXJQcmVkaWNhdGUoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ1RhZyAmJiBpdGVtLl9tZXRhLmlzSGlkZGVuKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0RWxlbWVudEZvckNoaWxkKGNsOiBUYWdDaGlsZCk6IE5vZGUge1xuICAgIGlmICh0eXBlb2YgY2wgPT09ICdzdHJpbmcnKSByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2wpO1xuICAgIGlmIChjbCBpbnN0YW5jZW9mIENUYWcpIHJldHVybiBjbC5lbGVtZW50O1xuICAgIGlmIChjbCBpbnN0YW5jZW9mIE5vZGUpIHJldHVybiBjbDtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFVwZGF0ZSBjYWNoZWQgY2hpbGQgbm9kZXMgd2hlbmV2ZXIgdGhpcyBlbGVtZW50cyBjaGlsZHMgY2hhbmdlXG4gIC8vIFRoaXMgbWFrZXMgaXQgYSBsb3QgZmFzdGVyIHRvIGdldCBjaGlsZHJlbi5cbiAgLy8gSWYgdGhlIGNoaWxkcmVuIGhhdmUgbm90IGNoYW5nZWQsIHRoZXJlJ3Mgbm8gbmVlZCB0byBzZXQgdGhlIGNoaWxkcmVuLCB1c2UgdGhlIHByZXZpb3VzIG9uZXNcbiAgcHJpdmF0ZSBfbXV0YXRpb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcjtcbiAgcHJpdmF0ZSBfZ2V0RWxlbWVudENoaWxkcmVuKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLl9tdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICB0aGlzLl9tdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgdGhpcy5fc2V0Q2FjaGVkQ2hpbGRyZW4oZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsZW1lbnQsIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xuICAgICAgdGhpcy5fc2V0Q2FjaGVkQ2hpbGRyZW4oZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc2V0Q2FjaGVkQ2hpbGRyZW4oZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBsZXQgY2hpbGROb2RlcyA9IGVsZW1lbnQuY2hpbGROb2RlcztcblxuICAgIGxldCBjaGlsZHJlbiA9IFtdO1xuICAgIGxldCBpID0gY2hpbGROb2Rlcy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgIGNoaWxkcmVuLnVuc2hpZnQoY2hpbGROb2Rlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVkQ2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FuIGRvIHRoZSBmb2xsb3dpbmcgYmFzZWQgb24gdGhlIGZpcnN0IGFyZ3VtZW50OlxuICogKiBjcmVhdGUgYSB0YWcgaWYgeW91IHByb3ZpZGUgYSB0YWcgbmFtZTogKGBkaXZgLCBgYWJicmAsIGBjdXN0b20tdGFnYCwgLi4uKSxcbiAqICogd3JhcCBhcm91bmQgYW4gZXhpc3RpbmcgZWxlbWVudCBpbiB0aGUgcGFnZSBpZiB5b3UgcGFzcyBpbiBhIHNlbGVjdG9yOiAoYCcoYm9keSknYCwgYCcoI2lkKSdgLCBgJyguY2xhc3MpJ2ApLCBhbnkgc2VsZWN0b3IgaXMgYWxsb3dlZC5cbiAqICogd3JhcCBhcm91bmQgYW4gZWxlbWVudCBwYXNzZWQgaW5cbiAqXG4gKiBUaGVuIGl0IGNhbiByZWNlaXZlIGEgbGlzdCBvZiBjaGlsZHJlbiB0byBiZSBhZGRlZC5cbiAqIEFuZCByZWNlaXZlcyBhIHRoaXJkIGFyZ3VtZW50IGZvciBhdHRhY2hpbmcgdGhpcyB0YWcgdG8gdGhlIGN1cnJlbnRseSBhdHRhY2ggdGFnICh7QGxpbmsgYXR0YWNofSlcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIHRhZygnZGl2Jyk7XG4gKiB0YWcoJyhib2R5KScpO1xuICogdGFnKCcoLnNvbWVjbGFzcyknKTtcbiAqIHRhZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc29tZXRoaW5nJykpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWcoXG4gIGFyZzA6IHN0cmluZyB8IEhUTUxFbGVtZW50LFxuICBjaGlsZHJlbjogVGFnQ2hpbGRyZW4gPSBbXSxcbiAgYXR0YWNoOiBib29sZWFuID0gZmFsc2UsXG4pIHtcbiAgcmV0dXJuIG5ldyBDVGFnKGFyZzAsIGNoaWxkcmVuLCBhdHRhY2gpO1xufVxuXG4vKipcbiAqIFdpbGwgY2FsbCB7b25TdGFydH0gd2hlbiB0aGUgZWxlbWVudCBpcyBhZGRlZCB0byB0aGUgRE9NLlxuICogQW5kIHdpbGwgY2FsbCB7b25SZW1vdmV9IHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvbkxpZmVjeWNsZShcbiAgdGFnOiBDVGFnLFxuICBvblN0YXJ0OiAodGFnOiBDVGFnLCBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcikgPT4gUHJvbWlzZTxhbnk+IHwgdm9pZCxcbiAgb25SZW1vdmU6ICh0YWc6IENUYWcsIG9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyKSA9PiB2b2lkLFxuICBiZWZvcmVSZW1vdmU/OiAodGFnOiBDVGFnKSA9PiBQcm9taXNlPGJvb2xlYW4+IHwgdm9pZCxcbikge1xuICBsZXQgb2JzZXJ2aW5nUGFyZW50ID0gZmFsc2U7XG5cbiAgaWYgKGJlZm9yZVJlbW92ZSkge1xuICAgIGNvbnN0IHRlbXBFbFJlbW92ZSA9IHRhZy5lbGVtZW50LnJlbW92ZTtcbiAgICB0YWcuZWxlbWVudC5yZW1vdmUgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnZWxlbWVudC5yZW1vdmUnKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGJlZm9yZVJlbW92ZSh0YWcpO1xuICAgICAgaWYgKCFyZXN1bHQgfHwgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgJiYgKGF3YWl0IHJlc3VsdCkpKSB7XG4gICAgICAgIHRlbXBFbFJlbW92ZS5jYWxsKHRhZy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdlbGVtZW50LnJlbW92ZSBlbmQnKTtcbiAgICB9O1xuICB9XG4gIGlmIChvblN0YXJ0KSB7XG4gICAgY29uc3QgdGVtcE9uU3RhcnQgPSB0YWcuc2hvdztcbiAgICB0YWcuc2hvdyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdlbGVtZW50LnNob3cnKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRlbXBPblN0YXJ0LmNhbGwodGFnKTtcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXN1bHQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoYXN5bmMgKG11dGF0aW9ucywgb2JzZXJ2ZXIpID0+IHtcbiAgICBsZXQgaGFzQmVlbkFkZGVkID0gZmFsc2U7XG4gICAgbGV0IGhhc0JlZW5SZW1vdmVkID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBtdXQgb2YgbXV0YXRpb25zKSB7XG4gICAgICBpZiAob25TdGFydCAmJiBBcnJheS5mcm9tKG11dC5hZGRlZE5vZGVzKS5pbmNsdWRlcyh0YWcuZWxlbWVudCkpIHtcbiAgICAgICAgaGFzQmVlbkFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChvblJlbW92ZSAmJiBBcnJheS5mcm9tKG11dC5yZW1vdmVkTm9kZXMpLmluY2x1ZGVzKHRhZy5lbGVtZW50KSkge1xuICAgICAgICBoYXNCZWVuUmVtb3ZlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhc0JlZW5BZGRlZCAmJiBvblN0YXJ0KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBvblN0YXJ0KHRhZywgb2JzZXJ2ZXIpO1xuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgYXdhaXQgcmVzdWx0O1xuICAgICAgfVxuXG5cbiAgICAgIC8vIFdoZW4gZWxlbWVudCBpcyBhZGRlZCwgY2hhbmdlIG9ic2VydmVyIHRvIG9ic2VydmUgcGFyZW50IGluc3RlYWQgb2YgYm9keVxuICAgICAgLy8gSW1wcm92ZSBwZXJmb3JtYW5jZSwgYXMgd2UganVzdCBuZWVkIHRvIGtub3cgaWYgaXQncyBhZGRlZCBvciByZW1vdmVkIGZyb20gdGhlIHBhcmVudCFcbiAgICAgIGlmICghb2JzZXJ2aW5nUGFyZW50KSB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0YWcuZWxlbWVudC5wYXJlbnRFbGVtZW50LCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICAgICAgb2JzZXJ2aW5nUGFyZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaGFzQmVlblJlbW92ZWQgJiYgb25SZW1vdmUpIHtcbiAgICAgIG9uUmVtb3ZlKHRhZywgb2JzZXJ2ZXIpO1xuICAgIH1cbiAgfSk7XG5cbiAgb2JzZXJ2ZXIub2JzZXJ2ZSh0YWcucGFyZW50Py5lbGVtZW50ID8/IGRvY3VtZW50LmJvZHksIHtcbiAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgc3VidHJlZTogdHJ1ZSxcbiAgfSk7XG5cbiAgcmV0dXJuIG9ic2VydmVyO1xufVxuXG4vKipcbiAqIFdpbGwgY2FsbCB7aGFuZGxlci5vblN0YXJ0fSB3aGVuIHRoZSBlbGVtZW50IGlzIGFkZGVkIHRvIHRoZSBET00uXG4gKiBBbmQgd2lsbCBjYWxsIHtoYW5kbGVyLm9uUmVtb3ZlfSB3aGVuIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgd2l0aExpZmVjeWNsZSA9IChcbiAgdGFnOiBDVGFnLFxuICBoYW5kbGVyOiB7XG4gICAgc3RhcnQ/OiAodGFnOiBDVGFnKSA9PiBQcm9taXNlPGJvb2xlYW4+IHwgdm9pZDtcbiAgICByZW1vdmVkPzogKHRhZzogQ1RhZykgPT4gdm9pZDtcbiAgICBiZWZvcmVSZW1vdmU/OiAodGFnOiBDVGFnKSA9PiBQcm9taXNlPGJvb2xlYW4+IHwgdm9pZDtcbiAgfSxcbik6IENUYWcgPT4ge1xuICBvbkxpZmVjeWNsZSh0YWcsIGhhbmRsZXIuc3RhcnQsIGhhbmRsZXIucmVtb3ZlZCwgaGFuZGxlci5iZWZvcmVSZW1vdmUpO1xuICByZXR1cm4gdGFnO1xufTtcblxuLyoqXG4gKiBBdHRhY2ggdGhlIGdpdmVuIHRhZy4gVGhpcyBtZWFucyB0aGF0IHdoZW4gb3RoZXIgdGFncyBhcmUgY3JlYXRlZCBtYXJrZWQgYXMgYXR0YWNoYWJsZSAodXNpbmcgYDx0YWdfbmFtZT4uYXR0YWNoKClgLCBgdGFnKCc8dGFnX25hbWU+JywgW10sIHRydWUpYCksXG4gKiB0aGV5IHdpbGwgYmUgYWRkZWQgYXMgY2hpbGRyZW4gb2YgdGhpcyB0YWcuXG4gKiBZb3UgY2FuIGNhbGwgYXR0YWNoIG11bHRpcGxlIHRpbWVzLCBhbmQgdGhlIGxhc3QgYXR0YWNoIHRhZyB3aWxsIGJlIHVzZWQuXG4gKiBUaGVuIHdoZW4geW91J3ZlIGZpbmlzaGVkLCB5b3UgY2FuIGNhbGwge0BsaW5rIGRldGFjaH0gdG8gZ28gYmFjayB0byB0aGUgcHJldmlvdXNseSBhdHRhY2hlZCB0YWcgaWYgdGhlcmUgaXMgb25lLCBvciBjbGVhciB0aGUgYXR0YWNoZWQgdGFnLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogYXR0YWNoKGRpdigpKTtcbiAqIGRpdi5hdHRhY2goKTsgIC8vIGFkZGVkIGFzIGNoaWxkIG9mIGRpdlxuICogcC5hdHRhY2goKTsgICAgLy8gYWRkZWQgYXMgY2hpbGQgb2YgZGl2XG4gKlxuICogYXR0YWNoKGRpdigpKTsgLy8gTmV3IGRpdlxuICogZGl2LmF0dGFjaCgpOyAgLy8gYWRkZWQgYXMgY2hpbGQgb2YgbmV3IGRpdlxuICogcC5hdHRhY2goKTsgICAgLy8gYWRkZWQgYXMgY2hpbGQgb2YgbmV3IGRpdlxuICpcbiAqIGRldGFjaCgpOyAgICAgIC8vIEJhY2sgdG8gcHJldmlvdXMgZGl2XG4gKiBkZXRhY2goKTsgICAgICAvLyBObyBhdHRhY2hlZCB0YWdcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXR0YWNoKHRhZzogQ1RhZykge1xuICBpZiAoY29udGV4dC5hdHRhY2hlZFRhZykge1xuICAgIGNvbnRleHQuYXR0YWNoZWRUYWdTdGFjay5wdXNoKGNvbnRleHQuYXR0YWNoZWRUYWcpO1xuICB9XG4gIGNvbnRleHQuYXR0YWNoZWRUYWcgPSB0YWc7XG4gIHJldHVybiB0YWc7XG59XG5cbi8qKlxuICogRGV0YWNoIHRoZSBjdXJyZW50bHkgYXR0YWNoZWQgdGFnICh7QGxpbmsgYXR0YWNofSkuIElmIHRoZXJlIHdhcyBhbm90aGVyIGF0dGFjaGVkIHRhZyBiZWZvcmUgaXQgd2lsbCBiZWNvbWUgdGhlIGN1cnJlbnRseSBhdHRhY2hlZCB0YWcuXG4gKiBJZiB0aGVyZSBhcmUgbm8gcHJldmlvdXMgYXR0YWNoZWQgdGFncywgaXQgd2lsbCBjbGVhciB0aGUgYXR0YWNoZWQgdGFnLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0YWNoKCkge1xuICBpZiAoY29udGV4dC5hdHRhY2hlZFRhZ1N0YWNrLmxlbmd0aCA+IDApIHtcbiAgICBjb250ZXh0LmF0dGFjaGVkVGFnID0gY29udGV4dC5hdHRhY2hlZFRhZ1N0YWNrLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIGNvbnRleHQuYXR0YWNoZWRUYWcgPSBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRGV0YWNoZXMgYWxsIGF0dGFjaGVkIHRhZ3MuIFRoZXJlIHdpbGwgYmUgbm8gYXR0YWNoZWQgdGFnIGFmdGVyIGNhbGxpbmcgdGhpcyBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGFjaEFsbCgpIHtcbiAgY29udGV4dC5hdHRhY2hlZFRhZyA9IG51bGw7XG4gIGNvbnRleHQuYXR0YWNoZWRUYWdTdGFjayA9IFtdO1xufVxuXG4vKipcbiAqIEl0IG1ha2VzIHRoZSBib2R5IHRoZSBhdHRhY2hlZCB0YWcgKHtAbGluayBhdHRhY2h9KS5cbiAqIFlvdSBjYW4gcGFzcyBpbiBhIHNlbGVjdG9yIGZvciBhbiBlbGVtZW50IHlvdSB3YW50IHRvIGJlIHRoZSBkZWZhdWx0IGF0dGFjaGVkIHRhZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXQob3B0aW9uczogeyByb290OiBzdHJpbmcgfSA9IHsgcm9vdDogJ2JvZHknIH0pIHtcbiAgY29uc3Qgcm9vdCA9IG5ldyBDVGFnKGAoJHtvcHRpb25zLnJvb3R9KWApO1xuICBhdHRhY2gocm9vdCk7XG4gIHJldHVybiByb290O1xufVxuXG4vKiogT3ZlcnJpZGUgYW55IHRhZyBmdW5jdGlvbiB3ZSB3YW50LCB0byBnaXZlIGl0IHNvbWUgY3VzdG9tIGJlaGF2aW91ciwgcHJvY2VzcyB0aGUgY2hpbGRyZW4sIGV0Yy4uLiAqL1xuY29uc3QgaW50ZXJjZXB0b3JzOiB7XG4gIFtrOiBzdHJpbmddOiBUYWdCdWlsZGVyIHwgKChzdHlsZXM6IFN0eWxlU2V0W10pID0+IENUYWcpO1xufSA9IHtcbiAgdWw6IChjaGlsZHJlbjogVGFnQ2hpbGRyZW4sIGF0dGFjaDogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gICAgcmV0dXJuIHRhZyhcbiAgICAgICd1bCcsXG4gICAgICBjaGlsZHJlbi5tYXAoKGNsKSA9PiB7XG4gICAgICAgIHJldHVybiB0YWcoJ2xpJywgW2NsXSwgYXR0YWNoKTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH0sXG4gIHN0eWxlOiAoc3R5bGVzOiBTdHlsZVNldFtdLCBhdHRhY2g6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuICAgIHJldHVybiB0YWcoJ3N0eWxlJywgW2NvbnRleHQuY3NzLmdlbmVyYXRlQ3NzKHN0eWxlcyldLCBhdHRhY2gpO1xuICB9LFxufTtcblxuLyoqXG4gKiBMaXN0IG9mIGFsbCBIVE1MIHRhZyBmdW5jdGlvbnMuIEZyb20gYGRpdmAgdG8gYGFiYnJgIDopXG4gKiBJZiB5b3Ugd2FudCB0byBjcmVhdGUgYW55IG90aGVyIHRhZywgdXNlIHRoZSB7QGxpbmsgdGFnfSBmdW5jdGlvbi5cbiAqXG4gKiBAdHlwZSB7QWxsVGFnc31cbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgeyBkaXYsIHAsIGFiYnIsIGltZywgc3R5bGUsIC4uLiB9ID0gYWxsVGFncztcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgYWxsVGFnczogQWxsVGFncyA9IG5ldyBQcm94eShcbiAge30sXG4gIHtcbiAgICBnZXQ6ICh0LCBwLCByKSA9PiB7XG4gICAgICBjb25zdCB0YWdOYW1lID0gcC50b1N0cmluZygpO1xuICAgICAgY29uc3QgZm4gPSAoLi4uY2hpbGRyZW46IGFueVtdKSA9PiB7XG4gICAgICAgIGlmIChpbnRlcmNlcHRvcnNbdGFnTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gaW50ZXJjZXB0b3JzW3RhZ05hbWVdKGNoaWxkcmVuLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhZyh0YWdOYW1lLCBjaGlsZHJlbik7XG4gICAgICB9O1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sICdhdHRhY2gnLCB7XG4gICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiAoLi4uY2hpbGRyZW46IGFueVtdKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW50ZXJjZXB0b3JzW3RhZ05hbWVdKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpbnRlcmNlcHRvcnNbdGFnTmFtZV0oY2hpbGRyZW4sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRhZyh0YWdOYW1lLCBjaGlsZHJlbiwgdHJ1ZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZm47XG4gICAgfSxcbiAgfSxcbikgYXMgQWxsVGFncztcbiIsImltcG9ydCB0eXBlIHsgU3RhdGUgfSBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi91dGlsLmpzJztcblxuLyoqXG4gKiBgc3RhdGVgIGNyZWF0ZXMgYSByZWFjdGl2ZSBvYmplY3QgdGhhdCBjYW4gdGhlIGJlIHVzZWQgd2l0aCB0YWdzIHRvIGNyZWF0ZSBkaW5hbWljIGFuZCByZWFjdGl2ZSBhcHBzLlxuICoge0BwYXJhbSBjb250ZW50fSBjYW4gYmUgYW4gYG9iamVjdGAgb3IgYW4gYGFycmF5YC4gT2JqZWN0cyBjYW4gYmUgbmVzdGVkLCBhbmQgZXZleSBwcm9wZXJ0eSB3aWxsIGJlIHJlYWN0aXZlLlxuICogSW4gYXJyYXlzLCBsZW5ndGggd2lsbCBhbHNvIGJlIHJlYWN0aXZlLlxuICpcbiAqIFlvdSBjYW4gcGFzcyBhbiBvcHRpb25hbCB7QHBhcmFtIGNhbGxiYWNrfSwgdGhhdCB3aWxsIGJlIGNhbGxlZCBhbnl0aGluZyBpbiB0aGUgc3RhdGUgY2hhbmdlcy5cbiAqXG4gKiBBZGRpdGlvbmFsbHkgeW91IGNhbiBsaXN0ZW4gdG8gaXQgYWZ0ZXIgY3JlYXRpbmcgaXQ6IGBzdGF0ZSgpLmNoYW5nZWQoKCkgPT4geyB9KWBcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IHN0ID0gc3RhdGUoeyBjb3VudDogMCB9KTtcbiAqIHN0LmNoYW5nZWQoKCkgPT4geyAuLi4gfSk7XG4gKiBzdC5jb3VudC5jaGFuZ2VkKCgpID0+IHsgLi4uIH0pO1xuICpcbiAqIHN0LmNvdW50Kys7XG4gKiBzdC5jb3VudCA9IDM7XG4gKlxuICogZGl2KCkuaGlkZUlmKHN0LmNvdW50KTtcbiAqIGRpdigpLmRpc2FibGVJZihzdC5jb3VudCk7XG4gKiBkaXYodGVtcGxhdGUoJ0NvdW50IGlzOiAkY291bnQnLCBzdCkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGF0ZTxUIGV4dGVuZHMgb2JqZWN0PihcbiAgY29udGVudDogVCxcbiAgY2FsbGJhY2s/OiAobmV3VmFsdWU6IFQpID0+IHZvaWQsXG4pOiBTdGF0ZTxUPiB7XG4gIGxldCBfcHJvcExpc3RlbmVyczogeyBbazogc3RyaW5nXTogYW55W10gfSA9IHt9O1xuICBsZXQgX3N0YXRlTGlzdGVuZXJzID0gW107XG5cbiAgaWYgKGNhbGxiYWNrKSBfc3RhdGVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG5cbiAgY29uc3QgYWRkTGlzdGVuZXIgPSAocHJvcCwgY2FsbGJhY2spID0+IHtcbiAgICBpZiAoIV9wcm9wTGlzdGVuZXJzW3Byb3BdKSBfcHJvcExpc3RlbmVyc1twcm9wXSA9IFtdO1xuICAgIGlmICghX3Byb3BMaXN0ZW5lcnNbcHJvcF0uaW5jbHVkZXMoY2FsbGJhY2spKSB7XG4gICAgICBfcHJvcExpc3RlbmVyc1twcm9wXS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZW1pdENoYW5nZSA9ICh0YXJnZXQsIHByb3ApID0+IHtcbiAgICBpZiAoX3Byb3BMaXN0ZW5lcnNbcHJvcF0pIHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgX3Byb3BMaXN0ZW5lcnNbcHJvcF0pIHtcbiAgICAgICAgbGlzdGVuZXIodGFyZ2V0W3Byb3BdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIF9zdGF0ZUxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXIodGFyZ2V0KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWRkQ2hhbmdlZE1ldGhvZCA9ICh0YXJnZXQsIHByb3ApID0+IHtcbiAgICBjb25zdCB2YWx1ZTogYW55ID0gdGFyZ2V0W3Byb3BdO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChpc09iamVjdCh0YXJnZXRbcHJvcF0pKSB7XG4gICAgICAgIHZhbHVlLmNoYW5nZWQgPSAoY2FsbGJhY2spID0+IGFkZExpc3RlbmVyKHByb3AsIGNhbGxiYWNrKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUuX19wcm90b19fKSB7XG4gICAgICAgIHZhbHVlLl9fcHJvdG9fXy5jaGFuZ2VkID0gKGNhbGxiYWNrKSA9PiBhZGRMaXN0ZW5lcihwcm9wLCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHt9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgZm9yIChsZXQgcHJvcCBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjb250ZW50KSkge1xuICAgIGlmIChpc09iamVjdChjb250ZW50W3Byb3BdKSkge1xuICAgICAgY29udGVudFtwcm9wXSA9IHN0YXRlKGNvbnRlbnRbcHJvcF0sICgpID0+IGVtaXRDaGFuZ2UoY29udGVudCwgcHJvcCkpO1xuICAgIH0gLy9cbiAgICBlbHNlIGlmIChjb250ZW50W3Byb3BdIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIGNvbnRlbnRbcHJvcF0gPSBzdGF0ZShjb250ZW50W3Byb3BdLCAoKSA9PiBlbWl0Q2hhbmdlKGNvbnRlbnQsIHByb3ApKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShjb250ZW50LCB7XG4gICAgZGVsZXRlUHJvcGVydHk6IGZ1bmN0aW9uICh0YXJnZXQsIHByb3ApIHtcbiAgICAgIGVtaXRDaGFuZ2UodGFyZ2V0LCBwcm9wKTtcbiAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcF07XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGdldDogKHRhcmdldCwgcHJvcCkgPT4ge1xuICAgICAgcmV0dXJuIGFkZENoYW5nZWRNZXRob2QodGFyZ2V0LCBwcm9wKTtcbiAgICB9LFxuICAgIHNldDogKHRhcmdldCwgcHJvcCwgdmFsdWUpID0+IHtcbiAgICAgIGlmIChwcm9wID09ICdjaGFuZ2VkJykge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgIFxuICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICBlbWl0Q2hhbmdlKHRhcmdldCwgcHJvcCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICB9KSBhcyBhbnk7XG5cbiAgLy8gV2hvbGUgc3RhdGUgY2hhbmdlZFxuICBwcm94eS5jaGFuZ2VkID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgX3N0YXRlTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9O1xuXG4gIC8vIHByb3h5Lm5vdCA9XG5cbiAgcmV0dXJuIHByb3h5IGFzIFN0YXRlPFQ+O1xufVxuIiwiaW1wb3J0IHsgYWxsVGFncywgQ1RhZyB9IGZyb20gJy4vdGFnLmpzJztcblxuY29uc3QgeyBkaXYsIGEgfSA9IGFsbFRhZ3M7XG5cbnR5cGUgUm91dGVCdWlsZGVyID0gKHJvdXRlcjogUm91dGVyPGFueT4pID0+IENUYWc7XG50eXBlIFJvdXRlID0gUm91dGVCdWlsZGVyIHwgc3RyaW5nO1xuXG50eXBlIFJvdXRlck9wdGlvbnM8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFJvdXRlPiA9IHt9PiA9IHtcbiAgcm9vdFBhcmVudDogQ1RhZztcbiAgcm91dGVzOiBUO1xuICBpbml0aWFsUm91dGU6IHN0cmluZztcbiAgZmFsbGJhY2tSb3V0ZT86IHN0cmluZztcbiAgbm9Sb290PzogUm91dGVCdWlsZGVyO1xuICB3aW5kb3c/OiBXaW5kb3cgJiB0eXBlb2YgZ2xvYmFsVGhpcztcbn07XG5cbmV4cG9ydCBjbGFzcyBSb3V0ZXI8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFJvdXRlPiA9IHt9PiB7XG4gIHByaXZhdGUgX29wdGlvbnM6IFJvdXRlck9wdGlvbnM8VD47XG4gIHByaXZhdGUgX3JvdXRlczogUmVjb3JkPHN0cmluZywgQ1RhZz4gPSB7fTtcbiAgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3cgJiB0eXBlb2YgZ2xvYmFsVGhpcztcbiAgcHJpdmF0ZSBfbG9jYXRpb246IExvY2F0aW9uO1xuICBwcml2YXRlIF9oaXN0b3J5OiBIaXN0b3J5O1xuICBwcml2YXRlIF9jdXJyZW50Um91dGU/OiBzdHJpbmc7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3V0ZVRhZz86IENUYWc7XG4gIHByaXZhdGUgX3Jvb3RQYXJlbnQ6IENUYWc7XG5cbiAgcHVibGljIHJvb3ROYW1lczoga2V5b2YgVDtcblxuICBwdWJsaWMgZ2V0IGN1cnJlbnRSb3V0ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50Um91dGU7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSb3V0ZXJPcHRpb25zPFQ+KSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5fcm9vdFBhcmVudCA9IG9wdGlvbnMucm9vdFBhcmVudDtcbiAgICB0aGlzLl93aW5kb3cgPSBvcHRpb25zLndpbmRvdyA/PyB3aW5kb3c7XG4gICAgdGhpcy5fbG9jYXRpb24gPSB0aGlzLl93aW5kb3cubG9jYXRpb247XG4gICAgdGhpcy5faGlzdG9yeSA9IHRoaXMuX3dpbmRvdy5oaXN0b3J5O1xuXG4gICAgdGhpcy5fbW9kaWZ5UHVzaFN0YXRlKCk7XG4gICAgdGhpcy5fbGlzdGVuRXZlbnRzKCk7XG5cbiAgICB0aGlzLm5hdmlnYXRlKHRoaXMuX29wdGlvbnMuaW5pdGlhbFJvdXRlKTtcbiAgfVxuXG4gIHB1YmxpYyBuYXZpZ2F0ZShwYXRoOiBzdHJpbmcpIHtcbiAgICBjb25zb2xlLmRlYnVnKGBbUm91dGVyXSAtPiBOYXZpZ2F0ZSB0byAke3BhdGh9YCk7XG4gICAgaWYgKHBhdGggIT0gdGhpcy5fY3VycmVudFJvdXRlKSB7XG4gICAgICB0aGlzLl9oaXN0b3J5LnB1c2hTdGF0ZSgnZGF0YScsICcnLCBwYXRoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9zZXRSb3V0ZSgpIHtcbiAgICBjb25zb2xlLmRlYnVnKGBbUm91dGVyXSAtPiBfc2V0Um91dGUgJHt0aGlzLl9jdXJyZW50Um91dGV9YCk7XG5cbiAgICBpZiAodGhpcy5fY3VycmVudFJvdXRlVGFnKSB7XG4gICAgICBhd2FpdCB0aGlzLl9jdXJyZW50Um91dGVUYWcuaGlkZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHJvdXRlID0gdGhpcy5fZ2V0Um91dGUoKTtcbiAgICB0aGlzLl9yb290UGFyZW50LmFwcGVuZChyb3V0ZSk7XG4gICAgdGhpcy5fY3VycmVudFJvdXRlVGFnID0gcm91dGU7XG4gIH1cblxuICBwcml2YXRlIF9nZXRSb3V0ZSgpIHtcbiAgICBjb25zb2xlLmRlYnVnKGBbUm91dGVyXSAtPiBfZ2V0Um91dGUgJHt0aGlzLl9jdXJyZW50Um91dGV9YCk7XG5cbiAgICBsZXQgZWZmZWN0aXZlUm91dGUgPSB0aGlzLl9jdXJyZW50Um91dGU7XG4gICAgbGV0IG1heENhbGxzID0gMTAwMDA7XG5cbiAgICB3aGlsZSAoXG4gICAgICB0eXBlb2YgdGhpcy5fb3B0aW9ucy5yb3V0ZXNbZWZmZWN0aXZlUm91dGVdID09PSAnc3RyaW5nJyAmJlxuICAgICAgbWF4Q2FsbHMtLVxuICAgICkge1xuICAgICAgbGV0IGFsaWFzID0gdGhpcy5fb3B0aW9ucy5yb3V0ZXNbZWZmZWN0aXZlUm91dGVdO1xuICAgICAgaWYgKHR5cGVvZiBhbGlhcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgICBgW1JvdXRlcl0gLT4gX2dldFJvdXRlICR7ZWZmZWN0aXZlUm91dGV9IGlzIGFsaWFzIGZvciAke2FsaWFzfWAsXG4gICAgICAgICk7XG4gICAgICAgIGVmZmVjdGl2ZVJvdXRlID0gYWxpYXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIShlZmZlY3RpdmVSb3V0ZSBpbiB0aGlzLl9vcHRpb25zLnJvdXRlcykpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoXG4gICAgICAgIGBbUm91dGVyXSAtPiBfZ2V0Um91dGUgJHtlZmZlY3RpdmVSb3V0ZX0gbm90IGZvdW5kLCBmYWxsYmFjayB0byAke3RoaXMuX29wdGlvbnMuZmFsbGJhY2tSb3V0ZX1gLFxuICAgICAgKTtcbiAgICAgIGVmZmVjdGl2ZVJvdXRlID0gdGhpcy5fb3B0aW9ucy5mYWxsYmFja1JvdXRlO1xuICAgIH1cblxuICAgIGlmICghKGVmZmVjdGl2ZVJvdXRlIGluIHRoaXMuX29wdGlvbnMucm91dGVzKSkge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgYFtSb3V0ZXJdIC0+IF9nZXRSb3V0ZSAke2VmZmVjdGl2ZVJvdXRlfSBub3QgZm91bmQgaW4gdGhlIHJvdXRlciwgZmFsbGJhY2sgdG8gXCJub1Jvb3RcIiBvciBkZWZhdWx0IGVycm9yYCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5ub1Jvb3RcbiAgICAgICAgPyB0aGlzLl9vcHRpb25zLm5vUm9vdCh0aGlzKVxuICAgICAgICA6IGRpdignTm8gcm91dGUgZm91bmQgZm9yOiAnICsgZWZmZWN0aXZlUm91dGUpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSByb3V0ZSBpcyBhbHJlYWR5IGJ1aWx0IGJlZm9yZSwganVzdCByZXR1cm4gdGhhdFxuICAgIGlmICh0aGlzLl9yb3V0ZXNbZWZmZWN0aXZlUm91dGVdKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgICBgW1JvdXRlcl0gLT4gX2dldFJvdXRlICR7ZWZmZWN0aXZlUm91dGV9IGlzIGNhY2hlZCwgdXNpbmcgdGhhdGAsXG4gICAgICApO1xuICAgICAgdGhpcy5fcm91dGVzW2VmZmVjdGl2ZVJvdXRlXS5zaG93KCk7XG4gICAgICByZXR1cm4gdGhpcy5fcm91dGVzW2VmZmVjdGl2ZVJvdXRlXTtcbiAgICB9XG5cbiAgICBsZXQgcm91dGVCdWlsZGVyID0gdGhpcy5fb3B0aW9ucy5yb3V0ZXNbZWZmZWN0aXZlUm91dGVdO1xuICAgIGlmICh0eXBlb2Ygcm91dGVCdWlsZGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBmaW5kIHJvdXRlIGJ1aWxkZXIgZm9yICcgKyB0aGlzLl9jdXJyZW50Um91dGUpO1xuICAgIH1cbiAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgYFtSb3V0ZXJdIC0+IF9nZXRSb3V0ZSAke2VmZmVjdGl2ZVJvdXRlfSBpcyBub3QgY2FjaGVkLCBjcmVhdGluZyBuZXcgb25lYCxcbiAgICApO1xuICAgIHJldHVybiAodGhpcy5fcm91dGVzW2VmZmVjdGl2ZVJvdXRlXSA9IHJvdXRlQnVpbGRlcih0aGlzKSk7XG4gIH1cblxuICBwcml2YXRlIF9zZXRDdXJyZW50Um91dGUoKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudFJvdXRlID09IHRoaXMuX2xvY2F0aW9uLnBhdGhuYW1lKSByZXR1cm47XG5cbiAgICB0aGlzLl9jdXJyZW50Um91dGUgPSB0aGlzLl9sb2NhdGlvbi5wYXRobmFtZTtcbiAgICB0aGlzLl9zZXRSb3V0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbGlzdGVuRXZlbnRzKCkge1xuICAgIHRoaXMuX3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMuX3NldEN1cnJlbnRSb3V0ZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdwdXNoc3RhdGUnLFxuICAgICAgdGhpcy5fc2V0Q3VycmVudFJvdXRlLmJpbmQodGhpcyksXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX21vZGlmeVB1c2hTdGF0ZSgpIHtcbiAgICBjb25zdCBwdXNoU3RhdGUgPSB0aGlzLl9oaXN0b3J5LnB1c2hTdGF0ZTtcbiAgICB0aGlzLl9oaXN0b3J5LnB1c2hTdGF0ZSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBwdXNoU3RhdGUuY2FsbCh0aGlzLl9oaXN0b3J5LCAuLi5hcmdzKTtcbiAgICAgIHRoaXMuX3dpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncHVzaHN0YXRlJykpO1xuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGxldCByb3V0ZXI6IFJvdXRlcjxhbnk+IHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVJvdXRlcjxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgUm91dGU+ID0ge30+KFxuICBvcHRzOiBSb3V0ZXJPcHRpb25zPFQ+LFxuKSB7XG4gIHJvdXRlciA9IG5ldyBSb3V0ZXI8VD4ob3B0cyk7XG4gIHJldHVybiByb3V0ZXIgYXMgUm91dGVyPFQ+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTGluayhjaGlsZDogc3RyaW5nIHwgQ1RhZywgcGF0aCkge1xuICByZXR1cm4gYShjaGlsZClcbiAgICAuYWRkQXR0cignaHJlZicsICdqYXZhc2NyaXB0OjsnKVxuICAgIC5zZXRTdHlsZSh7IG1hcmdpbjogJzAgOHB4IDAgMCcgfSlcbiAgICAuY2xpY2tlZCgoKSA9PiB7XG4gICAgICBpZiAoIXJvdXRlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpbmsgY2FuXFx0IG5hdmlnYXRlLCB0aGVyZSBpcyBubyByb3V0ZXIgYXZhaWxhYmxlJyk7XG4gICAgICB9XG5cbiAgICAgIHJvdXRlci5uYXZpZ2F0ZShwYXRoKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge307XG4iLCJleHBvcnQgKiBmcm9tICcuL3RhZy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3N0YXRlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vY3NzLWdlbmVyYXRvci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3V0aWwuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90ZXh0LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vcm91dGluZy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHt9O1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicmVtb3ZlRnJvbUxpc3QiLCJpdGVtIiwibGlzdCIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNhbWVsVG9EYXNoIiwic3RyIiwicmVwbGFjZSIsInZhbCIsInRvTG93ZXJDYXNlIiwiZGFzaFRvQ2FtZWwiLCJ0b1VwcGVyQ2FzZSIsImlzT2JqZWN0IiwiQXJyYXkiLCJ0b0pzb24iLCJwb3NzaWJseUpzb25TdHJpbmciLCJKU09OIiwicGFyc2UiLCJmcm9tSnNvbiIsInBvc3NpYmx5SnNvbiIsInN0cmluZ2lmeSIsImNhbGxPclJldHVybiIsImFyZ3MiLCJDc3NHZW5lcmF0b3IiLCJnZW5lcmF0ZUNzcyIsInN0eWxlU2hlZXQiLCJzdHlsZXNoZWV0cyIsImdlbmVyYXRlZENzcyIsInNoZWV0IiwidGhpcyIsImdlbmVyYXRlQmxvY2siLCJzZWxlY3RvciIsInN0eWxlIiwiZ2VuZXJhdGVCbG9ja0NvbnRlbnQiLCJqb2luIiwiaW5zaWRlIiwiYmxvY2tzIiwicHVzaCIsImdlbmVyYXRlU3R5bGUiLCJ1bnNoaWZ0IiwibmFtZSIsInZhbHVlIiwidGV4dFRlbXBsYXRlIiwidmFsdWVzIiwibm9kZSIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJpbnRlcnBvbGF0ZVBhdHRlcm4iLCJ1cGRhdGVOb2RlIiwibm9kZVZhbHVlIiwibWF0Y2giLCJnMSIsInRvU3RyaW5nIiwiaW5jbHVkZXMiLCJjaGFuZ2VkIiwiY29udGV4dCIsImF0dGFjaGVkVGFnIiwiYXR0YWNoZWRUYWdTdGFjayIsImNzcyIsImF0dGFjaGVkIiwiQ1RhZyIsInBhcmVudCIsIl9wYXJlbnQiLCJuZXdQYXJlbnQiLCJjaGlsZHJlbiIsIl9nZXRFbGVtZW50Q2hpbGRyZW4iLCJlbGVtZW50IiwiX2NhY2hlZENoaWxkcmVuIiwic2V0VmFsdWUiLCJuZXdWYWx1ZSIsImNvbnN1bWVWYWx1ZSIsImNsZWFyIiwiaWQiLCJzZXRJZCIsImNvbnN0cnVjdG9yIiwiYXJnMCIsImF0dGFjaGFibGUiLCJfY2hpbGRyZW4iLCJfYXR0YWNoYWJsZSIsIl9tZXRhIiwiaXNIaWRkZW4iLCJuZXh0U2libGluZ0lEIiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnQiLCJIVE1MRWxlbWVudCIsIkVycm9yIiwiYXBwZW5kIiwibGVuZ3RoIiwic2V0Q2hpbGRyZW4iLCJyZXBsYWNlQ2hpbGRyZW4iLCJtYXAiLCJfc2V0Q2hpbGRyZW5QYXJlbnQiLCJiaW5kIiwiZmlsdGVyIiwiX2NoaWxkcmVuRmlsdGVyUHJlZGljYXRlIiwiX2dldEVsZW1lbnRGb3JDaGlsZCIsInByZXBlbmQiLCJjb25zdW1lIiwiY29uc3VtYWJsZSIsImNvbnN1bWVyIiwic2hvdyIsImV4cGVjdGVkSW5kZXgiLCJoaWRkZW5CZWZvcmUiLCJpIiwiY2hpbGQiLCJuZXh0RWwiLCJjaGlsZE5vZGVzIiwiaW5zZXJ0QmVmb3JlIiwiaGlkZSIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJkb0lmIiwiaWZUcnVlIiwiaWZGYWxzZSIsImludmVydCIsInRlbXAiLCJjYWxsYmFjayIsImRvSWZOb3QiLCJoaWRlSWYiLCJoYW5kbGVIaWRlIiwiY29ycmVjdGVkVmFsdWUiLCJoaWRlSWZOb3QiLCJjbGFzc0lmIiwiY2xhc3NlcyIsImFkZENsYXNzIiwicm1DbGFzcyIsImNsYXNzSWZOb3QiLCJ0ZXh0SWYiLCJ0ZXh0IiwiZWxzZVRleHQiLCJ0ZXh0SWZOb3QiLCJhdHRySWYiLCJhdHRyIiwiYWRkQXR0ciIsInJtQXR0ciIsImF0dHJJZk5vdCIsImRpc2FibGVJZiIsImRpc2FibGVJZk5vdCIsInN0eWxlSWYiLCJhZGRTdHlsZSIsInJtU3R5bGUiLCJzdHlsZUlmTm90Iiwic3R5bGVzSWYiLCJzdHlsZXMiLCJzZXRTdHlsZSIsImtleXMiLCJzdHlsZXNJZk5vdCIsImxpc3RlbiIsInRhZyIsImV2dCIsIm9uIiwib3RoZXIiLCJuZXdUZXh0Iiwic3QiLCJ0ZXh0Q29udGVudCIsImNvbmZpZyIsInNldEF0dHJzIiwiY2xhc3NMaXN0IiwiY2xhc3NOYW1lIiwiY2xhc3NOYW1lcyIsImFkZCIsImhhc0NsYXNzIiwiY29udGFpbnMiLCJyZXBsYWNlQ2xhc3MiLCJ0YXJnZXRDbGFzcyIsInRvZ2dsZUNsYXNzIiwicHJvcGVydHkiLCJzdHlsZU5hbWVzIiwicmVtb3ZlUHJvcGVydHkiLCJoYXNTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJhdHRycyIsImF0dHJpYnV0ZXMiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJoYXNBdHRyIiwiZ2V0QXR0ciIsIndoZW4iLCJldnROYW1lIiwiZm4iLCJsaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsaWNrZWQiLCJrZXlQcmVzc2VkIiwiXyIsImNvZGUiLCJzdWJtaXRlZCIsImRpc3BhdGNoRXZlbnQiLCJJbnB1dEV2ZW50IiwiZGlzYWJsZSIsInNldERpc2FibGVkIiwiZW5hYmxlIiwiZGlzYWJsZWQiLCJxIiwiZmluZCIsInByZWRpY2F0ZSIsImZpbmRUYWciLCJjbCIsIk5vZGUiLCJfbXV0YXRpb25PYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJtdXRhdGlvbnMiLCJvYnNlcnZlciIsIl9zZXRDYWNoZWRDaGlsZHJlbiIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJub2RlVHlwZSIsImF0dGFjaCIsIm9uTGlmZWN5Y2xlIiwib25TdGFydCIsIm9uUmVtb3ZlIiwiYmVmb3JlUmVtb3ZlIiwib2JzZXJ2aW5nUGFyZW50IiwidGVtcEVsUmVtb3ZlIiwicmVzdWx0IiwiUHJvbWlzZSIsInRlbXBPblN0YXJ0IiwiaGFzQmVlbkFkZGVkIiwiaGFzQmVlblJlbW92ZWQiLCJtdXQiLCJmcm9tIiwiYWRkZWROb2RlcyIsInJlbW92ZWROb2RlcyIsImRpc2Nvbm5lY3QiLCJwYXJlbnRFbGVtZW50IiwiYm9keSIsInN1YnRyZWUiLCJ3aXRoTGlmZWN5Y2xlIiwiaGFuZGxlciIsInN0YXJ0IiwicmVtb3ZlZCIsImRldGFjaCIsInBvcCIsImRldGFjaEFsbCIsImluaXQiLCJvcHRpb25zIiwicm9vdCIsImludGVyY2VwdG9ycyIsInVsIiwiYWxsVGFncyIsIlByb3h5IiwidCIsInAiLCJyIiwidGFnTmFtZSIsInN0YXRlIiwiY29udGVudCIsIl9wcm9wTGlzdGVuZXJzIiwiX3N0YXRlTGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJlbWl0Q2hhbmdlIiwidGFyZ2V0IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInByb3h5IiwiZGVsZXRlUHJvcGVydHkiLCJfX3Byb3RvX18iLCJlcnJvciIsImFkZENoYW5nZWRNZXRob2QiLCJzZXQiLCJkaXYiLCJhIiwiUm91dGVyIiwiY3VycmVudFJvdXRlIiwiX2N1cnJlbnRSb3V0ZSIsIl9yb3V0ZXMiLCJfb3B0aW9ucyIsIl9yb290UGFyZW50Iiwicm9vdFBhcmVudCIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfbG9jYXRpb24iLCJsb2NhdGlvbiIsIl9oaXN0b3J5IiwiaGlzdG9yeSIsIl9tb2RpZnlQdXNoU3RhdGUiLCJfbGlzdGVuRXZlbnRzIiwibmF2aWdhdGUiLCJpbml0aWFsUm91dGUiLCJwYXRoIiwiZGVidWciLCJwdXNoU3RhdGUiLCJfc2V0Um91dGUiLCJfY3VycmVudFJvdXRlVGFnIiwicm91dGUiLCJfZ2V0Um91dGUiLCJlZmZlY3RpdmVSb3V0ZSIsIm1heENhbGxzIiwicm91dGVzIiwiYWxpYXMiLCJmYWxsYmFja1JvdXRlIiwibm9Sb290Iiwicm91dGVCdWlsZGVyIiwiX3NldEN1cnJlbnRSb3V0ZSIsInBhdGhuYW1lIiwiRXZlbnQiLCJyb3V0ZXIiLCJtYWtlUm91dGVyIiwib3B0cyIsIkxpbmsiLCJtYXJnaW4iXSwic291cmNlUm9vdCI6IiJ9