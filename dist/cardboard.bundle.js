var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t,e){const n=e.indexOf(t);return-1!==n&&e.splice(n,1),e}t.d(e,{wc:()=>m,Kh:()=>l,rU:()=>$,F0:()=>N,iF:()=>C,ub:()=>y,om:()=>f,nU:()=>h,Dk:()=>s,HO:()=>i,ZP:()=>O,og:()=>v,lW:()=>b,xZ:()=>a,S1:()=>w,Kn:()=>r,EP:()=>A,SB:()=>g,xj:()=>n,Nd:()=>T,C6:()=>S,_q:()=>p,fL:()=>c,Qs:()=>o,Uq:()=>_});const s=t=>t.replace(/([A-Z])/g,(t=>`-${t.toLowerCase()}`)),i=t=>t.replace(/(\-[a-z])/g,(t=>t.toUpperCase().replace("-","")));function r(t){return"object"==typeof t&&!(t instanceof Array)}const o=t=>JSON.parse(t),a=t=>JSON.stringify(t),h=(t,...e)=>"function"==typeof t?t(...e):t;class l{generateCss(t){let e=t instanceof Array?t:[t],n="";for(const t of e)for(const e in t)n+=this.generateBlock(e,t[e]);return n}generateBlock(t,e){return this.generateBlockContent(t,e).join("")}generateBlockContent(t,e){let n="",s=[];for(const i in e)r(e[i])?s.push(this.generateBlockContent(t+i,e[i])):e[i]&&(n+=this.generateStyle(i,e[i]));return s.unshift(`${t}{${n}}`),s}generateStyle(t,e){return`${s(t)}:${e};`}}function c(t,e){const n=document.createTextNode(""),s=/\B\$([0-9]+|[a-z][a-z0-9_$]*)/gi,i=()=>{n.nodeValue=e?t.replace(s,((t,n)=>null!=e[n]?e[n].toString():t)):t};if(e&&r(e))for(let n in e)t.includes(`$${n}`)&&e[n].changed((()=>{i()}));return i(),n}var u=function(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};let d={attachedTag:null,attachedTagStack:[],css:new l};function f(){return d.attachedTag}class m{get parent(){return this._parent}set parent(t){this._parent=t}get children(){return this._getElementChildren(this.element),this._cachedChildren}get value(){return this.element.value}get style(){return this.element.style}setValue(t){return this.element.value=t,this}get consumeValue(){const t=this.value;return this.clear(),t}get id(){return this.element.id}setId(t){return this.element.id=t,this}constructor(t,e=[],n=!1){if(this._parent=null,this._children=[],this._cachedChildren=[],this._attachable=!1,this._meta={isHidden:!1,nextSiblingID:null},this._attachable=n,"string"==typeof t&&t.match(/\(.+\)/))this._attachable=!1,this.element=document.querySelector(t.match(/\((.+)\)/)[1]);else if("string"==typeof t)this.element=document.createElement(t);else{if(!(t instanceof HTMLElement))throw new Error("Invalid argument 0");this._attachable=!1,this.element=t}d.attachedTag&&this._attachable&&d.attachedTag.append(this),e.length>0&&this.setChildren(e)}setChildren(t){return this.element.replaceChildren(...t.map(this._setChildrenParent.bind(this)).filter(this._childrenFilterPredicate.bind(this)).map(this._getElementForChild)),this._children=t,this}append(...t){return this.element.append(...t.map(this._setChildrenParent.bind(this)).filter(this._childrenFilterPredicate.bind(this)).map(this._getElementForChild)),this._children.push(...t),this}prepend(...t){return this.element.prepend(...t.filter(this._childrenFilterPredicate.bind(this)).map(this._getElementForChild)),this._children.unshift(...t),this}consume(t,e){return t.changed((t=>e(this,t))),e(this,t),this}show(){return u(this,void 0,void 0,(function*(){if(!this.parent.children.includes(this.element)){const t=this.parent._children.indexOf(this);if(0==t)this.parent.element.prepend(this.element);else if(t==this.parent._children.length-1)this.parent.element.append(this.element);else{let e=0;for(let n=t-1;n>=0;n--){const t=this.parent._children[n];t instanceof m&&t._meta.isHidden&&e++}const n=this.parent.element.childNodes[t-e];this.parent.element.insertBefore(this.element,n)}}return this._meta.isHidden=!1,!0}))}hide(){return u(this,void 0,void 0,(function*(){this.parent.children.includes(this.element)&&(console.log(this.remove),yield this.remove(),this._meta.isHidden=!0)}))}doIf(t,e,n,s=!1){if(s){let t=e;e=n,n=t}const i=t=>{t?e(t):n(t)};return t.changed(i),i(t),this}doIfNot(t,e,n){return this.doIf(t,e,n,!0)}hideIf(t,e=!1){const n=t=>{const n=e?!t:!!t;this._meta.isHidden=n,this.parent&&(n?this.hide():this.show())};return t.changed(n),n(t),this}hideIfNot(t){return this.hideIf(t,!0)}classIf(t,e,n=!1){return this.doIf(t,(()=>this.addClass(...h(e,this))),(()=>this.rmClass(...h(e,this))),n)}classIfNot(t,e){return this.classIf(t,e,!0)}textIf(t,e,n="",s=!1){return this.doIf(t,(()=>this.text(h(e,this))),(()=>this.text(h(n,this))),s)}textIfNot(t,e,n=""){return this.textIf(t,e,n,!0)}attrIf(t,e,n="",s=!1){return this.doIf(t,(()=>this.addAttr(e,h(n,this))),(()=>this.rmAttr(e)),s)}attrIfNot(t,e,n=""){return this.attrIf(t,e,n,!0)}disableIf(t,e=!1){return this.attrIf(t,"disabled","",e)}disableIfNot(t){return this.disableIf(t,!0)}styleIf(t,e,n="",s=!1){return this.doIf(t,(()=>this.addStyle(e,h(n,this))),(()=>this.rmStyle(e)),s)}styleIfNot(t,e,n=""){return this.styleIf(t,e,n,!0)}stylesIf(t,e,n=!1){return this.doIf(t,(()=>this.setStyle(h(e,this))),(()=>this.rmStyle(...Object.keys(e))),n)}stylesIfNot(t,e){return this.stylesIf(t,e,!0)}listen(t,e,n){return t.on(e,((t,e)=>n(this,t,e))),this}text(t,e){return null==t?this.element.textContent:e&&t?this.setChildren([c(t,e)]):(this.element.textContent=t,this)}config(t){if(t.attr&&this.setAttrs(t.attr),t.classList&&this.addClass(...t.classList),t.className&&this.className(t.className),t.style&&this.setStyle(t.style),t.text&&this.text(t.text),t.value&&this.setValue(t.value),t.children&&this.append(...t.children),t.on)for(const e in t.on)this.on(e,t.on[e]);return this}addClass(...t){return this.element.classList.add(...t),this}className(t){return this.element.className=t,this}rmClass(...t){for(let e of t)this.element.classList.remove(e);return this}hasClass(...t){for(let e of t)if(!this.element.classList.contains(e))return!1;return!0}replaceClass(t,e){return this.element.classList.replace(t,e),this}toggleClass(t){return this.hasClass(t)?this.rmClass(t):this.addClass(t),this}addStyle(t,e){return this.element.style[t]=e,this}setStyle(t){for(let e in t)this.addStyle(e,t[e]);return this}rmStyle(...t){for(let e of t)this.element.style.removeProperty(e);return this}hasStyle(...t){for(let e of t)if(!this.element.style.getPropertyValue(s(e)))return!1;return!0}setAttrs(t){for(let e in t)this.addAttr(e,t[e]);return this}addAttr(t,e){return this.element.attributes[t]=e,this.element.setAttribute(t,e),this}rmAttr(...t){for(let e of t)this.element.removeAttribute(e),delete this.element.attributes[e];return this}hasAttr(...t){for(let e of t)if(!(e in this.element.attributes))return!1;return!0}getAttr(t){return this.element.attributes[t]}when(t,e){return{changed:n=>{this.on(t,(()=>{n(e(this))}))}}}on(t,e){return e&&this.element.addEventListener(t,(t=>e(this,t))),this}once(t,e){if(e){const n=s=>{e(this,s),this.element.removeEventListener(t,n)};this.element.addEventListener(t,n)}return this}clicked(t){return this.on("click",t)}keyPressed(t,e){return e?this.on("keypress",((n,s)=>{s.code!=e&&s.key!=e||t(this,s)})):this.on("keypress",t)}changed(t){return this.on("change",t)}submited(t){return this.on("submit",t)}remove(){return u(this,void 0,void 0,(function*(){return yield this.element.remove(),this}))}clear(){return this.element.value="",this.element.dispatchEvent(new InputEvent("input")),this}disable(){return this.setDisabled(!0),this.addAttr("disabled","disabled"),this}enable(){return this.setDisabled(!1),this}setDisabled(t){t?this.addAttr("disabled","disabled"):this.rmAttr("disabled")}q(t){const e=this.element.querySelector(t);if(e)return new m(e)}find(t){for(const e of this._children)if(t(e))return e}findTag(t){for(const e of this._children)if(e instanceof m&&t(e))return e}_setChildrenParent(t){return t instanceof m&&(t.parent=this),t}_childrenFilterPredicate(t){return!(t instanceof m&&t._meta.isHidden)}_getElementForChild(t){return"string"==typeof t?document.createTextNode(t):t instanceof m?t.element:t instanceof Node?t:null}_getElementChildren(t){this._mutationObserver||(this._mutationObserver=new MutationObserver(((e,n)=>{this._setCachedChildren(t)})),this._mutationObserver.observe(this.element,{childList:!0}),this._setCachedChildren(t))}_setCachedChildren(t){let e=t.childNodes,n=[],s=e.length;for(;s--;)1==e[s].nodeType&&n.unshift(e[s]);this._cachedChildren=n}}function p(t,e=[],n=!1){return new m(t,e,n)}function g(t,e,n,s){var i,r;let o=!1;if(s){const e=t.element.remove;t.element.remove=()=>u(this,void 0,void 0,(function*(){console.log("element.remove");const n=s(t);(!n||n instanceof Promise&&(yield n))&&e.call(t.element),console.log("element.remove end")}))}if(e){const e=t.show;t.show=()=>u(this,void 0,void 0,(function*(){console.log("element.show");const n=e.call(t);return n instanceof Promise?yield n:n}))}const a=new MutationObserver(((s,i)=>u(this,void 0,void 0,(function*(){let r=!1,a=!1;for(let i of s)e&&Array.from(i.addedNodes).includes(t.element)&&(r=!0),n&&Array.from(i.removedNodes).includes(t.element)&&(a=!0);if(r&&e){const n=e(t,i);n instanceof Promise&&(yield n),o||(i.disconnect(),i.observe(t.element.parentElement,{childList:!0}),o=!0)}a&&n&&n(t,i)}))));return a.observe(null!==(r=null===(i=t.parent)||void 0===i?void 0:i.element)&&void 0!==r?r:document.body,{childList:!0,subtree:!0}),a}const _=(t,e)=>(g(t,e.start,e.removed,e.beforeRemove),t);function y(t){return d.attachedTag&&d.attachedTagStack.push(d.attachedTag),d.attachedTag=t,t}function v(){d.attachedTagStack.length>0?d.attachedTag=d.attachedTagStack.pop():d.attachedTag=null}function b(){d.attachedTag=null,d.attachedTagStack=[]}function w(t={root:"body"}){const e=new m(`(${t.root})`);return y(e),e}const R={ul:(t,e=!1)=>p("ul",t.map((t=>p("li",[t],e)))),style:(t,e=!1)=>p("style",[d.css.generateCss(t)],e)},C=new Proxy({},{get:(t,e,n)=>{const s=e.toString(),i=(...t)=>R[s]?R[s](t,!1):p(s,t);return Object.defineProperty(i,"attach",{get:()=>(...t)=>R[s]?R[s](t,!0):p(s,t,!0)}),i}});function S(t,e){let n={},s=[];e&&s.push(e);const i=(t,e)=>{n[t]||(n[t]=[]),n[t].includes(e)||n[t].push(e)},o=(t,e)=>{if(n[e])for(const s of n[e])s(t[e]);for(const e of s)e(t)};for(let e of Object.getOwnPropertyNames(t))(r(t[e])||t[e]instanceof Array)&&(t[e]=S(t[e],(()=>o(t,e))));const a=new Proxy(t,{deleteProperty:function(t,e){return o(t,e),delete t[e],!0},get:(t,e)=>((t,e)=>{const n=t[e];try{r(t[e])?n.changed=t=>i(e,t):n.__proto__&&(n.__proto__.changed=t=>i(e,t))}catch(t){}return n})(t,e),set:(t,e,n)=>"changed"==e?(t[e]=n,!0):(t[e]=n,o(t,e),!0)});return a.changed=t=>{s.push(t)},a}const I=/[\-\[\]{}()+?.,\\\^$|#\s]/g,x=/([:*])(\w+)/g;function P(t,e){var n=exports.toString.call(t).charAt(8);return"R"===n?t.test(e):"F"===n?t(e):t==e}const k=(t,e={})=>{let n={},s=[],i=t;return"string"==typeof i?(i=i.replace(I,"\\$&"),i=i.replace(x,(function(t,e,n){return s.push(n),":"===e?"([^/]*)":"(.*)"})),i=new RegExp("^"+i+"$"),n.parse=function(t){let n,r,o=0,a={},h=t.match(i);if(!h)return null;for(;o<s.length;){if(n=s[o++],r=h[o],e&&n in e&&!P(e[n],r))return null;a[n]=r}return a},n.stringify=function(e){let n,s,i=t;for(n in e)s=new RegExp("[:*]"+n+"\\b"),i=i.replace(s,e[n]);return i.replace(x,"")}):(n.parse=function(t){let e=t.match(i);return e&&{captures:e.slice(1)}},n.stringify=function(){return""}),n};const{div:E,a:L}=C;class N{get currentRoute(){return this._currentRoute}constructor(t){var e;this._routes={},this._routeMatchers=[],this.params={},this.query=new URLSearchParams,this._options=t,this._rootParent=t.rootParent,this._window=null!==(e=t.window)&&void 0!==e?e:window,this._location=this._window.location,this._history=this._window.history,this._initRouteMatchers(),this._modifyLocationFunctions(),this._listenEvents(),this.navigate(this._options.initialRoute)}navigate(t,e){const n=new URLSearchParams(e).toString();console.debug(`[Router] -> Navigate to ${t}`),t!=this._currentRoute&&this._history.pushState("data","",t+n?"?"+n:"")}_setRoute(){return t=this,e=void 0,s=function*(){console.debug(`[Router] -> _setRoute ${this._currentRoute}`),this._currentRouteTag&&(yield this._currentRouteTag.hide());const t=this._getRoute();this._rootParent.append(t),this._currentRouteTag=t},new((n=void 0)||(n=Promise))((function(i,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}));var t,e,n,s}_getEffectiveRoute(){let t=this._currentRoute,e=1e4;for(;"string"==typeof this._options.routes[t]&&e--;){let e=this._options.routes[t];if("string"!=typeof e)break;console.debug(`[Router] -> _getRoute ${t} is alias for ${e}`),t=e}return t}_getRoute(){console.debug(`[Router] -> _getRoute ${this._currentRoute}`);let t=this._getEffectiveRoute();console.log("Searching for matcher");for(let e of this._routeMatchers){const n=e.matcher.parse(t);if(n){t=e.key,this.params=n,this.query=new URLSearchParams(this._location.search);break}}if(t in this._options.routes||(console.debug(`[Router] -> _getRoute ${t} not found, fallback to ${this._options.fallbackRoute}`),t=this._options.fallbackRoute),!(t in this._options.routes))return console.debug(`[Router] -> _getRoute ${t} not found in the router, fallback to "noRoot" or default error`),this._options.noRoot?this._options.noRoot(this):E("No route found for: "+t);if(this._routes[t])return console.debug(`[Router] -> _getRoute ${t} is cached, using that`),this._routes[t].show(),this._routes[t];let e=this._options.routes[t];if("function"!=typeof e)throw new Error("Can find route builder for "+this._currentRoute);return console.debug(`[Router] -> _getRoute ${t} is not cached, creating new one`),this._routes[t]=e(this)}_setCurrentRoute(){this.currentRoute!=this._location.pathname&&(this._currentRoute=this._location.pathname,this._setRoute())}_listenEvents(){this._window.addEventListener("popstate",this._setCurrentRoute.bind(this)),this._window.addEventListener("pushstate",this._setCurrentRoute.bind(this))}_modifyLocationFunctions(){const t=this._history.pushState;this._history.pushState=(...e)=>{t.call(this._history,...e),this._window.dispatchEvent(new Event("pushstate"))}}_initRouteMatchers(){for(let t in this._options.routes)this._routeMatchers.push({key:t,matcher:k(t)})}}let T;function A(t){return T=new N(t),T}function $(t,e,n){return L(t).addAttr("href","javascript:;").setStyle({margin:"0 8px 0 0"}).clicked((()=>{if(!T)throw new Error("Link can\t navigate, there is no router available");T.navigate(e,n)}))}const O={};var F=e.wc,j=e.Kh,U=e.rU,q=e.F0,B=e.iF,H=e.ub,M=e.om,D=e.nU,V=e.Dk,Z=e.HO,J=e.ZP,K=e.og,z=e.lW,Q=e.xZ,W=e.S1,G=e.Kn,X=e.EP,Y=e.SB,tt=e.xj,et=e.Nd,nt=e.C6,st=e._q,it=e.fL,rt=e.Qs,ot=e.Uq;export{F as CTag,j as CssGenerator,U as Link,q as Router,B as allTags,H as attach,M as attached,D as callOrReturn,V as camelToDash,Z as dashToCamel,J as default,K as detach,z as detachAll,Q as fromJson,W as init,G as isObject,X as makeRouter,Y as onLifecycle,tt as removeFromList,et as router,nt as state,st as tag,it as text,rt as toJson,ot as withLifecycle};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVAsR0FDTmxSLEtBQUswUSxRQUFRakgsaUJBQWlCLFdBQVl6SixLQUFLc1MsaUJBQWlCdk8sS0FBSy9ELE9BQ3JFQSxLQUFLMFEsUUFBUWpILGlCQUNYLFlBQ0F6SixLQUFLc1MsaUJBQWlCdk8sS0FBSy9ELE1BRS9CLENBRVEsd0JBQUFpUixHQUNOLE1BQU1PLEVBQVl4UixLQUFLOFEsU0FBU1UsVUFDaEN4UixLQUFLOFEsU0FBU1UsVUFBWSxJQUFJL1IsS0FDNUIrUixFQUFVdlQsS0FBSytCLEtBQUs4USxZQUFhclIsR0FDakNPLEtBQUswUSxRQUFRekcsY0FBYyxJQUFJdUksTUFBTSxhQUFhLENBRXRELENBRU8sa0JBQUF4QixHQUNMLElBQUssSUFBSXlCLEtBQWN6UyxLQUFLdVEsU0FBU3dCLE9BQ25DL1IsS0FBS29RLGVBQWU1UCxLQUFLLENBQ3ZCakQsSUFBS2tWLEVBQ0xSLFFBQVNqRCxFQUFheUQsSUFHNUIsRUFHSyxJQUFJQyxFQUVKLFNBQVNDLEVBQ2RDLEdBR0EsT0FEQUYsRUFBUyxJQUFJMUMsRUFBVTRDLEdBQ2hCRixDQUNULENBRU8sU0FBU0csRUFDZGxPLEVBQ0EwTSxFQUNBaEIsR0FFQSxPQUFPTixFQUFFcEwsR0FDTjhCLFFBQVEsT0FBUSxnQkFDaEJXLFNBQVMsQ0FBRTBMLE9BQVEsY0FDbkJsSixTQUFRLEtBQ1AsSUFBSzhJLEVBQ0gsTUFBTSxJQUFJbFAsTUFBTSxxREFHbEJrUCxFQUFPdkIsU0FBU0UsRUFBTWhCLEVBQU0sR0FFbEMsQ0N2TUEsU0FBaUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcmRib2FyZC1qcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jYXJkYm9hcmQtanMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy91dGlsLnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy9jc3MtZ2VuZXJhdG9yLnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy90ZXh0LnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy90YWcudHMiLCJ3ZWJwYWNrOi8vY2FyZGJvYXJkLWpzLy4vc3JjL3N0YXRlLnRzIiwid2VicGFjazovL2NhcmRib2FyZC1qcy8uL3NyYy9yb3V0aW5nL3JvdXRlLW1hdGNoZXIudHMiLCJ3ZWJwYWNrOi8vY2FyZGJvYXJkLWpzLy4vc3JjL3JvdXRpbmcvcm91dGluZy50cyIsIndlYnBhY2s6Ly9jYXJkYm9hcmQtanMvLi9zcmMvY2FyZGJvYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyoqIFJlbW92ZXMgYW4gaXRlbSBmcm9tIGFuIGFycmF5IGlmIGl0IGV4aXN0cy4gSXQgcmV0dXJucyB0aGUgc2FtZSBhcnJheSB3aXRob3V0IHRoZSBpdGVtICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRnJvbUxpc3Q8VD4oaXRlbTogVCwgbGlzdDogVFtdKSB7XG4gIGNvbnN0IGluZGV4ID0gbGlzdC5pbmRleE9mKGl0ZW0pO1xuXG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICBsaXN0LnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICByZXR1cm4gbGlzdDtcbn1cblxuZXhwb3J0IGNvbnN0IGNhbWVsVG9EYXNoID0gKHN0cikgPT5cbiAgc3RyLnJlcGxhY2UoLyhbQS1aXSkvZywgKHZhbCkgPT4gYC0ke3ZhbC50b0xvd2VyQ2FzZSgpfWApO1xuZXhwb3J0IGNvbnN0IGRhc2hUb0NhbWVsID0gKHN0cikgPT5cbiAgc3RyLnJlcGxhY2UoLyhcXC1bYS16XSkvZywgKHZhbCkgPT4gdmFsLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgnLScsICcnKSk7XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3Qob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmICEob2JqIGluc3RhbmNlb2YgQXJyYXkpO1xufVxuZXhwb3J0IGNvbnN0IHRvSnNvbiA9IChwb3NzaWJseUpzb25TdHJpbmcpID0+IEpTT04ucGFyc2UocG9zc2libHlKc29uU3RyaW5nKTtcbmV4cG9ydCBjb25zdCBmcm9tSnNvbiA9IChwb3NzaWJseUpzb24pID0+IEpTT04uc3RyaW5naWZ5KHBvc3NpYmx5SnNvbik7XG5leHBvcnQgY29uc3QgY2FsbE9yUmV0dXJuID0gPFQ+KHZhbDogVCB8ICgoLi4uYXJnczogYW55KSA9PiBUKSwgLi4uYXJncyk6IFQgPT4ge1xuICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiAodmFsIGFzIGFueSkoLi4uYXJncyk7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn07XG4iLCJpbXBvcnQgdHlwZSB7IE5lc3RlZFN0eWxlTWFwIH0gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQgeyBjYW1lbFRvRGFzaCwgaXNPYmplY3QgfSBmcm9tICcuL3V0aWwuanMnO1xuXG5leHBvcnQgY2xhc3MgQ3NzR2VuZXJhdG9yIHtcbiAgZ2VuZXJhdGVDc3Moc3R5bGVTaGVldDogeyBba2V5OiBzdHJpbmddOiBOZXN0ZWRTdHlsZU1hcCB9IHwgeyBba2V5OiBzdHJpbmddOiBOZXN0ZWRTdHlsZU1hcCB9W10pIHtcbiAgICBsZXQgc3R5bGVzaGVldHMgPSBzdHlsZVNoZWV0IGluc3RhbmNlb2YgQXJyYXkgPyBzdHlsZVNoZWV0IDogW3N0eWxlU2hlZXRdO1xuICAgIGxldCBnZW5lcmF0ZWRDc3MgPSAnJztcblxuICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc3R5bGVzaGVldHMpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoZWV0KSB7XG4gICAgICAgIGdlbmVyYXRlZENzcyArPSB0aGlzLmdlbmVyYXRlQmxvY2soa2V5LCBzaGVldFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGdlbmVyYXRlZENzcztcbiAgfVxuXG4gIGdlbmVyYXRlQmxvY2soc2VsZWN0b3I6IHN0cmluZywgc3R5bGU6IE5lc3RlZFN0eWxlTWFwKSB7XG4gICAgbGV0IGJsb2NrcyA9IHRoaXMuZ2VuZXJhdGVCbG9ja0NvbnRlbnQoc2VsZWN0b3IsIHN0eWxlKTtcbiAgICByZXR1cm4gYmxvY2tzLmpvaW4oJycpO1xuICB9XG5cbiAgZ2VuZXJhdGVCbG9ja0NvbnRlbnQoc2VsZWN0b3I6IHN0cmluZywgc3R5bGU6IE5lc3RlZFN0eWxlTWFwKTogc3RyaW5nW10ge1xuICAgIGxldCBpbnNpZGUgPSAnJztcbiAgICBsZXQgYmxvY2tzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZSkge1xuICAgICAgaWYgKGlzT2JqZWN0KHN0eWxlW2tleV0pKSB7XG4gICAgICAgIGJsb2Nrcy5wdXNoKHRoaXMuZ2VuZXJhdGVCbG9ja0NvbnRlbnQoc2VsZWN0b3IgKyBrZXksIHN0eWxlW2tleV0pKTtcbiAgICAgIH0gXG4gICAgICBlbHNlIGlmIChzdHlsZVtrZXldKSB7XG4gICAgICAgIGluc2lkZSArPSB0aGlzLmdlbmVyYXRlU3R5bGUoa2V5LCBzdHlsZVtrZXldIGFzIHN0cmluZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYmxvY2tzLnVuc2hpZnQoYCR7c2VsZWN0b3J9eyR7aW5zaWRlfX1gKTtcblxuICAgIHJldHVybiBibG9ja3M7XG4gIH1cblxuICBnZW5lcmF0ZVN0eWxlKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgIHJldHVybiBgJHtjYW1lbFRvRGFzaChuYW1lKX06JHt2YWx1ZX07YDtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBTdGF0ZSB9IGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuL3V0aWwuanMnO1xuXG4vKipcbiAqIENyZWF0ZSBhICoqVGV4dE5vZGUqKiBmcm9tIHRleHQsIGFuZCBvcHRpb25hbGx5IHJlYWN0cyB0byBhIHtAbGluayBTdGF0ZX0sIGludGVycG9sYXRpbmcgdGhlIGRlZmluZWQgdmFyaWFibGVzIGluIHRoZSB0ZXh0IGVhY2ggdGltZSB0aGUgc3RhdGUgY2hhbmdlcy5cbiAqXG4gKiBJZiB5b3UgcHJvdmlkZSBhIHtAbGluayBTdGF0ZX0gYXMgdGhlIHNlY29uZCBhcmd1bWVudCwgdGhlIHRleHQgd2lsbCBhY3QgYXMgYSB0ZW1wbGF0ZVxuICogYW5kIGNhbiByZWZlcmVuY2UgcHJvcGVydGllcyBpbiB0aGUgc3RhdGU6IGAkY291bnRgLCBgJHNvbWVWYWx1ZWAuXG4gKlxuICogV2hlbiB0aGUgc3RhdGUgcHJvcGVydGllcyBjaGFuZ2VzLCB0aGUgdGV4dCBub2RlIHdpbGwgYmUgYXV0b21hdGljYWxseSB1cGRhdGVkIHdpdGggdGhlIG5ldyB0ZXh0LlxuICogT25seSB0aGUgcHJvcGVydGllcyB0aGF0IGFyZSByZWZlcmVuY2VkIGluIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIGxpc3RlbmVkIHRvLlxuICpcbiAqICoqTk9URSoqIElmIHlvdSdyZSBub3QgaW50ZXJwb2xhdGluZywgYW5kIGRvbnQgbmVlZCB0byBjaGFuZ2UgdGhlIHRleHQsIHlvdSBjYW4gZGlyZWN0bHkgcGFzcyBpbiBhIHN0cmluZyAoJ3N0cmluZycpIGluc3RlYWQgb2YgKGB0ZXh0KCdzdHJpbmcnKWApLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3Qgc3QgPSBzdGF0ZSh7IGNvdW50OiAwIH0pO1xuICpcbiAqIHAodGV4dCgnUmF3IHRleHQhJykpO1xuICogcCh0ZXh0KGBDb3VudDogJGNvdW50YCwgc3QpKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGV4dDxUPih0ZXh0VGVtcGxhdGU6IHN0cmluZywgdmFsdWVzPzogU3RhdGU8VD4pOiBOb2RlIHtcbiAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgY29uc3QgaW50ZXJwb2xhdGVQYXR0ZXJuID0gL1xcQlxcJChbMC05XSt8W2Etel1bYS16MC05XyRdKikvZ2k7XG5cbiAgY29uc3QgdXBkYXRlTm9kZSA9ICgpID0+IHtcbiAgICBpZiAoIXZhbHVlcykge1xuICAgICAgbm9kZS5ub2RlVmFsdWUgPSB0ZXh0VGVtcGxhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUubm9kZVZhbHVlID0gdGV4dFRlbXBsYXRlLnJlcGxhY2UoaW50ZXJwb2xhdGVQYXR0ZXJuLCAobWF0Y2gsIGcxKSA9PiB7XG4gICAgICAgIHJldHVybiB2YWx1ZXNbZzFdICE9IG51bGwgPyB2YWx1ZXNbZzFdLnRvU3RyaW5nKCkgOiBtYXRjaDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBpZiAodmFsdWVzICYmIGlzT2JqZWN0KHZhbHVlcykpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICAvLyBXZSdyZSBqdXN0IGludGVyZXN0ZWQgaW4gbGlzdGVuaW5nIHRvIHRoZSB2YWx1ZXMgdGhhdCBhcmUgcmVmZXJlbmNlcyBpbiB0aGUgdGV4dC5cbiAgICAgIGlmICh0ZXh0VGVtcGxhdGUuaW5jbHVkZXMoYCQke2tleX1gKSkge1xuICAgICAgICBjb25zdCBpdGVtID0gdmFsdWVzW2tleV07XG4gICAgICAgIGl0ZW0uY2hhbmdlZCgoKSA9PiB7XG4gICAgICAgICAgdXBkYXRlTm9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGVOb2RlKCk7XG4gIHJldHVybiBub2RlO1xufVxuIiwiaW1wb3J0IHsgQ3NzR2VuZXJhdG9yIH0gZnJvbSAnLi9jc3MtZ2VuZXJhdG9yLmpzJztcbmltcG9ydCB7IENzc1Byb3BlcnR5IH0gZnJvbSAnLi9jc3MtcHJvcGVydGllcy5qcyc7XG5pbXBvcnQgeyBQaWNrUHJvcGVydHlWYWx1ZXMgfSBmcm9tICcuL2Nzcy1wcm9wZXJ0eS12YWx1ZXMuanMnO1xuaW1wb3J0IHsgVGFnTmFtZSB9IGZyb20gJy4vdGFnLW5hbWVzLmpzJztcbmltcG9ydCB7IGNhbGxPclJldHVybiwgY2FtZWxUb0Rhc2ggfSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IHsgdGV4dCB9IGZyb20gJy4vdGV4dC5qcyc7XG5pbXBvcnQgdHlwZSB7XG4gIEFsbFRhZ3MsXG4gIENvbnN1bWFibGUsXG4gIFN0YXRlLFxuICBTdHlsZU1hcCxcbiAgU3R5bGVTZXQsXG4gIFRhZ0J1aWxkZXIsXG4gIFRhZ0NoaWxkLFxuICBUYWdDaGlsZHJlbixcbiAgVGFnQ29uZmlnLFxufSBmcm9tICcuL3R5cGVzLmpzJztcblxubGV0IGNvbnRleHQ6IHtcbiAgYXR0YWNoZWRUYWc6IENUYWc7XG4gIGF0dGFjaGVkVGFnU3RhY2s6IENUYWdbXTtcbiAgY3NzOiBDc3NHZW5lcmF0b3I7XG59ID0ge1xuICBhdHRhY2hlZFRhZzogbnVsbCxcbiAgYXR0YWNoZWRUYWdTdGFjazogW10sXG4gIGNzczogbmV3IENzc0dlbmVyYXRvcigpLFxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYXR0YWNoZWQge0BsaW5rIENUYWd9LiBTZWUge0BsaW5rIGF0dGFjaH0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhdHRhY2hlZCgpIHtcbiAgcmV0dXJuIGNvbnRleHQuYXR0YWNoZWRUYWc7XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgbWFpbiBjbGFzcyBpbiBDYXJkYm9hcmQuIEV2ZW4gdGhvdWdoIENhcmRib2FyZCBpcyBkZXNpZ25lZCB0byBub3QgbmVlZCB0byB1c2UgdGhpcyBjbGFzcyBkaXJlY3RseSwgeW91IGNhbiBpZiB5b3Ugd2FudC5cbiAqXG4gKiBDVGFnIGNvbnRhaW5zIGEgcmVmZXJlbmNlIHRvIGFuIEhUTUxFbGVtZW50LCBpdHMgcGFyZW50LCBhbmQgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBpbnRlcmFjdCB3aXRoIGl0LlxuICovXG5leHBvcnQgY2xhc3MgQ1RhZyB7XG4gIC8qKiBSZWZlcmVuY2UgdG8gdGhlIEhUTUxFbGVtZW50IHRoYXQgdGhpcyBAdHlwZSB7Q1RhZ30gcmVwcmVzZW50cyAqL1xuICBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAvKiogQHBhcmFtIHBhcmVudCBSZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBAdHlwZSB7Q1RhZ30gb2YgdGhpcyBlbGVtZW50ICovXG4gIHByaXZhdGUgX3BhcmVudDogQ1RhZyA9IG51bGw7XG4gIGdldCBwYXJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbiAgfVxuICBzZXQgcGFyZW50KG5ld1BhcmVudDogQ1RhZykge1xuICAgIHRoaXMuX3BhcmVudCA9IG5ld1BhcmVudDtcbiAgfVxuXG4gIC8qKiBIb2xkcyB0aGUgbGlzdCBvZiBhbGwgY2hpbGRyZW4sIHRoZSBvbmVzIHRoYXQgYXJlIGN1cnJlbnRseSBpbiB0aGUgRE9NIGFuZCB0aG9zZSB0aGF0IGFyZSBub3QgKi9cbiAgcHJpdmF0ZSBfY2hpbGRyZW46IFRhZ0NoaWxkW10gPSBbXTtcblxuICBwcml2YXRlIF9jYWNoZWRDaGlsZHJlbjogTm9kZVtdID0gW107XG4gIGdldCBjaGlsZHJlbigpIHtcbiAgICB0aGlzLl9nZXRFbGVtZW50Q2hpbGRyZW4odGhpcy5lbGVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkQ2hpbGRyZW47XG4gIH1cblxuICAvKiogSWYgc2V0IHRvIHRydWUsIGl0IGJlIGFwcGVuZGVkIHRvIHRoZSBhdHRhY2hlZCB0YWcgKi9cbiAgcHJpdmF0ZSBfYXR0YWNoYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9tZXRhID0ge1xuICAgIGlzSGlkZGVuOiBmYWxzZSxcbiAgICBuZXh0U2libGluZ0lEOiBudWxsLFxuICB9O1xuXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gKHRoaXMuZWxlbWVudCBhcyBhbnkpLnZhbHVlO1xuICB9XG5cbiAgZ2V0IHN0eWxlKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuc3R5bGU7XG4gIH1cblxuICBzZXRWYWx1ZShuZXdWYWx1ZTogc3RyaW5nKSB7XG4gICAgKHRoaXMuZWxlbWVudCBhcyBhbnkpLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogR2V0cyB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGNsZWFycyB0aGUgdmFsdWUgKi9cbiAgZ2V0IGNvbnN1bWVWYWx1ZSgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgdGhpcy5jbGVhcigpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGdldCBpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlkO1xuICB9XG5cbiAgc2V0SWQoaWQ6IHN0cmluZykge1xuICAgIHRoaXMuZWxlbWVudC5pZCA9IGlkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXJnMDogVGFnTmFtZSB8IEhUTUxFbGVtZW50LFxuICAgIGNoaWxkcmVuOiBUYWdDaGlsZHJlbiA9IFtdLFxuICAgIGF0dGFjaGFibGU6IGJvb2xlYW4gPSBmYWxzZSxcbiAgKSB7XG4gICAgdGhpcy5fYXR0YWNoYWJsZSA9IGF0dGFjaGFibGU7XG4gICAgY29uc3QgaXNTZWxlY3RvciA9IHR5cGVvZiBhcmcwID09ICdzdHJpbmcnICYmIGFyZzAubWF0Y2goL1xcKC4rXFwpLyk7XG5cbiAgICBpZiAoaXNTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fYXR0YWNoYWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhcmcwLm1hdGNoKC9cXCgoLispXFwpLylbMV0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZzAgPT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYXJnMCk7XG4gICAgfSBlbHNlIGlmIChhcmcwIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2F0dGFjaGFibGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZWxlbWVudCA9IGFyZzA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCAwJyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQuYXR0YWNoZWRUYWcgJiYgdGhpcy5fYXR0YWNoYWJsZSkge1xuICAgICAgY29udGV4dC5hdHRhY2hlZFRhZy5hcHBlbmQodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDApIHRoaXMuc2V0Q2hpbGRyZW4oY2hpbGRyZW4pO1xuICB9XG5cbiAgLyoqIFNldHMgdGhlIGNoaWxkcmVuLCByZW1vdmVzIHByZXZpb3VzIGNoaWxkcmVuICAqL1xuICBzZXRDaGlsZHJlbihjaGlsZHJlbjogVGFnQ2hpbGRyZW4pIHtcbiAgICB0aGlzLmVsZW1lbnQucmVwbGFjZUNoaWxkcmVuKFxuICAgICAgLi4uY2hpbGRyZW5cbiAgICAgICAgLm1hcCh0aGlzLl9zZXRDaGlsZHJlblBhcmVudC5iaW5kKHRoaXMpKVxuICAgICAgICAuZmlsdGVyKHRoaXMuX2NoaWxkcmVuRmlsdGVyUHJlZGljYXRlLmJpbmQodGhpcykpXG4gICAgICAgIC5tYXAodGhpcy5fZ2V0RWxlbWVudEZvckNoaWxkKSwgLy9cbiAgICApO1xuICAgIHRoaXMuX2NoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhcHBlbmQoLi4uY2hpbGRyZW46IFRhZ0NoaWxkcmVuKSB7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZChcbiAgICAgIC4uLmNoaWxkcmVuXG4gICAgICAgIC5tYXAodGhpcy5fc2V0Q2hpbGRyZW5QYXJlbnQuYmluZCh0aGlzKSlcbiAgICAgICAgLmZpbHRlcih0aGlzLl9jaGlsZHJlbkZpbHRlclByZWRpY2F0ZS5iaW5kKHRoaXMpKVxuICAgICAgICAubWFwKHRoaXMuX2dldEVsZW1lbnRGb3JDaGlsZCksIC8vXG4gICAgKTtcbiAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKC4uLmNoaWxkcmVuKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByZXBlbmQoLi4uY2hpbGRyZW46IFRhZ0NoaWxkcmVuKSB7XG4gICAgdGhpcy5lbGVtZW50LnByZXBlbmQoXG4gICAgICAuLi5jaGlsZHJlblxuICAgICAgICAuZmlsdGVyKHRoaXMuX2NoaWxkcmVuRmlsdGVyUHJlZGljYXRlLmJpbmQodGhpcykpXG4gICAgICAgIC5tYXAodGhpcy5fZ2V0RWxlbWVudEZvckNoaWxkKSwgLy9cbiAgICApO1xuICAgIHRoaXMuX2NoaWxkcmVuLnVuc2hpZnQoLi4uY2hpbGRyZW4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIFdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMsIGl0IHdpbGwgY2FsbCB0aGUgY29uc3VtZXIgKi9cbiAgY29uc3VtZTxUPihcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPFQ+LFxuICAgIGNvbnN1bWVyOiAoc2VsZjogQ1RhZywgbmV3VmFsdWU6IFQpID0+IHZvaWQsXG4gICkge1xuICAgIGNvbnN1bWFibGUuY2hhbmdlZCgobmV3VmFsdWUpID0+IGNvbnN1bWVyKHRoaXMsIG5ld1ZhbHVlKSk7XG4gICAgY29uc3VtZXIodGhpcywgY29uc3VtYWJsZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIGVsZW1lbnQgaXMgY3VycmVudGx5IGhpZGRlbiBpdCB3aWxsIGFkZCB0aGlzIGVsZW1lbnQgdG8gdGhlIHBhZ2Ugd2hlcmV2ZXIgaXQncyBzdXBwb3NlZCB0byBiZS5cbiAgICogSSB3aWxsIGJlIHBsYWNlZCBleGFjdGx5IGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uLCBldmVuIGlmIHRoZXJlIGFyZSBvdGhlciBlbGVtZW50cyBoaWRkZW4uXG4gICAqL1xuICBhc3luYyBzaG93KCkge1xuICAgIGlmICghdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5jbHVkZXModGhpcy5lbGVtZW50KSkge1xuICAgICAgLy8gR2V0J3MgdGhlIHBvc2l0aW9uIG9mIHRoZSBlbGVtZW50IGlmIGFsbCB0aGUgY2hpbGRyZW4gYXJlIHZpc2libGVcbiAgICAgIGNvbnN0IGV4cGVjdGVkSW5kZXggPSB0aGlzLnBhcmVudC5fY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcblxuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIHRoZSBmaXJzdCBjaGlsZCBpbiB0aGUgcGFyZW50XG4gICAgICBpZiAoZXhwZWN0ZWRJbmRleCA9PSAwKSB7XG4gICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucHJlcGVuZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIHRoZSBsYXN0IGNoaWxkIGluIHRoZSBwYXJlbnRcbiAgICAgIGVsc2UgaWYgKGV4cGVjdGVkSW5kZXggPT0gdGhpcy5wYXJlbnQuX2NoaWxkcmVuLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmQodGhpcy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSBlbGVtZW50IHNob3VsZCBiZSB0aGUgbnRoIGNoaWxkIGluIHRoZSBwYXJlbnRcbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBDYWxjdWxhdGUgaG93IG1hbnkgaGlkZGVuIGNoaWxkcmVuIGFyZSBiZWZvcmUgdGhpcyBlbGVtZW50XG4gICAgICAgIGxldCBoaWRkZW5CZWZvcmUgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gZXhwZWN0ZWRJbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLnBhcmVudC5fY2hpbGRyZW5baV07XG4gICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgQ1RhZykge1xuICAgICAgICAgICAgaWYgKGNoaWxkLl9tZXRhLmlzSGlkZGVuKSB7XG4gICAgICAgICAgICAgIGhpZGRlbkJlZm9yZSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCB0aGUgXCJyZWFsXCIgY2hpbGRyZW4gaW4gdGhlIGRvbS5cbiAgICAgICAgLy8gVGhlIGluZGV4IHRha2VzIGludG8gYWNjb3VudCB0aGUgaXRlbXMgdGhhdCBhcmUgaGlkZGVuXG4gICAgICAgIGNvbnN0IG5leHRFbCA9XG4gICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jaGlsZE5vZGVzW2V4cGVjdGVkSW5kZXggLSBoaWRkZW5CZWZvcmVdO1xuXG4gICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgbmV4dEVsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbWV0YS5pc0hpZGRlbiA9IGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEhpZGUgdGhpcyBlbGVtZW50IChyZW1vdmVkIGZyb20gRE9NKSAqL1xuICBhc3luYyBoaWRlKCkge1xuICAgIGlmICh0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmNsdWRlcyh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLnJlbW92ZSk7XG4gICAgICBhd2FpdCB0aGlzLnJlbW92ZSgpO1xuICAgICAgdGhpcy5fbWV0YS5pc0hpZGRlbiA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbnN1bWFibGUgY2hhbmdlcywgaXQgd2lsbCBjYWxsIHtpZlRydWV9IHdoZW4gdGhlIGNvbnN1bWFibGUgaXMgdHJ1ZS4gT3Ige2lmRmFsc2V9IHdoZW4gdGhlIGNvbnN1bWFibGUgaXMgZmFsc2UuXG4gICAqIElmIHtpbnZlcnR9IGlzIHNldCB0byB0cnVlLCB0aGUgY29uZGl0aW9uIHdpbGwgYmUgaW52ZXJzZWQsIGJ1dCB5b3UgY2FuIGFsc28gdXNlIHtAbGluayBkb0lmTm90fVxuICAgKi9cbiAgZG9JZihcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgaWZUcnVlOiAodmFsdWU6IGFueSkgPT4gdm9pZCxcbiAgICBpZkZhbHNlOiAodmFsdWU6IGFueSkgPT4gdm9pZCxcbiAgICBpbnZlcnQgPSBmYWxzZSxcbiAgKSB7XG4gICAgaWYgKGludmVydCkge1xuICAgICAgbGV0IHRlbXAgPSBpZlRydWU7XG4gICAgICBpZlRydWUgPSBpZkZhbHNlO1xuICAgICAgaWZGYWxzZSA9IHRlbXA7XG4gICAgfVxuXG4gICAgY29uc3QgY2FsbGJhY2sgPSAodmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSkgaWZUcnVlKHZhbHVlKTtcbiAgICAgIGVsc2UgaWZGYWxzZSh2YWx1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN1bWFibGUuY2hhbmdlZChjYWxsYmFjayk7XG4gICAgY2FsbGJhY2soY29uc3VtYWJsZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG9wb3NpdGUgb2Yge3RoaXMuZG9JZn1cbiAgICogV2hlbiB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLCBpdCB3aWxsIGNhbGwge2lmVHJ1ZX0gaWYgdGhlIGNvbnN1bWFibGUgaXMgZmFsc2UuIE9yIHtpZkZhbHNlfSBpZiB0aGUgY29uc3VtYWJsZSBpcyB0cnVlLlxuICAgKi9cbiAgZG9JZk5vdChcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgaWZUcnVlOiAodmFsdWU6IGFueSkgPT4gdm9pZCxcbiAgICBpZkZhbHNlOiAodmFsdWU6IGFueSkgPT4gdm9pZCxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9JZihjb25zdW1hYmxlLCBpZlRydWUsIGlmRmFsc2UsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhpcyBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIHRydXRoeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiBJZiB7aW52ZXJ0fSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNvbmRpdGlvbiB3aWxsIGJlIGludmVyc2VkLCBidXQgeW91IGNhbiBhbHNvIHVzZSB7QGxpbmsgaGlkZUlmTm90fVxuICAgKi9cbiAgaGlkZUlmKGNvbnN1bWFibGU6IENvbnN1bWFibGU8Ym9vbGVhbiB8IG51bWJlcj4sIGludmVydCA9IGZhbHNlKSB7XG4gICAgY29uc3QgaGFuZGxlSGlkZSA9ICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBjb3JyZWN0ZWRWYWx1ZSA9IGludmVydCA/ICF2YWx1ZSA6ICEhdmFsdWU7XG4gICAgICB0aGlzLl9tZXRhLmlzSGlkZGVuID0gY29ycmVjdGVkVmFsdWU7XG5cbiAgICAgIGlmICghdGhpcy5wYXJlbnQpIHJldHVybjtcbiAgICAgIGlmICghY29ycmVjdGVkVmFsdWUpIHRoaXMuc2hvdygpO1xuICAgICAgZWxzZSB0aGlzLmhpZGUoKTtcbiAgICB9O1xuXG4gICAgY29uc3VtYWJsZS5jaGFuZ2VkKGhhbmRsZUhpZGUpO1xuICAgIGhhbmRsZUhpZGUoY29uc3VtYWJsZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogSGlkZSB0aGlzIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgZmFsc3kuIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy4gKi9cbiAgaGlkZUlmTm90KGNvbnN1bWFibGU6IENvbnN1bWFibGU8Ym9vbGVhbiB8IG51bWJlcj4pIHtcbiAgICByZXR1cm4gdGhpcy5oaWRlSWYoY29uc3VtYWJsZSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjbGFzc2VzIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIHRydXRoeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiBZb3UgY2FuIHBhc3MgaW4gYW4gYXJyYXkgb2YgY2xhc3Nlcywgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBsaXN0IG9mIGNsYXNzZXMuXG4gICAqIElmIHtpbnZlcnR9IGlzIHNldCB0byB0cnVlLCB0aGUgY29uZGl0aW9uIHdpbGwgYmUgaW52ZXJzZWQsIGJ1dCB5b3UgY2FuIGFsc28gdXNlIHtAbGluayBjbGFzc0lmTm90fVxuICAgKi9cbiAgY2xhc3NJZihcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgY2xhc3Nlczogc3RyaW5nW10gfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZ1tdKSxcbiAgICBpbnZlcnQgPSBmYWxzZSxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9JZihcbiAgICAgIGNvbnN1bWFibGUsXG4gICAgICAoKSA9PiB0aGlzLmFkZENsYXNzKC4uLmNhbGxPclJldHVybihjbGFzc2VzLCB0aGlzKSksXG4gICAgICAoKSA9PiB0aGlzLnJtQ2xhc3MoLi4uY2FsbE9yUmV0dXJuKGNsYXNzZXMsIHRoaXMpKSxcbiAgICAgIGludmVydCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgY2xhc3NlcyB0byB0aGUgZWxlbWVudCB3aGVuIHRoZSBjb25zdW1lciBpcyBmYWxzeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiBZb3UgY2FuIHBhc3MgaW4gYW4gYXJyYXkgb2YgY2xhc3Nlcywgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBsaXN0IG9mIGNsYXNzZXMuXG4gICAqIEZvciB0aGUgb3Bvc2l0ZSB5b3UgY2FuIGFsc28gdXNlIHtAbGluayBjbGFzc0lmfVxuICAgKi9cbiAgY2xhc3NJZk5vdChcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgY2xhc3Nlczogc3RyaW5nW10gfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZ1tdKSxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xhc3NJZihjb25zdW1hYmxlLCBjbGFzc2VzLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHt0ZXh0fSB3aGVuIHRoZSBjb25zdW1lciBpcyB0cnVlLCBhbmQgc2V0cyB7ZWxzZVRleHQgKGRlZmF1bHQ9JycpfSB3aGVuIHRoZSBjb25zdW1lciBpcyBmYWxzZS5cbiAgICogQm90aCB7dGV4dH0gYW5kIHtlbHNlVGV4dH0gY2FuIGJlIGEgc3RyaW5nIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nLlxuICAgKiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIElmIHtpbnZlcnR9IGlzIHNldCB0byB0cnVlLCB0aGUgY29uZGl0aW9uIHdpbGwgYmUgaW52ZXJzZWQsIGJ1dCB5b3UgY2FuIGFsc28gdXNlIHtAbGluayB0ZXh0SWZOb3R9XG4gICAqL1xuICB0ZXh0SWYoXG4gICAgY29uc3VtYWJsZTogQ29uc3VtYWJsZTxhbnk+LFxuICAgIHRleHQ6IHN0cmluZyB8ICgoc2VsZjogQ1RhZykgPT4gc3RyaW5nKSxcbiAgICBlbHNlVGV4dDogc3RyaW5nIHwgKChzZWxmOiBDVGFnKSA9PiBzdHJpbmcpID0gJycsXG4gICAgaW52ZXJ0ID0gZmFsc2UsXG4gICkge1xuICAgIHJldHVybiB0aGlzLmRvSWYoXG4gICAgICBjb25zdW1hYmxlLFxuICAgICAgKCkgPT4gdGhpcy50ZXh0KGNhbGxPclJldHVybih0ZXh0LCB0aGlzKSksXG4gICAgICAoKSA9PiB0aGlzLnRleHQoY2FsbE9yUmV0dXJuKGVsc2VUZXh0LCB0aGlzKSksXG4gICAgICBpbnZlcnQsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHt0ZXh0fSB3aGVuIHRoZSBjb25zdW1lciBpcyBmYWxzeSwgYW5kIHNldHMge2Vsc2VUZXh0IChkZWZhdWx0PScnKX0gd2hlbiB0aGUgY29uc3VtZXIgaXMgdHJ1dGh5LlxuICAgKiBCb3RoIHt0ZXh0fSBhbmQge2Vsc2VUZXh0fSBjYW4gYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcuXG4gICAqIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy5cbiAgICovXG4gIHRleHRJZk5vdChcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgdGV4dDogc3RyaW5nIHwgKChzZWxmOiBDVGFnKSA9PiBzdHJpbmcpLFxuICAgIGVsc2VUZXh0OiBzdHJpbmcgfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZykgPSAnJyxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMudGV4dElmKGNvbnN1bWFibGUsIHRleHQsIGVsc2VUZXh0LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYXR0cmlidXRlIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIHRydXRoeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiB7dmFsdWV9IGNhbiBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZy5cbiAgICogSWYge2ludmVydH0gaXMgc2V0IHRvIHRydWUsIHRoZSBjb25kaXRpb24gd2lsbCBiZSBpbnZlcnNlZCwgYnV0IHlvdSBjYW4gYWxzbyB1c2Uge0BsaW5rIGF0dHJJZk5vdH1cbiAgICovXG4gIGF0dHJJZihcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgYXR0cjogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcgfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZykgPSAnJyxcbiAgICBpbnZlcnQgPSBmYWxzZSxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9JZihcbiAgICAgIGNvbnN1bWFibGUsXG4gICAgICAoKSA9PiB0aGlzLmFkZEF0dHIoYXR0ciwgY2FsbE9yUmV0dXJuKHZhbHVlLCB0aGlzKSksXG4gICAgICAoKSA9PiB0aGlzLnJtQXR0cihhdHRyKSxcbiAgICAgIGludmVydCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhdHRyaWJ1dGUgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgZmFsc3kuIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy5cbiAgICoge3ZhbHVlfSBjYW4gYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcuXG4gICAqIElmIHtpbnZlcnR9IGlzIHNldCB0byB0cnVlLCB0aGUgY29uZGl0aW9uIHdpbGwgYmUgaW52ZXJzZWRcbiAgICovXG4gIGF0dHJJZk5vdChcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgYXR0cjogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcgfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZykgPSAnJyxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cklmKGNvbnN1bWFibGUsIGF0dHIsIHZhbHVlLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlIHRoaXMgZWxlbWVudCB3aGVuIHRoZSBjb25zdW1lciBpcyB0cnV0aHkuIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy5cbiAgICogSWYge2ludmVydH0gaXMgc2V0IHRvIHRydWUsIHRoZSBjb25kaXRpb24gd2lsbCBiZSBpbnZlcnNlZCwgYnV0IHlvdSBjYW4gYWxzbyB1c2Uge0BsaW5rIGRpc2FibGVJZk5vdH1cbiAgICovXG4gIGRpc2FibGVJZihjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sIGludmVydCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cklmKGNvbnN1bWFibGUsICdkaXNhYmxlZCcsICcnLCBpbnZlcnQpO1xuICB9XG5cbiAgLyoqIERpc2FibGUgdGhpcyBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIGZhbHN5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuICovXG4gIGRpc2FibGVJZk5vdChjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4pIHtcbiAgICByZXR1cm4gdGhpcy5kaXNhYmxlSWYoY29uc3VtYWJsZSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHN0eWxlIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGNvbnN1bWVyIGlzIHRydXRoeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiBJZiB7aW52ZXJ0fSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNvbmRpdGlvbiB3aWxsIGJlIGludmVyc2VkLCBidXQgeW91IGNhbiBhbHNvIHVzZSB7QGxpbmsgc3R5bGVJZk5vdH1cbiAgICoge3ZhbHVlfSBjYW4gYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcuXG4gICAqL1xuICBzdHlsZUlmKFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBzdHlsZTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcgfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZykgPSAnJyxcbiAgICBpbnZlcnQgPSBmYWxzZSxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9JZihcbiAgICAgIGNvbnN1bWFibGUsXG4gICAgICAoKSA9PiB0aGlzLmFkZFN0eWxlKHN0eWxlLCBjYWxsT3JSZXR1cm4odmFsdWUsIHRoaXMpKSxcbiAgICAgICgpID0+IHRoaXMucm1TdHlsZShzdHlsZSksXG4gICAgICBpbnZlcnQsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgc3R5bGUgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgZmFsc3kuIFVwZGF0ZXMgd2hlbmV2ZXIgdGhlIGNvbnN1bWFibGUgY2hhbmdlcy5cbiAgICoge3ZhbHVlfSBjYW4gYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcuXG4gICAqL1xuICBzdHlsZUlmTm90KFxuICAgIGNvbnN1bWFibGU6IENvbnN1bWFibGU8YW55PixcbiAgICBzdHlsZTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcgfCAoKHNlbGY6IENUYWcpID0+IHN0cmluZykgPSAnJyxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGVJZihjb25zdW1hYmxlLCBzdHlsZSwgdmFsdWUsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBtdWx0aXBsZSBzdHlsZXMgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgY29uc3VtZXIgaXMgdHJ1dGh5LiBVcGRhdGVzIHdoZW5ldmVyIHRoZSBjb25zdW1hYmxlIGNoYW5nZXMuXG4gICAqIHtzdHlsZXN9IGNhbiBiZSBhIHtAbGluayBTdHlsZU1hcH0gb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB7QGxpbmsgU3R5bGVNYXB9LlxuICAgKiBJZiB7aW52ZXJ0fSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNvbmRpdGlvbiB3aWxsIGJlIGludmVyc2VkLCBidXQgeW91IGNhbiBhbHNvIHVzZSB7QGxpbmsgc3R5bGVzSWZOb3R9XG4gICAqL1xuICBzdHlsZXNJZihcbiAgICBjb25zdW1hYmxlOiBDb25zdW1hYmxlPGFueT4sXG4gICAgc3R5bGVzOiBTdHlsZU1hcCB8ICgoc2VsZjogQ1RhZykgPT4gU3R5bGVNYXApLFxuICAgIGludmVydCA9IGZhbHNlLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5kb0lmKFxuICAgICAgY29uc3VtYWJsZSxcbiAgICAgICgpID0+IHRoaXMuc2V0U3R5bGUoY2FsbE9yUmV0dXJuKHN0eWxlcywgdGhpcykpLFxuICAgICAgKCkgPT4gdGhpcy5ybVN0eWxlKC4uLk9iamVjdC5rZXlzKHN0eWxlcykpLFxuICAgICAgaW52ZXJ0LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG11bHRpcGxlIHN0eWxlcyB0byB0aGUgZWxlbWVudCB3aGVuIHRoZSBjb25zdW1lciBpcyBmYWxzeS4gVXBkYXRlcyB3aGVuZXZlciB0aGUgY29uc3VtYWJsZSBjaGFuZ2VzLlxuICAgKiB7c3R5bGVzfSBjYW4gYmUgYSB7QGxpbmsgU3R5bGVNYXB9IG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEge0BsaW5rIFN0eWxlTWFwfS5cbiAgICogRm9yIHRoZSBvcG9zaXRlIHVzZSAge0BsaW5rIHN0eWxlc0lmfVxuICAgKi9cbiAgc3R5bGVzSWZOb3QoXG4gICAgY29uc3VtYWJsZTogQ29uc3VtYWJsZTxhbnk+LFxuICAgIHN0eWxlczogU3R5bGVNYXAgfCAoKHNlbGY6IENUYWcpID0+IFN0eWxlTWFwKSxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGVzSWYoY29uc3VtYWJsZSwgc3R5bGVzLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gYW4gZXZlbnQgb24gdGhlIGVsZW1lbnQuIExpa2UgYWRkRXZlbnRMaXN0ZW5lci5cbiAgICovXG4gIGxpc3RlbjxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcD4oXG4gICAgdGFnOiBDVGFnLFxuICAgIGV2dDogSyxcbiAgICBjb25zdW1lcjogKHNlbGY6IENUYWcsIG90aGVyOiBDVGFnLCBldnQ6IEhUTUxFbGVtZW50RXZlbnRNYXBbS10pID0+IHZvaWQsXG4gICkge1xuICAgIHRhZy5vbihldnQsIChvdGhlciwgZXZ0KSA9PiBjb25zdW1lcih0aGlzLCBvdGhlciwgZXZ0KSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogSWYge25ld1RleHR9IGlzIHByb3ZpZGVkLCBpdCBzZXRzIHRoZSBgdGV4dENvbnRlbnRgIG9mIHRoZSBlbGVtZW50LlxuICAgKiBJZiB7bmV3VGV4dH0gaXMgcHJvdmlkZWQsIGFuZCBhIHN0YXRlIGlzIHByb3ZpZGVkLiBJdCB3aWxsIHVzZSB0aGUge25ld1RleHR9IGFzIGEgdGVtcGxhdGUsXG4gICAqIHRoYXQgd2lsbCBiZSBpbnRlcnBvbGF0ZWQgd2l0aCB0aGUgdmFsdWVzIGluIHRoZSBzdGF0ZSwgZWFjaCB0aW1lIHRoZSBzdGF0ZSBjaGFuZ2VzLiBJdCBhY3RzIGxpa2Uge0BsaW5rIHRleHR9XG4gICAqXG4gICAqIElmIG5vIGFyZ3VtZW50IGlzIHByb3ZpZGVkLCBpdCByZXR1cm5zIHRoZSBgdGV4dENvbnRlbnRgIG9mIHRoZSBlbGVtZW50XG4gICAqL1xuICB0ZXh0PFQgPSBzdHJpbmcgfCBudWxsPihcbiAgICBuZXdUZXh0PzogVCxcbiAgICBzdD86IFN0YXRlPGFueT4sXG4gICk6IFQgZXh0ZW5kcyBzdHJpbmcgPyBDVGFnIDogc3RyaW5nIHtcbiAgICBpZiAobmV3VGV4dCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnRleHRDb250ZW50IGFzIGFueTtcbiAgICB9XG5cbiAgICBpZiAoc3QgJiYgbmV3VGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0Q2hpbGRyZW4oW3RleHQobmV3VGV4dCBhcyBzdHJpbmcsIHN0KV0pIGFzIGFueTtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQgPSBuZXdUZXh0IGFzIHN0cmluZztcblxuICAgIHJldHVybiB0aGlzIGFzIGFueTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmUgdGhlIGVsZW1lbnQgaW4gYSBzaW5nbGUgY2FsbCBieSBwYXNzaW5nIEBwYXJhbSB7VGFnQ29uZmlnfSBjb25maWdcbiAgICogaW5zdGVhZCBvZiBoYXZpbmcgdG8gY2FsbCBhIG1ldGhvZCBmb3IgZWFjaCBwcm9wZXJ0eSB5b3Ugd2FudCB0byBjaGFuZ2VzXG4gICAqL1xuICBjb25maWcoY29uZmlnOiBUYWdDb25maWcpIHtcbiAgICBpZiAoY29uZmlnLmF0dHIpIHtcbiAgICAgIHRoaXMuc2V0QXR0cnMoY29uZmlnLmF0dHIpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmNsYXNzTGlzdCkge1xuICAgICAgdGhpcy5hZGRDbGFzcyguLi5jb25maWcuY2xhc3NMaXN0KTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5jbGFzc05hbWUpIHtcbiAgICAgIHRoaXMuY2xhc3NOYW1lKGNvbmZpZy5jbGFzc05hbWUpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnN0eWxlKSB7XG4gICAgICB0aGlzLnNldFN0eWxlKGNvbmZpZy5zdHlsZSk7XG4gICAgfVxuICAgIGlmIChjb25maWcudGV4dCkge1xuICAgICAgdGhpcy50ZXh0KGNvbmZpZy50ZXh0KTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy52YWx1ZSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZShjb25maWcudmFsdWUpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmNoaWxkcmVuKSB7XG4gICAgICB0aGlzLmFwcGVuZCguLi5jb25maWcuY2hpbGRyZW4pO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm9uKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBjb25maWcub24pIHtcbiAgICAgICAgdGhpcy5vbihrZXksIGNvbmZpZy5vbltrZXldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBBZGQgY2xhc3NlcyB0byB0aGUgZWxlbWVudHMgY2xhc3MgbGlzdCAqL1xuICBhZGRDbGFzcyguLi5jbGFzc05hbWVzOiBzdHJpbmdbXSkge1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzTmFtZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIFNldCB0aGUgZWxlbWVudHMgY2xhc3MgbmFtZSAqL1xuICBjbGFzc05hbWUoY2xhc3NOYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIFJlbW92ZSBjbGFzc2VzIGZyb20gY2xhc3MgbGlzdCAqL1xuICBybUNsYXNzKC4uLmNsYXNzTmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIGNsYXNzTmFtZXMpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGtleSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIENoZWNrIGlmIGNsYXNzZXMgYXJlIHByZXNlbnQgaW4gdGhpcyBlbGVtZW50ICovXG4gIGhhc0NsYXNzKC4uLmNsYXNzTmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIGNsYXNzTmFtZXMpIHtcbiAgICAgIGlmICghdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhrZXkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogUmVwbGFjZSBhIGNsYXNzIHdpdGggYW5vdGhlciAqL1xuICByZXBsYWNlQ2xhc3ModGFyZ2V0Q2xhc3M6IHN0cmluZywgcmVwbGFjZUNsYXNzOiBzdHJpbmcpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlcGxhY2UodGFyZ2V0Q2xhc3MsIHJlcGxhY2VDbGFzcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogVG9nZ2xlIGEgY2xhc3MuIElmIGl0J3MgcHJlc2VudCBpdCdzIHJlbW92ZWQsIGlmIGl0J3Mgbm90IHByZXNlbnQgaXRzIGFkZGVkLiAqL1xuICB0b2dnbGVDbGFzcyh0YXJnZXRDbGFzczogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuaGFzQ2xhc3ModGFyZ2V0Q2xhc3MpKSB7XG4gICAgICB0aGlzLnJtQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZENsYXNzKHRhcmdldENsYXNzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQWRkIGEgc2luZ2xlIHN0eWxlICovXG4gIGFkZFN0eWxlPEsgZXh0ZW5kcyBDc3NQcm9wZXJ0eT4ocHJvcGVydHk6IEssIHZhbHVlOiBQaWNrUHJvcGVydHlWYWx1ZXM8Sz4pIHtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGVbcHJvcGVydHkgYXMgc3RyaW5nXSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIFNldCBtdWx0aXBsZSBzdHlsZXMgYXQgb25jZSAqL1xuICBzZXRTdHlsZShzdHlsZXM6IFN0eWxlTWFwKSB7XG4gICAgZm9yIChsZXQga2V5IGluIHN0eWxlcykge1xuICAgICAgdGhpcy5hZGRTdHlsZShrZXksIHN0eWxlc1trZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogUmVtb3ZlIHN0eWxlcyAqL1xuICBybVN0eWxlKC4uLnN0eWxlTmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIHN0eWxlTmFtZXMpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBDaGVjayBpZiB0aGlzIGVsZW1lbnQgaGFzIHN0eWxlcyAqL1xuICBoYXNTdHlsZTxLIGV4dGVuZHMgQ3NzUHJvcGVydHk+KC4uLnN0eWxlczogS1tdKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIHN0eWxlcykge1xuICAgICAgaWYgKCF0aGlzLmVsZW1lbnQuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShjYW1lbFRvRGFzaChrZXkpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEFkZHMgYSBzZXQgb2YgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudCAqL1xuICBzZXRBdHRycyhhdHRyczogeyBbazogc3RyaW5nXTogc3RyaW5nIH0pIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgIHRoaXMuYWRkQXR0cihrZXksIGF0dHJzW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBBZGRzIGEgc2luZ2xlIGF0dHJpYnV0ZSB0byB0aGUgZWxlbWVudCAqL1xuICBhZGRBdHRyKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNba2V5XSA9IHZhbHVlO1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogUmVtb3ZlIGF0dHJpYnV0ZXMgZnJvbSB0aGUgZWxlbWVudCAqL1xuICBybUF0dHIoLi4uYXR0cnM6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIGF0dHJzKSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICBkZWxldGUgdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQ2hlY2sgaWYgdGhpcyBlbGVtZW50IGhhcyBhdHRyaWJ1dGVzICovXG4gIGhhc0F0dHIoLi4uYXR0cjogc3RyaW5nW10pIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgYXR0cikge1xuICAgICAgaWYgKCEoa2V5IGluIHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEdldCBhbiBhdHRyaWJ1dGVzIHZhbHVlICovXG4gIGdldEF0dHIoYXR0cjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzW2F0dHJdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB7QGxpbmsgQ29uc3VtYWJsZX0gdGhhdCBmaXJlcyB3aGVuIHRoZSBFdmVudCB7QHBhcmFtIGV2dE5hbWV9IGlzIGZpcmVkIGluIHRoaXMgZWxlbWVudFxuICAgKlxuICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBmbn0gd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGxpc3RlbmVycyBvZiB0aGUge0BsaW5rIENvbnN1bWFibGV9XG4gICAqL1xuICB3aGVuPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwPihcbiAgICBldnROYW1lOiBLIHwgc3RyaW5nLFxuICAgIGZuOiAoc2VsZjogQ1RhZykgPT4gYW55LFxuICApOiBDb25zdW1hYmxlIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhbmdlZDogKGxpc3RlbmVyKSA9PiB7XG4gICAgICAgIHRoaXMub24oZXZ0TmFtZSwgKCkgPT4ge1xuICAgICAgICAgIGxpc3RlbmVyKGZuKHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvKiogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBhIHBhcnRpY3VsYXIgZXZlbnQgKi9cbiAgb248SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXA+KFxuICAgIGV2dE5hbWU6IEsgfCBzdHJpbmcsXG4gICAgZm46ICh0YWc6IENUYWcsIGV2dDogSFRNTEVsZW1lbnRFdmVudE1hcFtLXSkgPT4gdm9pZCxcbiAgKSB7XG4gICAgaWYgKGZuKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldnROYW1lLCAoZXZ0OiBIVE1MRWxlbWVudEV2ZW50TWFwW0tdKSA9PiB7XG4gICAgICAgIHJldHVybiBmbih0aGlzLCBldnQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEFkZCBhbiBldmVudCBsaXN0ZW5lciBmb3IgYSBwYXJ0aWN1bGFyIGV2ZW50IHRoYXQgd2lsbCBvbmx5IGZpcmUgb25jZSAqL1xuICBvbmNlPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwPihcbiAgICBldnROYW1lOiBLIHwgc3RyaW5nLFxuICAgIGZuOiAodGFnOiBDVGFnLCBldnQ6IEhUTUxFbGVtZW50RXZlbnRNYXBbS10pID0+IHZvaWQsXG4gICkge1xuICAgIGlmIChmbikge1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSAoZXZ0OiBIVE1MRWxlbWVudEV2ZW50TWFwW0tdKSA9PiB7XG4gICAgICAgIGZuKHRoaXMsIGV2dCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2dE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2dE5hbWUsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQWRkIGEgKipjbGljayoqIGV2ZW50IGxpc3RlbmVyICovXG4gIGNsaWNrZWQoZm46ICh0YWc6IENUYWcsIGV2dDogTW91c2VFdmVudCkgPT4gdm9pZCkge1xuICAgIHJldHVybiB0aGlzLm9uKCdjbGljaycsIGZuKTtcbiAgfVxuXG4gIC8qKiBBZGQgYSAqKmtleXByZXNzKiogZXZlbnQgbGlzdGVuZXIgKi9cbiAga2V5UHJlc3NlZChmbjogKHRhZzogQ1RhZywgZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkLCBrZXk/OiBzdHJpbmcpIHtcbiAgICBpZiAoa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5vbigna2V5cHJlc3MnLCAoXywgZXZ0KSA9PiB7XG4gICAgICAgIGlmIChldnQuY29kZSA9PSBrZXkgfHwgZXZ0LmtleSA9PSBrZXkpIHtcbiAgICAgICAgICBmbih0aGlzLCBldnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5vbigna2V5cHJlc3MnLCBmbik7XG4gIH1cblxuICAvKiogQWRkIGEgKipjaGFuZ2UqKiBldmVudCBsaXN0ZW5lciAqL1xuICBjaGFuZ2VkKGZuOiAodGFnOiBDVGFnLCBldnQ6IEV2ZW50KSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIHRoaXMub24oJ2NoYW5nZScsIGZuKTtcbiAgfVxuXG4gIC8qKiBBZGQgYSAqKnN1Ym1pdCoqIGV2ZW50IGxpc3RlbmVyICovXG4gIHN1Ym1pdGVkKGZuOiAodGFnOiBDVGFnLCBldnQ6IFN1Ym1pdEV2ZW50KSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIHRoaXMub24oJ3N1Ym1pdCcsIGZuKTtcbiAgfVxuXG4gIC8qKiBSZW1vdmUgZWxlbWVudCBmcm9tIHRoZSBET00gKi9cbiAgYXN5bmMgcmVtb3ZlKCkge1xuICAgIGF3YWl0IHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGB2YWx1ZWAgb2YgdGhlIGVsZW1lbnQuIElmIHlvdSBhcmUgZ2V0dGluZyB0aGUgdmFsdWUgYW5kIHRoZW4gY2xlYXJpbmcsIGNvbnNpZGVyIHVzaW5nIHtAbGluayBjb25zdW1lVmFsdWV9XG4gICAqL1xuICBjbGVhcigpIHtcbiAgICAodGhpcy5lbGVtZW50IGFzIGFueSkudmFsdWUgPSAnJztcbiAgICAvLyBUcmlnZ2VyIGlucHV0IGV2ZW50LCBzbyBjbGVhcmluZyBpcyB0cmVhdGVkIGFzIGlucHV0IVxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBJbnB1dEV2ZW50KCdpbnB1dCcpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBEaXNhYmxlIHRoZSBlbGVtZW50ICovXG4gIGRpc2FibGUoKSB7XG4gICAgdGhpcy5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICB0aGlzLmFkZEF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogRW5hYmxlIHRoZSBlbGVtZW50ICovXG4gIGVuYWJsZSgpIHtcbiAgICB0aGlzLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBTZXQgd2hldGhlciB0aGUgZWxlbWVudCBzaG91bGQgYmUgZGlzYWJsZWQgb3Igbm90ICovXG4gIHNldERpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICB0aGlzLmFkZEF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm1BdHRyKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBRdWVyeSBhIGNoaWxkIGluIHRoaXMgZWxlbWVudCAoaW4gdGhlIERPTSkgKi9cbiAgcShzZWxlY3Rvcik6IENUYWcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBuZXcgQ1RhZyhlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICAvKiogRmluZCBhIGNoaWxkIGluIHRoaXMgZWxlbWVudCAoaW4gdGhlIERPTSBvciBOT1QpICovXG4gIGZpbmQocHJlZGljYXRlOiAoZWw6IFRhZ0NoaWxkKSA9PiBib29sZWFuKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLl9jaGlsZHJlbikge1xuICAgICAgaWYgKHByZWRpY2F0ZShjaGlsZCkpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZpbmRUYWcocHJlZGljYXRlOiAoZWw6IENUYWcpID0+IGJvb2xlYW4pIHtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuX2NoaWxkcmVuKSB7XG4gICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBDVGFnICYmIHByZWRpY2F0ZShjaGlsZCkpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3NldENoaWxkcmVuUGFyZW50KGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENUYWcpIGl0ZW0ucGFyZW50ID0gdGhpcztcbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIHByaXZhdGUgX2NoaWxkcmVuRmlsdGVyUHJlZGljYXRlKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENUYWcgJiYgaXRlbS5fbWV0YS5pc0hpZGRlbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEVsZW1lbnRGb3JDaGlsZChjbDogVGFnQ2hpbGQpOiBOb2RlIHtcbiAgICBpZiAodHlwZW9mIGNsID09PSAnc3RyaW5nJykgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNsKTtcbiAgICBpZiAoY2wgaW5zdGFuY2VvZiBDVGFnKSByZXR1cm4gY2wuZWxlbWVudDtcbiAgICBpZiAoY2wgaW5zdGFuY2VvZiBOb2RlKSByZXR1cm4gY2w7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBVcGRhdGUgY2FjaGVkIGNoaWxkIG5vZGVzIHdoZW5ldmVyIHRoaXMgZWxlbWVudHMgY2hpbGRzIGNoYW5nZVxuICAvLyBUaGlzIG1ha2VzIGl0IGEgbG90IGZhc3RlciB0byBnZXQgY2hpbGRyZW4uXG4gIC8vIElmIHRoZSBjaGlsZHJlbiBoYXZlIG5vdCBjaGFuZ2VkLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0IHRoZSBjaGlsZHJlbiwgdXNlIHRoZSBwcmV2aW91cyBvbmVzXG4gIHByaXZhdGUgX211dGF0aW9uT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXI7XG4gIHByaXZhdGUgX2dldEVsZW1lbnRDaGlsZHJlbihlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5fbXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgdGhpcy5fbXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7XG4gICAgICAgIHRoaXMuX3NldENhY2hlZENoaWxkcmVuKGVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50LCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICAgIHRoaXMuX3NldENhY2hlZENoaWxkcmVuKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3NldENhY2hlZENoaWxkcmVuKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IGNoaWxkTm9kZXMgPSBlbGVtZW50LmNoaWxkTm9kZXM7XG5cbiAgICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgICBsZXQgaSA9IGNoaWxkTm9kZXMubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNoaWxkTm9kZXNbaV0ubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICBjaGlsZHJlbi51bnNoaWZ0KGNoaWxkTm9kZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NhY2hlZENoaWxkcmVuID0gY2hpbGRyZW47XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbiBkbyB0aGUgZm9sbG93aW5nIGJhc2VkIG9uIHRoZSBmaXJzdCBhcmd1bWVudDpcbiAqICogY3JlYXRlIGEgdGFnIGlmIHlvdSBwcm92aWRlIGEgdGFnIG5hbWU6IChgZGl2YCwgYGFiYnJgLCBgY3VzdG9tLXRhZ2AsIC4uLiksXG4gKiAqIHdyYXAgYXJvdW5kIGFuIGV4aXN0aW5nIGVsZW1lbnQgaW4gdGhlIHBhZ2UgaWYgeW91IHBhc3MgaW4gYSBzZWxlY3RvcjogKGAnKGJvZHkpJ2AsIGAnKCNpZCknYCwgYCcoLmNsYXNzKSdgKSwgYW55IHNlbGVjdG9yIGlzIGFsbG93ZWQuXG4gKiAqIHdyYXAgYXJvdW5kIGFuIGVsZW1lbnQgcGFzc2VkIGluXG4gKlxuICogVGhlbiBpdCBjYW4gcmVjZWl2ZSBhIGxpc3Qgb2YgY2hpbGRyZW4gdG8gYmUgYWRkZWQuXG4gKiBBbmQgcmVjZWl2ZXMgYSB0aGlyZCBhcmd1bWVudCBmb3IgYXR0YWNoaW5nIHRoaXMgdGFnIHRvIHRoZSBjdXJyZW50bHkgYXR0YWNoIHRhZyAoe0BsaW5rIGF0dGFjaH0pXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiB0YWcoJ2RpdicpO1xuICogdGFnKCcoYm9keSknKTtcbiAqIHRhZygnKC5zb21lY2xhc3MpJyk7XG4gKiB0YWcoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvbWV0aGluZycpKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGFnKFxuICBhcmcwOiBzdHJpbmcgfCBIVE1MRWxlbWVudCxcbiAgY2hpbGRyZW46IFRhZ0NoaWxkcmVuID0gW10sXG4gIGF0dGFjaDogYm9vbGVhbiA9IGZhbHNlLFxuKSB7XG4gIHJldHVybiBuZXcgQ1RhZyhhcmcwLCBjaGlsZHJlbiwgYXR0YWNoKTtcbn1cblxuLyoqXG4gKiBXaWxsIGNhbGwge29uU3RhcnR9IHdoZW4gdGhlIGVsZW1lbnQgaXMgYWRkZWQgdG8gdGhlIERPTS5cbiAqIEFuZCB3aWxsIGNhbGwge29uUmVtb3ZlfSB3aGVuIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb25MaWZlY3ljbGUoXG4gIHRhZzogQ1RhZyxcbiAgb25TdGFydDogKHRhZzogQ1RhZywgb2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIpID0+IFByb21pc2U8YW55PiB8IHZvaWQsXG4gIG9uUmVtb3ZlOiAodGFnOiBDVGFnLCBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcikgPT4gdm9pZCxcbiAgYmVmb3JlUmVtb3ZlPzogKHRhZzogQ1RhZykgPT4gUHJvbWlzZTxib29sZWFuPiB8IHZvaWQsXG4pIHtcbiAgbGV0IG9ic2VydmluZ1BhcmVudCA9IGZhbHNlO1xuXG4gIGlmIChiZWZvcmVSZW1vdmUpIHtcbiAgICBjb25zdCB0ZW1wRWxSZW1vdmUgPSB0YWcuZWxlbWVudC5yZW1vdmU7XG4gICAgdGFnLmVsZW1lbnQucmVtb3ZlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2VsZW1lbnQucmVtb3ZlJyk7XG4gICAgICBjb25zdCByZXN1bHQgPSBiZWZvcmVSZW1vdmUodGFnKTtcbiAgICAgIGlmICghcmVzdWx0IHx8IChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlICYmIChhd2FpdCByZXN1bHQpKSkge1xuICAgICAgICB0ZW1wRWxSZW1vdmUuY2FsbCh0YWcuZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZygnZWxlbWVudC5yZW1vdmUgZW5kJyk7XG4gICAgfTtcbiAgfVxuICBpZiAob25TdGFydCkge1xuICAgIGNvbnN0IHRlbXBPblN0YXJ0ID0gdGFnLnNob3c7XG4gICAgdGFnLnNob3cgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnZWxlbWVudC5zaG93Jyk7XG4gICAgICBjb25zdCByZXN1bHQgPSB0ZW1wT25TdGFydC5jYWxsKHRhZyk7XG4gICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH1cblxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGFzeW5jIChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7XG4gICAgbGV0IGhhc0JlZW5BZGRlZCA9IGZhbHNlO1xuICAgIGxldCBoYXNCZWVuUmVtb3ZlZCA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgbXV0IG9mIG11dGF0aW9ucykge1xuICAgICAgaWYgKG9uU3RhcnQgJiYgQXJyYXkuZnJvbShtdXQuYWRkZWROb2RlcykuaW5jbHVkZXModGFnLmVsZW1lbnQpKSB7XG4gICAgICAgIGhhc0JlZW5BZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAob25SZW1vdmUgJiYgQXJyYXkuZnJvbShtdXQucmVtb3ZlZE5vZGVzKS5pbmNsdWRlcyh0YWcuZWxlbWVudCkpIHtcbiAgICAgICAgaGFzQmVlblJlbW92ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYXNCZWVuQWRkZWQgJiYgb25TdGFydCkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gb25TdGFydCh0YWcsIG9ic2VydmVyKTtcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIGF3YWl0IHJlc3VsdDtcbiAgICAgIH1cblxuXG4gICAgICAvLyBXaGVuIGVsZW1lbnQgaXMgYWRkZWQsIGNoYW5nZSBvYnNlcnZlciB0byBvYnNlcnZlIHBhcmVudCBpbnN0ZWFkIG9mIGJvZHlcbiAgICAgIC8vIEltcHJvdmUgcGVyZm9ybWFuY2UsIGFzIHdlIGp1c3QgbmVlZCB0byBrbm93IGlmIGl0J3MgYWRkZWQgb3IgcmVtb3ZlZCBmcm9tIHRoZSBwYXJlbnQhXG4gICAgICBpZiAoIW9ic2VydmluZ1BhcmVudCkge1xuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGFnLmVsZW1lbnQucGFyZW50RWxlbWVudCwgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgICAgIG9ic2VydmluZ1BhcmVudCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhc0JlZW5SZW1vdmVkICYmIG9uUmVtb3ZlKSB7XG4gICAgICBvblJlbW92ZSh0YWcsIG9ic2VydmVyKTtcbiAgICB9XG4gIH0pO1xuXG4gIG9ic2VydmVyLm9ic2VydmUodGFnLnBhcmVudD8uZWxlbWVudCA/PyBkb2N1bWVudC5ib2R5LCB7XG4gICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgIHN1YnRyZWU6IHRydWUsXG4gIH0pO1xuXG4gIHJldHVybiBvYnNlcnZlcjtcbn1cblxuLyoqXG4gKiBXaWxsIGNhbGwge2hhbmRsZXIub25TdGFydH0gd2hlbiB0aGUgZWxlbWVudCBpcyBhZGRlZCB0byB0aGUgRE9NLlxuICogQW5kIHdpbGwgY2FsbCB7aGFuZGxlci5vblJlbW92ZX0gd2hlbiB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhMaWZlY3ljbGUgPSAoXG4gIHRhZzogQ1RhZyxcbiAgaGFuZGxlcjoge1xuICAgIHN0YXJ0PzogKHRhZzogQ1RhZykgPT4gUHJvbWlzZTxib29sZWFuPiB8IHZvaWQ7XG4gICAgcmVtb3ZlZD86ICh0YWc6IENUYWcpID0+IHZvaWQ7XG4gICAgYmVmb3JlUmVtb3ZlPzogKHRhZzogQ1RhZykgPT4gUHJvbWlzZTxib29sZWFuPiB8IHZvaWQ7XG4gIH0sXG4pOiBDVGFnID0+IHtcbiAgb25MaWZlY3ljbGUodGFnLCBoYW5kbGVyLnN0YXJ0LCBoYW5kbGVyLnJlbW92ZWQsIGhhbmRsZXIuYmVmb3JlUmVtb3ZlKTtcbiAgcmV0dXJuIHRhZztcbn07XG5cbi8qKlxuICogQXR0YWNoIHRoZSBnaXZlbiB0YWcuIFRoaXMgbWVhbnMgdGhhdCB3aGVuIG90aGVyIHRhZ3MgYXJlIGNyZWF0ZWQgbWFya2VkIGFzIGF0dGFjaGFibGUgKHVzaW5nIGA8dGFnX25hbWU+LmF0dGFjaCgpYCwgYHRhZygnPHRhZ19uYW1lPicsIFtdLCB0cnVlKWApLFxuICogdGhleSB3aWxsIGJlIGFkZGVkIGFzIGNoaWxkcmVuIG9mIHRoaXMgdGFnLlxuICogWW91IGNhbiBjYWxsIGF0dGFjaCBtdWx0aXBsZSB0aW1lcywgYW5kIHRoZSBsYXN0IGF0dGFjaCB0YWcgd2lsbCBiZSB1c2VkLlxuICogVGhlbiB3aGVuIHlvdSd2ZSBmaW5pc2hlZCwgeW91IGNhbiBjYWxsIHtAbGluayBkZXRhY2h9IHRvIGdvIGJhY2sgdG8gdGhlIHByZXZpb3VzbHkgYXR0YWNoZWQgdGFnIGlmIHRoZXJlIGlzIG9uZSwgb3IgY2xlYXIgdGhlIGF0dGFjaGVkIHRhZy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGF0dGFjaChkaXYoKSk7XG4gKiBkaXYuYXR0YWNoKCk7ICAvLyBhZGRlZCBhcyBjaGlsZCBvZiBkaXZcbiAqIHAuYXR0YWNoKCk7ICAgIC8vIGFkZGVkIGFzIGNoaWxkIG9mIGRpdlxuICpcbiAqIGF0dGFjaChkaXYoKSk7IC8vIE5ldyBkaXZcbiAqIGRpdi5hdHRhY2goKTsgIC8vIGFkZGVkIGFzIGNoaWxkIG9mIG5ldyBkaXZcbiAqIHAuYXR0YWNoKCk7ICAgIC8vIGFkZGVkIGFzIGNoaWxkIG9mIG5ldyBkaXZcbiAqXG4gKiBkZXRhY2goKTsgICAgICAvLyBCYWNrIHRvIHByZXZpb3VzIGRpdlxuICogZGV0YWNoKCk7ICAgICAgLy8gTm8gYXR0YWNoZWQgdGFnXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaCh0YWc6IENUYWcpIHtcbiAgaWYgKGNvbnRleHQuYXR0YWNoZWRUYWcpIHtcbiAgICBjb250ZXh0LmF0dGFjaGVkVGFnU3RhY2sucHVzaChjb250ZXh0LmF0dGFjaGVkVGFnKTtcbiAgfVxuICBjb250ZXh0LmF0dGFjaGVkVGFnID0gdGFnO1xuICByZXR1cm4gdGFnO1xufVxuXG4vKipcbiAqIERldGFjaCB0aGUgY3VycmVudGx5IGF0dGFjaGVkIHRhZyAoe0BsaW5rIGF0dGFjaH0pLiBJZiB0aGVyZSB3YXMgYW5vdGhlciBhdHRhY2hlZCB0YWcgYmVmb3JlIGl0IHdpbGwgYmVjb21lIHRoZSBjdXJyZW50bHkgYXR0YWNoZWQgdGFnLlxuICogSWYgdGhlcmUgYXJlIG5vIHByZXZpb3VzIGF0dGFjaGVkIHRhZ3MsIGl0IHdpbGwgY2xlYXIgdGhlIGF0dGFjaGVkIHRhZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGFjaCgpIHtcbiAgaWYgKGNvbnRleHQuYXR0YWNoZWRUYWdTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgY29udGV4dC5hdHRhY2hlZFRhZyA9IGNvbnRleHQuYXR0YWNoZWRUYWdTdGFjay5wb3AoKTtcbiAgfSBlbHNlIHtcbiAgICBjb250ZXh0LmF0dGFjaGVkVGFnID0gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIERldGFjaGVzIGFsbCBhdHRhY2hlZCB0YWdzLiBUaGVyZSB3aWxsIGJlIG5vIGF0dGFjaGVkIHRhZyBhZnRlciBjYWxsaW5nIHRoaXMgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRhY2hBbGwoKSB7XG4gIGNvbnRleHQuYXR0YWNoZWRUYWcgPSBudWxsO1xuICBjb250ZXh0LmF0dGFjaGVkVGFnU3RhY2sgPSBbXTtcbn1cblxuLyoqXG4gKiBJdCBtYWtlcyB0aGUgYm9keSB0aGUgYXR0YWNoZWQgdGFnICh7QGxpbmsgYXR0YWNofSkuXG4gKiBZb3UgY2FuIHBhc3MgaW4gYSBzZWxlY3RvciBmb3IgYW4gZWxlbWVudCB5b3Ugd2FudCB0byBiZSB0aGUgZGVmYXVsdCBhdHRhY2hlZCB0YWcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0KG9wdGlvbnM6IHsgcm9vdDogc3RyaW5nIH0gPSB7IHJvb3Q6ICdib2R5JyB9KSB7XG4gIGNvbnN0IHJvb3QgPSBuZXcgQ1RhZyhgKCR7b3B0aW9ucy5yb290fSlgKTtcbiAgYXR0YWNoKHJvb3QpO1xuICByZXR1cm4gcm9vdDtcbn1cblxuLyoqIE92ZXJyaWRlIGFueSB0YWcgZnVuY3Rpb24gd2Ugd2FudCwgdG8gZ2l2ZSBpdCBzb21lIGN1c3RvbSBiZWhhdmlvdXIsIHByb2Nlc3MgdGhlIGNoaWxkcmVuLCBldGMuLi4gKi9cbmNvbnN0IGludGVyY2VwdG9yczoge1xuICBbazogc3RyaW5nXTogVGFnQnVpbGRlciB8ICgoc3R5bGVzOiBTdHlsZVNldFtdKSA9PiBDVGFnKTtcbn0gPSB7XG4gIHVsOiAoY2hpbGRyZW46IFRhZ0NoaWxkcmVuLCBhdHRhY2g6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuICAgIHJldHVybiB0YWcoXG4gICAgICAndWwnLFxuICAgICAgY2hpbGRyZW4ubWFwKChjbCkgPT4ge1xuICAgICAgICByZXR1cm4gdGFnKCdsaScsIFtjbF0sIGF0dGFjaCk7XG4gICAgICB9KSxcbiAgICApO1xuICB9LFxuICBzdHlsZTogKHN0eWxlczogU3R5bGVTZXRbXSwgYXR0YWNoOiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICByZXR1cm4gdGFnKCdzdHlsZScsIFtjb250ZXh0LmNzcy5nZW5lcmF0ZUNzcyhzdHlsZXMpXSwgYXR0YWNoKTtcbiAgfSxcbn07XG5cbi8qKlxuICogTGlzdCBvZiBhbGwgSFRNTCB0YWcgZnVuY3Rpb25zLiBGcm9tIGBkaXZgIHRvIGBhYmJyYCA6KVxuICogSWYgeW91IHdhbnQgdG8gY3JlYXRlIGFueSBvdGhlciB0YWcsIHVzZSB0aGUge0BsaW5rIHRhZ30gZnVuY3Rpb24uXG4gKlxuICogQHR5cGUge0FsbFRhZ3N9XG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IHsgZGl2LCBwLCBhYmJyLCBpbWcsIHN0eWxlLCAuLi4gfSA9IGFsbFRhZ3M7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IGFsbFRhZ3M6IEFsbFRhZ3MgPSBuZXcgUHJveHkoXG4gIHt9LFxuICB7XG4gICAgZ2V0OiAodCwgcCwgcikgPT4ge1xuICAgICAgY29uc3QgdGFnTmFtZSA9IHAudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGZuID0gKC4uLmNoaWxkcmVuOiBhbnlbXSkgPT4ge1xuICAgICAgICBpZiAoaW50ZXJjZXB0b3JzW3RhZ05hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIGludGVyY2VwdG9yc1t0YWdOYW1lXShjaGlsZHJlbiwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YWcodGFnTmFtZSwgY2hpbGRyZW4pO1xuICAgICAgfTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCAnYXR0YWNoJywge1xuICAgICAgICBnZXQ6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gKC4uLmNoaWxkcmVuOiBhbnlbXSkgPT4ge1xuICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yc1t0YWdOYW1lXSkge1xuICAgICAgICAgICAgICByZXR1cm4gaW50ZXJjZXB0b3JzW3RhZ05hbWVdKGNoaWxkcmVuLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0YWcodGFnTmFtZSwgY2hpbGRyZW4sIHRydWUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGZuO1xuICAgIH0sXG4gIH0sXG4pIGFzIEFsbFRhZ3M7XG4iLCJpbXBvcnQgdHlwZSB7IFN0YXRlIH0gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4vdXRpbC5qcyc7XG5cbi8qKlxuICogYHN0YXRlYCBjcmVhdGVzIGEgcmVhY3RpdmUgb2JqZWN0IHRoYXQgY2FuIHRoZSBiZSB1c2VkIHdpdGggdGFncyB0byBjcmVhdGUgZGluYW1pYyBhbmQgcmVhY3RpdmUgYXBwcy5cbiAqIHtAcGFyYW0gY29udGVudH0gY2FuIGJlIGFuIGBvYmplY3RgIG9yIGFuIGBhcnJheWAuIE9iamVjdHMgY2FuIGJlIG5lc3RlZCwgYW5kIGV2ZXkgcHJvcGVydHkgd2lsbCBiZSByZWFjdGl2ZS5cbiAqIEluIGFycmF5cywgbGVuZ3RoIHdpbGwgYWxzbyBiZSByZWFjdGl2ZS5cbiAqXG4gKiBZb3UgY2FuIHBhc3MgYW4gb3B0aW9uYWwge0BwYXJhbSBjYWxsYmFja30sIHRoYXQgd2lsbCBiZSBjYWxsZWQgYW55dGhpbmcgaW4gdGhlIHN0YXRlIGNoYW5nZXMuXG4gKlxuICogQWRkaXRpb25hbGx5IHlvdSBjYW4gbGlzdGVuIHRvIGl0IGFmdGVyIGNyZWF0aW5nIGl0OiBgc3RhdGUoKS5jaGFuZ2VkKCgpID0+IHsgfSlgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBzdCA9IHN0YXRlKHsgY291bnQ6IDAgfSk7XG4gKiBzdC5jaGFuZ2VkKCgpID0+IHsgLi4uIH0pO1xuICogc3QuY291bnQuY2hhbmdlZCgoKSA9PiB7IC4uLiB9KTtcbiAqXG4gKiBzdC5jb3VudCsrO1xuICogc3QuY291bnQgPSAzO1xuICpcbiAqIGRpdigpLmhpZGVJZihzdC5jb3VudCk7XG4gKiBkaXYoKS5kaXNhYmxlSWYoc3QuY291bnQpO1xuICogZGl2KHRlbXBsYXRlKCdDb3VudCBpczogJGNvdW50Jywgc3QpKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhdGU8VCBleHRlbmRzIG9iamVjdD4oXG4gIGNvbnRlbnQ6IFQsXG4gIGNhbGxiYWNrPzogKG5ld1ZhbHVlOiBUKSA9PiB2b2lkLFxuKTogU3RhdGU8VD4ge1xuICBsZXQgX3Byb3BMaXN0ZW5lcnM6IHsgW2s6IHN0cmluZ106IGFueVtdIH0gPSB7fTtcbiAgbGV0IF9zdGF0ZUxpc3RlbmVycyA9IFtdO1xuXG4gIGlmIChjYWxsYmFjaykgX3N0YXRlTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuXG4gIGNvbnN0IGFkZExpc3RlbmVyID0gKHByb3AsIGNhbGxiYWNrKSA9PiB7XG4gICAgaWYgKCFfcHJvcExpc3RlbmVyc1twcm9wXSkgX3Byb3BMaXN0ZW5lcnNbcHJvcF0gPSBbXTtcbiAgICBpZiAoIV9wcm9wTGlzdGVuZXJzW3Byb3BdLmluY2x1ZGVzKGNhbGxiYWNrKSkge1xuICAgICAgX3Byb3BMaXN0ZW5lcnNbcHJvcF0ucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGVtaXRDaGFuZ2UgPSAodGFyZ2V0LCBwcm9wKSA9PiB7XG4gICAgaWYgKF9wcm9wTGlzdGVuZXJzW3Byb3BdKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIF9wcm9wTGlzdGVuZXJzW3Byb3BdKSB7XG4gICAgICAgIGxpc3RlbmVyKHRhcmdldFtwcm9wXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBfc3RhdGVMaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVyKHRhcmdldCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGFkZENoYW5nZWRNZXRob2QgPSAodGFyZ2V0LCBwcm9wKSA9PiB7XG4gICAgY29uc3QgdmFsdWU6IGFueSA9IHRhcmdldFtwcm9wXTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoaXNPYmplY3QodGFyZ2V0W3Byb3BdKSkge1xuICAgICAgICB2YWx1ZS5jaGFuZ2VkID0gKGNhbGxiYWNrKSA9PiBhZGRMaXN0ZW5lcihwcm9wLCBjYWxsYmFjayk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlLl9fcHJvdG9fXykge1xuICAgICAgICB2YWx1ZS5fX3Byb3RvX18uY2hhbmdlZCA9IChjYWxsYmFjaykgPT4gYWRkTGlzdGVuZXIocHJvcCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIGZvciAobGV0IHByb3Agb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY29udGVudCkpIHtcbiAgICBpZiAoaXNPYmplY3QoY29udGVudFtwcm9wXSkpIHtcbiAgICAgIGNvbnRlbnRbcHJvcF0gPSBzdGF0ZShjb250ZW50W3Byb3BdLCAoKSA9PiBlbWl0Q2hhbmdlKGNvbnRlbnQsIHByb3ApKTtcbiAgICB9IC8vXG4gICAgZWxzZSBpZiAoY29udGVudFtwcm9wXSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBjb250ZW50W3Byb3BdID0gc3RhdGUoY29udGVudFtwcm9wXSwgKCkgPT4gZW1pdENoYW5nZShjb250ZW50LCBwcm9wKSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkoY29udGVudCwge1xuICAgIGRlbGV0ZVByb3BlcnR5OiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wKSB7XG4gICAgICBlbWl0Q2hhbmdlKHRhcmdldCwgcHJvcCk7XG4gICAgICBkZWxldGUgdGFyZ2V0W3Byb3BdO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3ApID0+IHtcbiAgICAgIHJldHVybiBhZGRDaGFuZ2VkTWV0aG9kKHRhcmdldCwgcHJvcCk7XG4gICAgfSxcbiAgICBzZXQ6ICh0YXJnZXQsIHByb3AsIHZhbHVlKSA9PiB7XG4gICAgICBpZiAocHJvcCA9PSAnY2hhbmdlZCcpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICBcbiAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgZW1pdENoYW5nZSh0YXJnZXQsIHByb3ApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgfSkgYXMgYW55O1xuXG4gIC8vIFdob2xlIHN0YXRlIGNoYW5nZWRcbiAgcHJveHkuY2hhbmdlZCA9IChjYWxsYmFjaykgPT4ge1xuICAgIF9zdGF0ZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfTtcblxuICAvLyBwcm94eS5ub3QgPVxuXG4gIHJldHVybiBwcm94eSBhcyBTdGF0ZTxUPjtcbn1cbiIsIi8qXG4gKiBKYXZhU2NyaXB0IFJvdXRlIE1hdGNoZXJcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDExIFwiQ293Ym95XCIgQmVuIEFsbWFuXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cbiAqXG4gKlxuICogdHJhbnNsYXRlZCB0byBUUyBieSBAbm9tYnJla2VmZlxuICovXG5cbi8vIENoYXJhY3RlcnMgdG8gYmUgZXNjYXBlZCB3aXRoIFxcLiBSZWdFeHAgYm9ycm93ZWQgZnJvbSB0aGUgQmFja2JvbmUgcm91dGVyXG4vLyBidXQgZXNjYXBlZCAobm90ZTogdW5uZWNlc3NhcmlseSkgdG8ga2VlcCBKU0hpbnQgZnJvbSBjb21wbGFpbmluZy5cbmNvbnN0IHJlRXNjYXBlID0gL1tcXC1cXFtcXF17fSgpKz8uLFxcXFxcXF4kfCNcXHNdL2c7XG4vLyBNYXRjaCBuYW1lZCA6cGFyYW0gb3IgKnNwbGF0IHBsYWNlaG9sZGVycy5cbmNvbnN0IHJlUGFyYW0gPSAvKFs6Kl0pKFxcdyspL2c7XG5cbi8vIFRlc3QgdG8gc2VlIGlmIGEgdmFsdWUgbWF0Y2hlcyB0aGUgY29ycmVzcG9uZGluZyBydWxlLlxuZnVuY3Rpb24gdmFsaWRhdGVSdWxlKHJ1bGUsIHZhbHVlKSB7XG4gIC8vIEZvciBhIGdpdmVuIHJ1bGUsIGdldCB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSBzdHJpbmcgbmFtZSBvZiBpdHNcbiAgLy8gY29uc3RydWN0b3IgZnVuY3Rpb24uIFwiUlwiIC0+IFJlZ0V4cCwgXCJGXCIgLT4gRnVuY3Rpb24gKHRoZXNlIHNob3VsZG4ndFxuICAvLyBjb25mbGljdCB3aXRoIGFueSBvdGhlciB0eXBlcyBvbmUgbWlnaHQgc3BlY2lmeSkuIE5vdGU6IGluc3RlYWQgb2ZcbiAgLy8gZ2V0dGluZyAudG9TdHJpbmcgZnJvbSBhIG5ldyBvYmplY3Qge30gb3IgT2JqZWN0LnByb3RvdHlwZSwgSSdtIGFzc3VtaW5nXG4gIC8vIHRoYXQgZXhwb3J0cyB3aWxsIGFsd2F5cyBiZSBhbiBvYmplY3QsIGFuZCB1c2luZyBpdHMgLnRvU3RyaW5nIG1ldGhvZC5cbiAgLy8gQmFkIGlkZWE/IExldCBtZSBrbm93IGJ5IGZpbGluZyBhbiBpc3N1ZVxuICB2YXIgdHlwZSA9IGV4cG9ydHMudG9TdHJpbmcuY2FsbChydWxlKS5jaGFyQXQoOCk7XG4gIC8vIElmIHJlZ2V4cCwgbWF0Y2guIElmIGZ1bmN0aW9uLCBpbnZva2UuIE90aGVyd2lzZSwgY29tcGFyZS4gTm90ZSB0aGF0ID09XG4gIC8vIGlzIHVzZWQgYmVjYXVzZSB0eXBlIGNvZXJjaW9uIGlzIG5lZWRlZCwgYXMgYHZhbHVlYCB3aWxsIGFsd2F5cyBiZSBhXG4gIC8vIHN0cmluZywgYnV0IGBydWxlYCBtaWdodCBub3QuXG4gIHJldHVybiB0eXBlID09PSAnUidcbiAgICA/IHJ1bGUudGVzdCh2YWx1ZSlcbiAgICA6IHR5cGUgPT09ICdGJ1xuICAgID8gcnVsZSh2YWx1ZSlcbiAgICA6IHJ1bGUgPT0gdmFsdWU7XG59XG5cbmV4cG9ydCB0eXBlIFJvdXRlTWF0Y2hlciA9IHtcbiAgcGFyc2Uoc3RyOiBhbnkpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgbnVsbDtcbiAgc3RyaW5naWZ5KG9iajogb2JqZWN0KTogc3RyaW5nO1xufTtcblxuLy8gUGFzcyBpbiBhIHJvdXRlIHN0cmluZyAob3IgUmVnRXhwKSBwbHVzIGFuIG9wdGlvbmFsIG1hcCBvZiBydWxlcywgYW5kIGdldFxuLy8gYmFjayBhbiBvYmplY3Qgd2l0aCAucGFyc2UgYW5kIC5zdHJpbmdpZnkgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCByb3V0ZU1hdGNoZXIgPSAoXG4gIHJvdXRlOiBzdHJpbmcgfCBSZWdFeHAsXG4gIHJ1bGVzOiB7IFtrOiBzdHJpbmddOiBSZWdFeHAgfCAoKHZhbHVlKSA9PiBib29sZWFuKSB9ID0ge30sXG4pOiBSb3V0ZU1hdGNoZXIgPT4ge1xuICAvLyBPYmplY3QgdG8gYmUgcmV0dXJuZWQuIFRoZSBwdWJsaWMgQVBJLlxuICBsZXQgc2VsZjogUGFydGlhbDxSb3V0ZU1hdGNoZXI+ID0ge307XG5cbiAgLy8gTWF0Y2hlZCBwYXJhbSBvciBzcGxhdCBuYW1lcywgaW4gb3JkZXJcbiAgbGV0IG5hbWVzID0gW107XG4gIC8vIFJvdXRlIG1hdGNoaW5nIFJlZ0V4cC5cbiAgbGV0IHJlID0gcm91dGU7XG5cbiAgLy8gQnVpbGQgcm91dGUgUmVnRXhwIGZyb20gcGFzc2VkIHN0cmluZy5cbiAgaWYgKHR5cGVvZiByZSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBFc2NhcGUgc3BlY2lhbCBjaGFycy5cbiAgICByZSA9IHJlLnJlcGxhY2UocmVFc2NhcGUsICdcXFxcJCYnKTtcbiAgICAvLyBSZXBsYWNlIGFueSA6cGFyYW0gb3IgKnNwbGF0IHdpdGggdGhlIGFwcHJvcHJpYXRlIGNhcHR1cmUgZ3JvdXAuXG4gICAgcmUgPSByZS5yZXBsYWNlKHJlUGFyYW0sIGZ1bmN0aW9uIChfLCBtb2RlLCBuYW1lKSB7XG4gICAgICBuYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgLy8gOnBhcmFtIHNob3VsZCBjYXB0dXJlIHVudGlsIHRoZSBuZXh0IC8gb3IgRU9MLCB3aGlsZSAqc3BsYXQgc2hvdWxkXG4gICAgICAvLyBjYXB0dXJlIHVudGlsIHRoZSBuZXh0IDpwYXJhbSwgKnNwbGF0LCBvciBFT0wuXG4gICAgICByZXR1cm4gbW9kZSA9PT0gJzonID8gJyhbXi9dKiknIDogJyguKiknO1xuICAgIH0pO1xuICAgIC8vIEFkZCBeLyQgYW5jaG9ycyBhbmQgY3JlYXRlIHRoZSBhY3R1YWwgUmVnRXhwLlxuICAgIHJlID0gbmV3IFJlZ0V4cCgnXicgKyByZSArICckJyk7XG5cbiAgICAvLyBNYXRjaCB0aGUgcGFzc2VkIHVybCBhZ2FpbnN0IHRoZSByb3V0ZSwgcmV0dXJuaW5nIGFuIG9iamVjdCBvZiBwYXJhbXNcbiAgICAvLyBhbmQgdmFsdWVzLlxuICAgIHNlbGYucGFyc2UgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBsZXQgcGFyYW0sIHZhbHVlO1xuICAgICAgbGV0IHBhcmFtcyA9IHt9O1xuICAgICAgbGV0IG1hdGNoZXMgPSB1cmwubWF0Y2gocmUpO1xuICAgICAgLy8gSWYgbm8gbWF0Y2hlcywgcmV0dXJuIG51bGwuXG4gICAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICAvLyBBZGQgYWxsIG1hdGNoZWQgOnBhcmFtIC8gKnNwbGF0IHZhbHVlcyBpbnRvIHRoZSBwYXJhbXMgb2JqZWN0LlxuICAgICAgd2hpbGUgKGkgPCBuYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgcGFyYW0gPSBuYW1lc1tpKytdO1xuICAgICAgICB2YWx1ZSA9IG1hdGNoZXNbaV07XG4gICAgICAgIC8vIElmIGEgcnVsZSBleGlzdHMgZm9yIHRoaWUgcGFyYW0gYW5kIGl0IGRvZXNuJ3QgdmFsaWRhdGUsIHJldHVybiBudWxsLlxuICAgICAgICBpZiAocnVsZXMgJiYgcGFyYW0gaW4gcnVsZXMgJiYgIXZhbGlkYXRlUnVsZShydWxlc1twYXJhbV0sIHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHBhcmFtc1twYXJhbV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfTtcblxuICAgIC8vIEJ1aWxkIHBhdGggYnkgaW5zZXJ0aW5nIHRoZSBnaXZlbiBwYXJhbXMgaW50byB0aGUgcm91dGUuXG4gICAgc2VsZi5zdHJpbmdpZnkgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICBsZXQgcGFyYW0sIHJlO1xuICAgICAgbGV0IHJlc3VsdCA9IHJvdXRlIGFzIHN0cmluZztcbiAgICAgIC8vIEluc2VydCBlYWNoIHBhc3NlZCBwYXJhbSBpbnRvIHRoZSByb3V0ZSBzdHJpbmcuIE5vdGUgdGhhdCB0aGlzIGxvb3BcbiAgICAgIC8vIGRvZXNuJ3QgY2hlY2sgLmhhc093blByb3BlcnR5IGJlY2F1c2UgdGhpcyBzY3JpcHQgZG9lc24ndCBzdXBwb3J0XG4gICAgICAvLyBtb2RpZmljYXRpb25zIHRvIE9iamVjdC5wcm90b3R5cGUuXG4gICAgICBmb3IgKHBhcmFtIGluIHBhcmFtcykge1xuICAgICAgICByZSA9IG5ldyBSZWdFeHAoJ1s6Kl0nICsgcGFyYW0gKyAnXFxcXGInKTtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UocmUsIHBhcmFtc1twYXJhbV0pO1xuICAgICAgfVxuICAgICAgLy8gTWlzc2luZyBwYXJhbXMgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggZW1wdHkgc3RyaW5nLlxuICAgICAgcmV0dXJuIHJlc3VsdC5yZXBsYWNlKHJlUGFyYW0sICcnKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIFJlZ0V4cCByb3V0ZSB3YXMgcGFzc2VkLiBUaGlzIGlzIHN1cGVyLXNpbXBsZS5cbiAgICBzZWxmLnBhcnNlID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgbGV0IG1hdGNoZXMgPSB1cmwubWF0Y2gocmUpO1xuICAgICAgcmV0dXJuIG1hdGNoZXMgJiYgeyBjYXB0dXJlczogbWF0Y2hlcy5zbGljZSgxKSB9O1xuICAgIH07XG4gICAgLy8gVGhlcmUncyBubyBtZWFuaW5nZnVsIHdheSB0byBzdHJpbmdpZnkgYmFzZWQgb24gYSBSZWdFeHAgcm91dGUsIHNvXG4gICAgLy8gcmV0dXJuIGVtcHR5IHN0cmluZy5cbiAgICBzZWxmLnN0cmluZ2lmeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHNlbGYgYXMgUm91dGVNYXRjaGVyO1xufTtcbiIsImltcG9ydCB7IGFsbFRhZ3MsIENUYWcgfSBmcm9tICcuLi90YWcuanMnO1xuaW1wb3J0IHsgUm91dGVNYXRjaGVyLCByb3V0ZU1hdGNoZXIgfSBmcm9tICcuL3JvdXRlLW1hdGNoZXIuanMnO1xuXG5jb25zdCB7IGRpdiwgYSB9ID0gYWxsVGFncztcblxudHlwZSBSb3V0ZUJ1aWxkZXIgPSAocm91dGVyOiBSb3V0ZXI8YW55PikgPT4gQ1RhZztcbnR5cGUgUm91dGUgPSBSb3V0ZUJ1aWxkZXIgfCBzdHJpbmc7XG5cbnR5cGUgUm91dGVyT3B0aW9uczxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgUm91dGU+ID0ge30+ID0ge1xuICByb290UGFyZW50OiBDVGFnO1xuICByb3V0ZXM6IFQ7XG4gIGluaXRpYWxSb3V0ZTogc3RyaW5nO1xuICBmYWxsYmFja1JvdXRlPzogc3RyaW5nO1xuICBub1Jvb3Q/OiBSb3V0ZUJ1aWxkZXI7XG4gIHdpbmRvdz86IFdpbmRvdyAmIHR5cGVvZiBnbG9iYWxUaGlzO1xufTtcblxuZXhwb3J0IGNsYXNzIFJvdXRlcjxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgUm91dGU+ID0ge30+IHtcbiAgcHJpdmF0ZSBfb3B0aW9uczogUm91dGVyT3B0aW9uczxUPjtcbiAgcHJpdmF0ZSBfcm91dGVzOiBSZWNvcmQ8c3RyaW5nLCBDVGFnPiA9IHt9O1xuICBwcml2YXRlIF93aW5kb3c6IFdpbmRvdyAmIHR5cGVvZiBnbG9iYWxUaGlzO1xuICBwcml2YXRlIF9sb2NhdGlvbjogTG9jYXRpb247XG4gIHByaXZhdGUgX2hpc3Rvcnk6IEhpc3Rvcnk7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3V0ZT86IHN0cmluZztcbiAgcHJpdmF0ZSBfY3VycmVudFJvdXRlVGFnPzogQ1RhZztcbiAgcHJpdmF0ZSBfcm9vdFBhcmVudDogQ1RhZztcbiAgcHJpdmF0ZSBfcm91dGVNYXRjaGVyczogeyBtYXRjaGVyOiBSb3V0ZU1hdGNoZXI7IGtleTogc3RyaW5nIH1bXSA9IFtdO1xuXG4gIHB1YmxpYyBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgcHVibGljIHF1ZXJ5OiBVUkxTZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cbiAgcHVibGljIGdldCBjdXJyZW50Um91dGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFJvdXRlO1xuICB9XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogUm91dGVyT3B0aW9uczxUPikge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuX3Jvb3RQYXJlbnQgPSBvcHRpb25zLnJvb3RQYXJlbnQ7XG4gICAgdGhpcy5fd2luZG93ID0gb3B0aW9ucy53aW5kb3cgPz8gd2luZG93O1xuICAgIHRoaXMuX2xvY2F0aW9uID0gdGhpcy5fd2luZG93LmxvY2F0aW9uO1xuICAgIHRoaXMuX2hpc3RvcnkgPSB0aGlzLl93aW5kb3cuaGlzdG9yeTtcblxuICAgIHRoaXMuX2luaXRSb3V0ZU1hdGNoZXJzKCk7XG4gICAgdGhpcy5fbW9kaWZ5TG9jYXRpb25GdW5jdGlvbnMoKTtcbiAgICB0aGlzLl9saXN0ZW5FdmVudHMoKTtcblxuICAgIHRoaXMubmF2aWdhdGUodGhpcy5fb3B0aW9ucy5pbml0aWFsUm91dGUpO1xuICB9XG5cbiAgcHVibGljIG5hdmlnYXRlKHBhdGg6IHN0cmluZywgcXVlcnk/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB7XG4gICAgY29uc3QgcXVlcnlTdHIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5KS50b1N0cmluZygpO1xuICAgIGNvbnNvbGUuZGVidWcoYFtSb3V0ZXJdIC0+IE5hdmlnYXRlIHRvICR7cGF0aH1gKTtcbiAgICBcbiAgICBpZiAocGF0aCAhPSB0aGlzLl9jdXJyZW50Um91dGUpIHtcbiAgICAgIHRoaXMuX2hpc3RvcnkucHVzaFN0YXRlKFxuICAgICAgICAnZGF0YScsXG4gICAgICAgICcnLFxuICAgICAgICBwYXRoICsgcXVlcnlTdHIgPyAnPycgKyBxdWVyeVN0ciA6ICcnLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9zZXRSb3V0ZSgpIHtcbiAgICBjb25zb2xlLmRlYnVnKGBbUm91dGVyXSAtPiBfc2V0Um91dGUgJHt0aGlzLl9jdXJyZW50Um91dGV9YCk7XG5cbiAgICBpZiAodGhpcy5fY3VycmVudFJvdXRlVGFnKSB7XG4gICAgICBhd2FpdCB0aGlzLl9jdXJyZW50Um91dGVUYWcuaGlkZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHJvdXRlID0gdGhpcy5fZ2V0Um91dGUoKTtcbiAgICB0aGlzLl9yb290UGFyZW50LmFwcGVuZChyb3V0ZSk7XG4gICAgdGhpcy5fY3VycmVudFJvdXRlVGFnID0gcm91dGU7XG4gIH1cblxuICAvLyBGb2xsb3cgYWxpYXNlcyB1bnRpbCBhIHZhbGlkIHJvdXRlIGlzIGZvdW5kXG4gIHByaXZhdGUgX2dldEVmZmVjdGl2ZVJvdXRlKCkge1xuICAgIGxldCBlZmZlY3RpdmVSb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZTtcbiAgICBsZXQgbWF4Q2FsbHMgPSAxMDAwMDtcblxuICAgIHdoaWxlIChcbiAgICAgIHR5cGVvZiB0aGlzLl9vcHRpb25zLnJvdXRlc1tlZmZlY3RpdmVSb3V0ZV0gPT09ICdzdHJpbmcnICYmXG4gICAgICBtYXhDYWxscy0tXG4gICAgKSB7XG4gICAgICBsZXQgYWxpYXMgPSB0aGlzLl9vcHRpb25zLnJvdXRlc1tlZmZlY3RpdmVSb3V0ZV07XG4gICAgICBpZiAodHlwZW9mIGFsaWFzID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgICAgIGBbUm91dGVyXSAtPiBfZ2V0Um91dGUgJHtlZmZlY3RpdmVSb3V0ZX0gaXMgYWxpYXMgZm9yICR7YWxpYXN9YCxcbiAgICAgICAgKTtcbiAgICAgICAgZWZmZWN0aXZlUm91dGUgPSBhbGlhcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWZmZWN0aXZlUm91dGU7XG4gIH1cblxuICBwcml2YXRlIF9nZXRSb3V0ZSgpIHtcbiAgICBjb25zb2xlLmRlYnVnKGBbUm91dGVyXSAtPiBfZ2V0Um91dGUgJHt0aGlzLl9jdXJyZW50Um91dGV9YCk7XG4gICAgbGV0IGVmZmVjdGl2ZVJvdXRlID0gdGhpcy5fZ2V0RWZmZWN0aXZlUm91dGUoKTtcblxuICAgIC8vIEZpbmQgbWF0Y2hlclxuICAgIGNvbnNvbGUubG9nKCdTZWFyY2hpbmcgZm9yIG1hdGNoZXInKTtcbiAgICBmb3IgKGxldCBtYXRjaGVyIG9mIHRoaXMuX3JvdXRlTWF0Y2hlcnMpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG1hdGNoZXIubWF0Y2hlci5wYXJzZShlZmZlY3RpdmVSb3V0ZSk7XG4gICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgIGVmZmVjdGl2ZVJvdXRlID0gbWF0Y2hlci5rZXk7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh0aGlzLl9sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIShlZmZlY3RpdmVSb3V0ZSBpbiB0aGlzLl9vcHRpb25zLnJvdXRlcykpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoXG4gICAgICAgIGBbUm91dGVyXSAtPiBfZ2V0Um91dGUgJHtlZmZlY3RpdmVSb3V0ZX0gbm90IGZvdW5kLCBmYWxsYmFjayB0byAke3RoaXMuX29wdGlvbnMuZmFsbGJhY2tSb3V0ZX1gLFxuICAgICAgKTtcbiAgICAgIGVmZmVjdGl2ZVJvdXRlID0gdGhpcy5fb3B0aW9ucy5mYWxsYmFja1JvdXRlO1xuICAgIH1cblxuICAgIGlmICghKGVmZmVjdGl2ZVJvdXRlIGluIHRoaXMuX29wdGlvbnMucm91dGVzKSkge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgYFtSb3V0ZXJdIC0+IF9nZXRSb3V0ZSAke2VmZmVjdGl2ZVJvdXRlfSBub3QgZm91bmQgaW4gdGhlIHJvdXRlciwgZmFsbGJhY2sgdG8gXCJub1Jvb3RcIiBvciBkZWZhdWx0IGVycm9yYCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5ub1Jvb3RcbiAgICAgICAgPyB0aGlzLl9vcHRpb25zLm5vUm9vdCh0aGlzKVxuICAgICAgICA6IGRpdignTm8gcm91dGUgZm91bmQgZm9yOiAnICsgZWZmZWN0aXZlUm91dGUpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSByb3V0ZSBpcyBhbHJlYWR5IGJ1aWx0IGJlZm9yZSwganVzdCByZXR1cm4gdGhhdFxuICAgIGlmICh0aGlzLl9yb3V0ZXNbZWZmZWN0aXZlUm91dGVdKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgICBgW1JvdXRlcl0gLT4gX2dldFJvdXRlICR7ZWZmZWN0aXZlUm91dGV9IGlzIGNhY2hlZCwgdXNpbmcgdGhhdGAsXG4gICAgICApO1xuICAgICAgdGhpcy5fcm91dGVzW2VmZmVjdGl2ZVJvdXRlXS5zaG93KCk7XG4gICAgICByZXR1cm4gdGhpcy5fcm91dGVzW2VmZmVjdGl2ZVJvdXRlXTtcbiAgICB9XG5cbiAgICBsZXQgcm91dGVCdWlsZGVyID0gdGhpcy5fb3B0aW9ucy5yb3V0ZXNbZWZmZWN0aXZlUm91dGVdO1xuICAgIGlmICh0eXBlb2Ygcm91dGVCdWlsZGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBmaW5kIHJvdXRlIGJ1aWxkZXIgZm9yICcgKyB0aGlzLl9jdXJyZW50Um91dGUpO1xuICAgIH1cbiAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgYFtSb3V0ZXJdIC0+IF9nZXRSb3V0ZSAke2VmZmVjdGl2ZVJvdXRlfSBpcyBub3QgY2FjaGVkLCBjcmVhdGluZyBuZXcgb25lYCxcbiAgICApO1xuICAgIHJldHVybiAodGhpcy5fcm91dGVzW2VmZmVjdGl2ZVJvdXRlXSA9IHJvdXRlQnVpbGRlcih0aGlzKSk7XG4gIH1cblxuICBwcml2YXRlIF9zZXRDdXJyZW50Um91dGUoKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudFJvdXRlID09IHRoaXMuX2xvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudFJvdXRlID0gdGhpcy5fbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgdGhpcy5fc2V0Um91dGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2xpc3RlbkV2ZW50cygpIHtcbiAgICB0aGlzLl93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLl9zZXRDdXJyZW50Um91dGUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAncHVzaHN0YXRlJyxcbiAgICAgIHRoaXMuX3NldEN1cnJlbnRSb3V0ZS5iaW5kKHRoaXMpLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9tb2RpZnlMb2NhdGlvbkZ1bmN0aW9ucygpIHtcbiAgICBjb25zdCBwdXNoU3RhdGUgPSB0aGlzLl9oaXN0b3J5LnB1c2hTdGF0ZTtcbiAgICB0aGlzLl9oaXN0b3J5LnB1c2hTdGF0ZSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBwdXNoU3RhdGUuY2FsbCh0aGlzLl9oaXN0b3J5LCAuLi5hcmdzKTtcbiAgICAgIHRoaXMuX3dpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncHVzaHN0YXRlJykpO1xuICAgIH07XG4gIH1cblxuICBwdWJsaWMgX2luaXRSb3V0ZU1hdGNoZXJzKCkge1xuICAgIGZvciAobGV0IG1hdGNoZXJTdHIgaW4gdGhpcy5fb3B0aW9ucy5yb3V0ZXMpIHtcbiAgICAgIHRoaXMuX3JvdXRlTWF0Y2hlcnMucHVzaCh7XG4gICAgICAgIGtleTogbWF0Y2hlclN0cixcbiAgICAgICAgbWF0Y2hlcjogcm91dGVNYXRjaGVyKG1hdGNoZXJTdHIpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBsZXQgcm91dGVyOiBSb3V0ZXI8YW55PiB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSb3V0ZXI8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFJvdXRlPiA9IHt9PihcbiAgb3B0czogUm91dGVyT3B0aW9uczxUPixcbikge1xuICByb3V0ZXIgPSBuZXcgUm91dGVyPFQ+KG9wdHMpO1xuICByZXR1cm4gcm91dGVyIGFzIFJvdXRlcjxUPjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExpbmsoXG4gIGNoaWxkOiBzdHJpbmcgfCBDVGFnLFxuICBwYXRoLFxuICBxdWVyeT86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG4pIHtcbiAgcmV0dXJuIGEoY2hpbGQpXG4gICAgLmFkZEF0dHIoJ2hyZWYnLCAnamF2YXNjcmlwdDo7JylcbiAgICAuc2V0U3R5bGUoeyBtYXJnaW46ICcwIDhweCAwIDAnIH0pXG4gICAgLmNsaWNrZWQoKCkgPT4ge1xuICAgICAgaWYgKCFyb3V0ZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaW5rIGNhblxcdCBuYXZpZ2F0ZSwgdGhlcmUgaXMgbm8gcm91dGVyIGF2YWlsYWJsZScpO1xuICAgICAgfVxuXG4gICAgICByb3V0ZXIubmF2aWdhdGUocGF0aCwgcXVlcnkpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7fTtcbiIsImV4cG9ydCAqIGZyb20gJy4vdGFnLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGUuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9jc3MtZ2VuZXJhdG9yLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3RleHQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9yb3V0aW5nL3JvdXRpbmcuanMnO1xuXG5leHBvcnQgZGVmYXVsdCB7fTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlbW92ZUZyb21MaXN0IiwiaXRlbSIsImxpc3QiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJjYW1lbFRvRGFzaCIsInN0ciIsInJlcGxhY2UiLCJ2YWwiLCJ0b0xvd2VyQ2FzZSIsImRhc2hUb0NhbWVsIiwidG9VcHBlckNhc2UiLCJpc09iamVjdCIsIkFycmF5IiwidG9Kc29uIiwicG9zc2libHlKc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwiZnJvbUpzb24iLCJwb3NzaWJseUpzb24iLCJzdHJpbmdpZnkiLCJjYWxsT3JSZXR1cm4iLCJhcmdzIiwiQ3NzR2VuZXJhdG9yIiwiZ2VuZXJhdGVDc3MiLCJzdHlsZVNoZWV0Iiwic3R5bGVzaGVldHMiLCJnZW5lcmF0ZWRDc3MiLCJzaGVldCIsInRoaXMiLCJnZW5lcmF0ZUJsb2NrIiwic2VsZWN0b3IiLCJzdHlsZSIsImdlbmVyYXRlQmxvY2tDb250ZW50Iiwiam9pbiIsImluc2lkZSIsImJsb2NrcyIsInB1c2giLCJnZW5lcmF0ZVN0eWxlIiwidW5zaGlmdCIsIm5hbWUiLCJ2YWx1ZSIsInRleHRUZW1wbGF0ZSIsInZhbHVlcyIsIm5vZGUiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwiaW50ZXJwb2xhdGVQYXR0ZXJuIiwidXBkYXRlTm9kZSIsIm5vZGVWYWx1ZSIsIm1hdGNoIiwiZzEiLCJ0b1N0cmluZyIsImluY2x1ZGVzIiwiY2hhbmdlZCIsImNvbnRleHQiLCJhdHRhY2hlZFRhZyIsImF0dGFjaGVkVGFnU3RhY2siLCJjc3MiLCJhdHRhY2hlZCIsIkNUYWciLCJwYXJlbnQiLCJfcGFyZW50IiwibmV3UGFyZW50IiwiY2hpbGRyZW4iLCJfZ2V0RWxlbWVudENoaWxkcmVuIiwiZWxlbWVudCIsIl9jYWNoZWRDaGlsZHJlbiIsInNldFZhbHVlIiwibmV3VmFsdWUiLCJjb25zdW1lVmFsdWUiLCJjbGVhciIsImlkIiwic2V0SWQiLCJjb25zdHJ1Y3RvciIsImFyZzAiLCJhdHRhY2hhYmxlIiwiX2NoaWxkcmVuIiwiX2F0dGFjaGFibGUiLCJfbWV0YSIsImlzSGlkZGVuIiwibmV4dFNpYmxpbmdJRCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50IiwiSFRNTEVsZW1lbnQiLCJFcnJvciIsImFwcGVuZCIsImxlbmd0aCIsInNldENoaWxkcmVuIiwicmVwbGFjZUNoaWxkcmVuIiwibWFwIiwiX3NldENoaWxkcmVuUGFyZW50IiwiYmluZCIsImZpbHRlciIsIl9jaGlsZHJlbkZpbHRlclByZWRpY2F0ZSIsIl9nZXRFbGVtZW50Rm9yQ2hpbGQiLCJwcmVwZW5kIiwiY29uc3VtZSIsImNvbnN1bWFibGUiLCJjb25zdW1lciIsInNob3ciLCJleHBlY3RlZEluZGV4IiwiaGlkZGVuQmVmb3JlIiwiaSIsImNoaWxkIiwibmV4dEVsIiwiY2hpbGROb2RlcyIsImluc2VydEJlZm9yZSIsImhpZGUiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlIiwiZG9JZiIsImlmVHJ1ZSIsImlmRmFsc2UiLCJpbnZlcnQiLCJ0ZW1wIiwiY2FsbGJhY2siLCJkb0lmTm90IiwiaGlkZUlmIiwiaGFuZGxlSGlkZSIsImNvcnJlY3RlZFZhbHVlIiwiaGlkZUlmTm90IiwiY2xhc3NJZiIsImNsYXNzZXMiLCJhZGRDbGFzcyIsInJtQ2xhc3MiLCJjbGFzc0lmTm90IiwidGV4dElmIiwidGV4dCIsImVsc2VUZXh0IiwidGV4dElmTm90IiwiYXR0cklmIiwiYXR0ciIsImFkZEF0dHIiLCJybUF0dHIiLCJhdHRySWZOb3QiLCJkaXNhYmxlSWYiLCJkaXNhYmxlSWZOb3QiLCJzdHlsZUlmIiwiYWRkU3R5bGUiLCJybVN0eWxlIiwic3R5bGVJZk5vdCIsInN0eWxlc0lmIiwic3R5bGVzIiwic2V0U3R5bGUiLCJrZXlzIiwic3R5bGVzSWZOb3QiLCJsaXN0ZW4iLCJ0YWciLCJldnQiLCJvbiIsIm90aGVyIiwibmV3VGV4dCIsInN0IiwidGV4dENvbnRlbnQiLCJjb25maWciLCJzZXRBdHRycyIsImNsYXNzTGlzdCIsImNsYXNzTmFtZSIsImNsYXNzTmFtZXMiLCJhZGQiLCJoYXNDbGFzcyIsImNvbnRhaW5zIiwicmVwbGFjZUNsYXNzIiwidGFyZ2V0Q2xhc3MiLCJ0b2dnbGVDbGFzcyIsInByb3BlcnR5Iiwic3R5bGVOYW1lcyIsInJlbW92ZVByb3BlcnR5IiwiaGFzU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiYXR0cnMiLCJhdHRyaWJ1dGVzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiaGFzQXR0ciIsImdldEF0dHIiLCJ3aGVuIiwiZXZ0TmFtZSIsImZuIiwibGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbGlja2VkIiwia2V5UHJlc3NlZCIsIl8iLCJjb2RlIiwic3VibWl0ZWQiLCJkaXNwYXRjaEV2ZW50IiwiSW5wdXRFdmVudCIsImRpc2FibGUiLCJzZXREaXNhYmxlZCIsImVuYWJsZSIsImRpc2FibGVkIiwicSIsImZpbmQiLCJwcmVkaWNhdGUiLCJmaW5kVGFnIiwiY2wiLCJOb2RlIiwiX211dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwib2JzZXJ2ZXIiLCJfc2V0Q2FjaGVkQ2hpbGRyZW4iLCJvYnNlcnZlIiwiY2hpbGRMaXN0Iiwibm9kZVR5cGUiLCJhdHRhY2giLCJvbkxpZmVjeWNsZSIsIm9uU3RhcnQiLCJvblJlbW92ZSIsImJlZm9yZVJlbW92ZSIsIm9ic2VydmluZ1BhcmVudCIsInRlbXBFbFJlbW92ZSIsInJlc3VsdCIsIlByb21pc2UiLCJ0ZW1wT25TdGFydCIsImhhc0JlZW5BZGRlZCIsImhhc0JlZW5SZW1vdmVkIiwibXV0IiwiZnJvbSIsImFkZGVkTm9kZXMiLCJyZW1vdmVkTm9kZXMiLCJkaXNjb25uZWN0IiwicGFyZW50RWxlbWVudCIsImJvZHkiLCJzdWJ0cmVlIiwid2l0aExpZmVjeWNsZSIsImhhbmRsZXIiLCJzdGFydCIsInJlbW92ZWQiLCJkZXRhY2giLCJwb3AiLCJkZXRhY2hBbGwiLCJpbml0Iiwib3B0aW9ucyIsInJvb3QiLCJpbnRlcmNlcHRvcnMiLCJ1bCIsImFsbFRhZ3MiLCJQcm94eSIsInQiLCJwIiwiciIsInRhZ05hbWUiLCJzdGF0ZSIsImNvbnRlbnQiLCJfcHJvcExpc3RlbmVycyIsIl9zdGF0ZUxpc3RlbmVycyIsImFkZExpc3RlbmVyIiwiZW1pdENoYW5nZSIsInRhcmdldCIsImdldE93blByb3BlcnR5TmFtZXMiLCJwcm94eSIsImRlbGV0ZVByb3BlcnR5IiwiX19wcm90b19fIiwiZXJyb3IiLCJhZGRDaGFuZ2VkTWV0aG9kIiwic2V0IiwicmVFc2NhcGUiLCJyZVBhcmFtIiwidmFsaWRhdGVSdWxlIiwicnVsZSIsInR5cGUiLCJjaGFyQXQiLCJ0ZXN0Iiwicm91dGVNYXRjaGVyIiwicm91dGUiLCJydWxlcyIsInNlbGYiLCJuYW1lcyIsInJlIiwibW9kZSIsIlJlZ0V4cCIsInVybCIsInBhcmFtIiwicGFyYW1zIiwibWF0Y2hlcyIsImNhcHR1cmVzIiwic2xpY2UiLCJkaXYiLCJhIiwiUm91dGVyIiwiY3VycmVudFJvdXRlIiwiX2N1cnJlbnRSb3V0ZSIsIl9yb3V0ZXMiLCJfcm91dGVNYXRjaGVycyIsInF1ZXJ5IiwiVVJMU2VhcmNoUGFyYW1zIiwiX29wdGlvbnMiLCJfcm9vdFBhcmVudCIsInJvb3RQYXJlbnQiLCJfd2luZG93Iiwid2luZG93IiwiX2xvY2F0aW9uIiwibG9jYXRpb24iLCJfaGlzdG9yeSIsImhpc3RvcnkiLCJfaW5pdFJvdXRlTWF0Y2hlcnMiLCJfbW9kaWZ5TG9jYXRpb25GdW5jdGlvbnMiLCJfbGlzdGVuRXZlbnRzIiwibmF2aWdhdGUiLCJpbml0aWFsUm91dGUiLCJwYXRoIiwicXVlcnlTdHIiLCJkZWJ1ZyIsInB1c2hTdGF0ZSIsIl9zZXRSb3V0ZSIsIl9jdXJyZW50Um91dGVUYWciLCJfZ2V0Um91dGUiLCJfZ2V0RWZmZWN0aXZlUm91dGUiLCJlZmZlY3RpdmVSb3V0ZSIsIm1heENhbGxzIiwicm91dGVzIiwiYWxpYXMiLCJtYXRjaGVyIiwic2VhcmNoIiwiZmFsbGJhY2tSb3V0ZSIsIm5vUm9vdCIsInJvdXRlQnVpbGRlciIsIl9zZXRDdXJyZW50Um91dGUiLCJwYXRobmFtZSIsIkV2ZW50IiwibWF0Y2hlclN0ciIsInJvdXRlciIsIm1ha2VSb3V0ZXIiLCJvcHRzIiwiTGluayIsIm1hcmdpbiJdLCJzb3VyY2VSb290IjoiIn0=